function toCamelCase(str){"use strict";return str.replace(/\s(.)/g,function($1){return $1.toUpperCase()}).replace(/\s/g,"")}function hasClass(elem,elemClassName){"use strict";if(elem.classList){return elem.classList.contains(elemClassName)}return!!elem.className.match(new RegExp("(\\s|^)"+elemClassName+"(\\s|$)"))}jQuery.fn.getPath=function(){if(this.length!==1){throw"Requires one element."}var path,node=this,realNode,name,nodeParent,nodeSibling;while(node.length){realNode=node[0];name=realNode.localName;if(!name){break}name=name.toLowerCase();nodeParent=node.parent();nodeSibling=nodeParent.children(name);if(nodeSibling.length>1){name+=":eq("+nodeSibling.index(realNode)+")"}path=name+(path?">"+path:"");node=nodeParent}return path};var barclays=window.barclays||{};barclays.tracking={setLinkTracking:function(){"use strict";$("body").on("click","A",function(){var isSearchTopTen=hasClass(this,"common-questions--list-entry")||$(this).parents("UL#common-questions-list").length>0,isSearchSuggested=hasClass(this,"headersearch-link"),linktype="o",linktext="",linktagSections=[],linktagSectionsReordered,linkHref=this.href,searchText,digitalDataTealium={};if("undefined"!==typeof branchFinder&&branchFinder&&branchFinder.analyticsEventFired){branchFinder.analyticsEventFired=false}else if(isSearchTopTen||isSearchSuggested){linktext=this.text.replace(/^\s+|\s+$/g,"");if(isSearchTopTen){if("undefined"!==typeof s){s.linkTrackVars="pageName,prop16,prop17,prop24,prop34,eVar25,prop21,prop22,prop23,prop60,prop63,events";s.prop21=s.prop2+":SiteSearch";s.prop22=$(this).attr("data-list-index");s.prop23="Quicksearch";s.prop60="QSTop10";s.prop63=linktext;s.tl(true,linktype,s.pageName+":Answer:QSTop10:"+toCamelCase(linktext))}digitalDataTealium={event_type:"search QSTop10",event_timestamp_unix:Date.now()/1e3|0,event_timestamp_utc:(new Date).toISOString(),event_label:linktext,event_destination:$(this).attr("data-list-index"),event_section:"Header",event_value:null,event_alt:null,event_cssSelector:$(this).getPath(),event_domPath:["Header","Utilities","Quicksearch","Answer","QSTop10"],event_campaign:""}}else if(isSearchSuggested){searchText=$("input#search-input").val();if("undefined"!==typeof s){s.linkTrackVars="pageName,prop16,prop17,prop24,prop34,eVar25,eVar1,prop21,prop22,prop23,prop60,prop63,eVar63,events";s.events=s.linkTrackEvents="event1,event27";s.eVar1=searchText;s.prop21=s.prop2+":SiteSearch";s.prop22=$(this).attr("data-list-index");s.prop23=searchText;s.prop60="QSSearchSuggest";s.prop63=linktext;s.eVar63=1;s.tl(true,linktype,s.pageName+":Answer:QSSuggest:"+toCamelCase(linktext))}digitalDataTealium={event_type:"search QSSuggest",event_timestamp_unix:Date.now()/1e3|0,event_timestamp_utc:(new Date).toISOString(),event_label:linktext,event_destination:$(this).attr("data-list-index"),event_section:"Header",event_value:searchText,event_alt:null,event_cssSelector:$(this).getPath(),event_domPath:["Header","Utilities","Quicksearch","Answer","QSSuggest"],event_campaign:""}}}else{var ddlTool=0===$(this).closest("[data-component-type]").length?null:$(this).closest("[data-component-type]").data("componentType"),titleTag=this.title,ccTitleTag,ccText,dynamicButton=$(this).attr("data-previous-state"),linktag;if(linkHref.indexOf(".pdf")!==-1||linkHref.indexOf(".doc")!==-1||linkHref.indexOf(".xls")!==-1){linktype="d"}linktext=this.text.replace(/^\s+|\s+$|menu item level/g,"");if(typeof titleTag!=="undefined"&&titleTag!==""){ccTitleTag=toCamelCase(titleTag);linktagSections.push("alt:"+ccTitleTag)}ccText=toCamelCase(linktext);if(typeof dynamicButton!=="undefined"&&dynamicButton!==""){ccText=toCamelCase(dynamicButton)}linktagSections.push(ccText);linktagSections=barclays.tracking.generateLinkTagSections(this,linktagSections);linktagSectionsReordered=linktagSections.slice(0);linktagSectionsReordered.reverse();linktag=linktagSectionsReordered.join(":");if(typeof branchFinder!=="undefined"&&branchFinder&&branchFinder.analyticsClickEventFired){linktag="Public:BranchFinder:Results:"+linktag;branchFinder.analyticsClickEventFired=false}if("undefined"!==typeof s){s.linkTrackVars="prop16,prop17,prop24,prop34,eVar25,events";s.linkTrackEvents="None";s.tl(true,linktype,linktag)}digitalDataTealium={event_type:"click",event_timestamp_unix:Date.now()/1e3|0,event_timestamp_utc:(new Date).toISOString(),event_label:linktext,event_destination:linkHref,event_section:linktagSectionsReordered[0],event_value:null,event_alt:ccTitleTag,event_cssSelector:$(this).getPath(),event_domPath:linktagSectionsReordered,event_campaign:""}}if("undefined"!==typeof utag){Object.assign(digitalData,digitalDataTealium);utag.link(digitalData)}}).on("click","BUTTON",function(){var searchText,linktype,linktext,linktagSections,linktagSectionsReordered,linktag,ccText,alt=null,digitalDataTealium;if(typeof branchFinder!=="undefined"&&branchFinder&&branchFinder.analyticsEventFired){branchFinder.analyticsEventFired=false}else if(hasClass(this,"btn-search")){searchText=$("input#search-input").val();if("undefined"!==typeof s){s.linkTrackVars="pageName,prop16,prop17,prop24,prop34,eVar25,eVar1,prop21,prop23,prop60,eVar63,events";s.eVar1=searchText;s.prop21=s.prop2+":SiteSearch";s.prop23=searchText;s.prop60="Search";s.eVar63=1;s.tl(true,"o",s.pageName+":Answer:Search")}digitalDataTealium={event_type:"search QSSuggest",event_timestamp_unix:Date.now()/1e3|0,event_timestamp_utc:(new Date).toISOString(),event_label:"Search",event_destination:$(this).attr("data-list-index"),event_section:"Header",event_value:searchText,event_alt:alt,event_cssSelector:$(this).getPath(),event_domPath:["Header","Utilities","Quicksearch","Answer","Search"],event_campaign:""}}else{linktype="o";linktext=this.innerText;linktagSections=[];ccText=toCamelCase(linktext);linktagSections.push(ccText);linktagSections=barclays.tracking.generateLinkTagSections(this,linktagSections);linktagSectionsReordered=linktagSections.slice(0);linktagSectionsReordered.reverse();linktag=linktagSectionsReordered.join(":");alt=$(this).attr("title")?$(this).attr("title"):null;if("undefined"!==typeof s){s.linkTrackVars="prop16,prop17,prop24,prop34,eVar25,events";s.linkTrackEvents="None";s.tl(true,linktype,linktag)}digitalDataTealium={event_type:"click",event_timestamp_unix:Date.now()/1e3|0,event_timestamp_utc:(new Date).toISOString(),event_label:linktext,event_destination:null,event_section:linktagSectionsReordered[0],event_value:null,event_alt:alt,event_cssSelector:$(this).getPath(),event_domPath:linktagSectionsReordered,event_campaign:""}}if("undefined"!==typeof utag){Object.assign(digitalData,digitalDataTealium);utag.link(digitalData)}})},setOnChangeTracking:function(){"use strict";$("body").on("change","INPUT, SELECT, TEXTAREA",function(){var tagName=$(this).prop("tagName"),fieldName=$(this).attr("name"),linktagSections=[],linktagSectionsReordered,linktag,method,value=null,type="form",ddlTool=0===$(this).closest("[data-component-type]").length?null:$(this).closest("[data-component-type]").data("componentType"),digitalDataTealium;linktagSections.push(fieldName);linktagSections=barclays.tracking.generateLinkTagSections(this,linktagSections);linktagSectionsReordered=linktagSections.slice(0);linktagSectionsReordered.reverse();linktag=linktagSectionsReordered.join(":");if(tagName==="SELECT"){method="select"}else if(tagName==="TEXTAREA"){method="textarea"}else{method=$(this).attr("type")}if("undefined"!==typeof $(this).data("nonPersonal")&&true===$(this).data("nonPersonal")){if(tagName==="INPUT"||tagName==="input"){switch($(this).attr("type").toUpperCase()){case"RADIO":value=$('[name="'+fieldName+'"]:checked').val();break;case"CHECKBOX":value=$(this).is(":checked")?"checked":"unchecked";break;default:value=$(this).val()}}else{value=$(this).val()}}if("undefined"!==typeof s){s.linkTrackVars="prop16,prop17,prop24,prop34,eVar25,events";s.linkTrackEvents="None";if(value){linktag+=":"+value}s.tl(true,"o",linktag.replace(/:View|:Control/gi,""))}digitalDataTealium={event_type:type+" "+method,event_timestamp_unix:Date.now()/1e3|0,event_timestamp_utc:(new Date).toISOString(),event_label:fieldName,event_destination:null,event_section:linktagSectionsReordered[0],event_value:value,event_alt:null,event_cssSelector:$(this).getPath(),event_domPath:linktagSectionsReordered,event_campaign:""};if("undefined"!==typeof utag){Object.assign(digitalData,digitalDataTealium);utag.link(digitalData)}})},setOnMediaEventTracking:function(){"use strict";$("video").on("pause play",function(event){var linktagSections=[],linktagSectionsReordered,digitalDataTealium,events=event.type==="play"&&this.currentTime<.25?"event71":"none",percentageViewed=(this.currentTime/this.duration).toFixed(2).toString(),videoId=toCamelCase($(this).closest('[data-component-type="AdaptiveVideo"]').find('[data-aem-lta="title"]').text()),videoSource=this.currentSrc;linktagSections=barclays.tracking.generateLinkTagSections(this,linktagSections);linktagSectionsReordered=linktagSections.slice(0);linktagSectionsReordered.reverse();if("undefined"!==typeof s){s.linkTrackVars="prop1,prop2,prop3,prop31,prop11,prop16,prop54,prop17,prop60,prop61,prop62,eVar70,eVar71,eVar11,events";s.linkTrackEvents=events;s.prop17=s.pageName;s.eVar70=videoId;s.eVar71=percentageViewed;s.prop60=event.type;s.prop61=videoSource;s.prop62="video:link";var that=!this.href?true:this;s.tl(that,"o",s.pageName+":video:link:"+event.type)}digitalDataTealium={event_type:event.type,event_timestamp_unix:Date.now()/1e3|0,event_timestamp_utc:(new Date).toISOString(),event_label:percentageViewed,event_destination:videoSource,event_section:videoId,event_value:null,event_alt:null,event_cssSelector:null,event_domPath:linktagSectionsReordered,event_campaign:""};if("undefined"!==typeof utag){Object.assign(digitalData,digitalDataTealium);utag.link(digitalData)}});$("video").on("canplay ended error stalled waiting",function(event){var linktagSections=[],linktagSectionsReordered,errorCode=this.error?this.error.code.toString():null,digitalDataTealium,events=event.type==="ended"?"event72":"none",percentageViewed=(this.currentTime/this.duration).toFixed(2).toString(),videoId=toCamelCase($(this).closest('[data-component-type="AdaptiveVideo"]').find('[data-aem-lta="title"]').text()),videoSource=this.currentSrc;linktagSections=barclays.tracking.generateLinkTagSections(this,linktagSections);linktagSectionsReordered=linktagSections.slice(0);linktagSectionsReordered.reverse();if("undefined"!==typeof s){s.linkTrackVars="prop1,prop2,prop3,prop31,prop11,prop16,prop54,prop17,prop60,prop61,prop62,eVar70,eVar71,eVar11,events";s.linkTrackEvents=events;s.prop17=s.pageName;s.eVar70=videoId;s.eVar71=percentageViewed;s.prop60=event.type;s.prop61=videoSource;s.prop62="video:event";s.prop11=s.eVar11=errorCode;var that=!this.href?true:this;s.tl(that,"o",s.pageName+":video:event:"+event.type)}digitalDataTealium={event_type:event.type,event_timestamp_unix:Date.now()/1e3|0,event_timestamp_utc:(new Date).toISOString(),event_label:percentageViewed,event_destination:videoSource,event_section:videoId,event_value:null,event_alt:null,event_cssSelector:null,event_domPath:linktagSectionsReordered,event_campaign:""};if("undefined"!==typeof utag){Object.assign(digitalData,digitalDataTealium);utag.link(digitalData)}})},generateLinkTagSections:function(el,linktagSections){"use strict";var $relativeParent=$(el).closest("SECTION, [data-component-type]"),dataComponentType,patt,higherMenuText,newPart;do{dataComponentType=$relativeParent.attr("data-component-type");if(typeof dataComponentType!=="undefined"){patt=/MenuItemLevel\d+/g;if(patt.test(dataComponentType)){higherMenuText=toCamelCase($relativeParent.find("a").first().text().replace(/menu item level \d+/,""));if(higherMenuText!==linktagSections.slice(-1)[0]){dataComponentType=higherMenuText;linktagSections.push(toCamelCase(dataComponentType))}}else{linktagSections.push(toCamelCase(dataComponentType))}}else if($relativeParent.is("SECTION")){newPart=$relativeParent.find("h1,h2").first().text();linktagSections.push(toCamelCase("Section: "+newPart))}$relativeParent=$relativeParent.parents("SECTION, [data-component-type]").first()}while($relativeParent.length>0);if("undefined"!==typeof s){if(linktagSections.slice(-1)[0]==="Header"||linktagSections.slice(-1)[0]==="Footer"){linktagSections.splice(-1,0,s.prop1)}}return linktagSections},webComponentInteractionTracking:function(){window.addEventListener("UserInteraction",this.webComponentInteractionHandler.bind(this))},webComponentInteractionHandler:function(event){if(event==null||event.detail==null||window.barclays.tracking.WebComponentTracking==null)return;var detail=event.detail;var componentName=detail.componentName;var interaction=detail.interaction;var token=window.barclays.tracking.WebComponentTracking.constructToken(detail);if(typeof s!=="undefined"){var pageName=s.pageName;var overrides={prop17:pageName};var isOptionType=detail.field&&(detail.field.type==="radio"||detail.field.type==="select");var tokenSeparator=window.barclays.tracking.WebComponentTracking.getTokenSeparator();if(isOptionType){overrides.prop26=token}s.linkTrackVars="prop1,prop2,prop3,prop17,prop11,evar53,prop53,prop54,prop62,evar16";s.linkTrackEvents="None";s.tl(true,"o",pageName+tokenSeparator+token,overrides)}if(typeof utag!=="undefined"){var fieldToken=window.barclays.tracking.WebComponentTracking.constructFieldToken(detail);var optionToken=window.barclays.tracking.WebComponentTracking.constructOptionToken(detail);var eventType;if(interaction!=null){eventType=interaction}if(componentName==="aem-form-renderer"||componentName==="aem-bounce-back-calculator"){eventType="form"}dataLayer={event_type:eventType,event_label:fieldToken};if(optionToken){dataLayer.event_value=optionToken}Object.assign(digitalData,dataLayer);utag.link(digitalData)}}};$(document).ready(function(){"use strict";barclays.tracking.setLinkTracking();barclays.tracking.setOnChangeTracking();barclays.tracking.setOnMediaEventTracking();barclays.tracking.webComponentInteractionTracking()});