window.BarclaysComponentLibrary=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:false,exports:{}};t[r].call(i.exports,i,i.exports,n);i.l=true;return i.exports}n.m=t;n.c=e;n.d=function(t,e,r){if(!n.o(t,e))Object.defineProperty(t,e,{enumerable:true,get:r})};n.r=function(t){if("undefined"!==typeof Symbol&&Symbol.toStringTag)Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});Object.defineProperty(t,"__esModule",{value:true})};n.t=function(t,e){if(1&e)t=n(t);if(8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);n.r(r);Object.defineProperty(r,"default",{enumerable:true,value:t});if(2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r};n.n=function(t){var e=t&&t.__esModule?function e(){return t.default}:function e(){return t};n.d(e,"a",e);return e};n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};n.p="/";return n(n.s=10070)}({0:function(t,e){function n(t,e,n){if(e in t)Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true});else t[e]=n;return t}t.exports=n},100:function(t,e){var n=Math.ceil;var r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},10070:function(t,e,n){n(10071);t.exports=n(10074)},10071:function(t,e,n){"use strict";n.r(e);var r=n(18);var i=n.n(r);var a=n(351);var o=n(20);var s=n(7961);var u=function t(){Object(o.b)('[data-component-type="OffsetMortgageCalculator"]',s.a)};var c=function t(){u()};var l={OffsetMortgageCalculator:s.a,mountComponent:o.b,init:c};window.OffsetMortgageCalculatorBundle=i()(window.OffsetMortgageCalculatorBundle||{},l);window.OffsetMortgageCalculatorBundle.init();e.default=l},10072:function(t,e,n){"use strict";var r=n(29);var i=n(152);var a=[].reverse;var o=[1,2];r({target:"Array",proto:true,forced:String(o)===String(o.reverse())},{reverse:function t(){if(i(this))this.length=this.length;return a.call(this)}})},10073:function(t,e,n){var r,i;!function(){var a={version:"3.5.17"};var o=[].slice,s=function(t){return o.call(t)};var u=this.document;function c(t){return t&&(t.ownerDocument||t.document||t).documentElement}function l(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(u)try{s(u.documentElement.childNodes)[0].nodeType}catch(t){s=function(t){var e=t.length,n=new Array(e);for(;e--;)n[e]=t[e];return n}}if(!Date.now)Date.now=function(){return+new Date};if(u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var f=this.Element.prototype,h=f.setAttribute,d=f.setAttributeNS,g=this.CSSStyleDeclaration.prototype,p=g.setProperty;f.setAttribute=function(t,e){h.call(this,t,e+"")};f.setAttributeNS=function(t,e,n){d.call(this,t,e,n+"")};g.setProperty=function(t,e,n){p.call(this,t,e+"",n)}}a.ascending=v;function v(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}a.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN};a.min=function(t,e){var n=-1,r=t.length,i,a;if(1===arguments.length){for(;++n<r;)if(null!=(a=t[n])&&a>=a){i=a;break}for(;++n<r;)if(null!=(a=t[n])&&i>a)i=a}else{for(;++n<r;)if(null!=(a=e.call(t,t[n],n))&&a>=a){i=a;break}for(;++n<r;)if(null!=(a=e.call(t,t[n],n))&&i>a)i=a}return i};a.max=function(t,e){var n=-1,r=t.length,i,a;if(1===arguments.length){for(;++n<r;)if(null!=(a=t[n])&&a>=a){i=a;break}for(;++n<r;)if(null!=(a=t[n])&&a>i)i=a}else{for(;++n<r;)if(null!=(a=e.call(t,t[n],n))&&a>=a){i=a;break}for(;++n<r;)if(null!=(a=e.call(t,t[n],n))&&a>i)i=a}return i};a.extent=function(t,e){var n=-1,r=t.length,i,a,o;if(1===arguments.length){for(;++n<r;)if(null!=(a=t[n])&&a>=a){i=o=a;break}for(;++n<r;)if(null!=(a=t[n])){if(i>a)i=a;if(o<a)o=a}}else{for(;++n<r;)if(null!=(a=e.call(t,t[n],n))&&a>=a){i=o=a;break}for(;++n<r;)if(null!=(a=e.call(t,t[n],n))){if(i>a)i=a;if(o<a)o=a}}return[i,o]};function y(t){return null===t?NaN:+t}function m(t){return!isNaN(t)}a.sum=function(t,e){var n=0,r=t.length,i,a=-1;if(1===arguments.length){for(;++a<r;)if(m(i=+t[a]))n+=i}else for(;++a<r;)if(m(i=+e.call(t,t[a],a)))n+=i;return n};a.mean=function(t,e){var n=0,r=t.length,i,a=-1,o=r;if(1===arguments.length)for(;++a<r;)if(m(i=y(t[a])))n+=i;else--o;else for(;++a<r;)if(m(i=y(e.call(t,t[a],a))))n+=i;else--o;if(o)return n/o};a.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i};a.median=function(t,e){var n=[],r=t.length,i,o=-1;if(1===arguments.length){for(;++o<r;)if(m(i=y(t[o])))n.push(i)}else for(;++o<r;)if(m(i=y(e.call(t,t[o],o))))n.push(i);if(n.length)return a.quantile(n.sort(v),.5)};a.variance=function(t,e){var n=t.length,r=0,i,a,o=0,s=-1,u=0;if(1===arguments.length){for(;++s<n;)if(m(i=y(t[s])))o+=(a=i-r)*(i-(r+=a/++u))}else for(;++s<n;)if(m(i=y(e.call(t,t[s],s))))o+=(a=i-r)*(i-(r+=a/++u));if(u>1)return o/(u-1)};a.deviation=function(){var t=a.variance.apply(this,arguments);return t?Math.sqrt(t):t};function x(t){return{left:function(e,n,r,i){if(arguments.length<3)r=0;if(arguments.length<4)i=e.length;for(;r<i;){var a=r+i>>>1;if(t(e[a],n)<0)r=a+1;else i=a}return r},right:function(e,n,r,i){if(arguments.length<3)r=0;if(arguments.length<4)i=e.length;for(;r<i;){var a=r+i>>>1;if(t(e[a],n)>0)i=a;else r=a+1}return r}}}var _=x(v);a.bisectLeft=_.left;a.bisect=a.bisectRight=_.right;a.bisector=function(t){return x(1===t.length?function(e,n){return v(t(e),n)}:t)};a.shuffle=function(t,e,n){if((r=arguments.length)<3){n=t.length;if(r<2)e=0}var r=n-e,i,a;for(;r;){a=Math.random()*r--|0;i=t[r+e],t[r+e]=t[a+e],t[a+e]=i}return t};a.permute=function(t,e){var n=e.length,r=new Array(n);for(;n--;)r[n]=t[e[n]];return r};a.pairs=function(t){var e=0,n=t.length-1,r,i=t[0],a=new Array(n<0?0:n);for(;e<n;)a[e]=[r=i,i=t[++e]];return a};a.transpose=function(t){if(!(o=t.length))return[];for(var e=-1,n=a.min(t,w),r=new Array(n);++e<n;)for(var i=-1,o,s=r[e]=new Array(o);++i<o;)s[i]=t[i][e];return r};function w(t){return t.length}a.zip=function(){return a.transpose(arguments)};a.keys=function(t){var e=[];for(var n in t)e.push(n);return e};a.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e};a.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e};a.merge=function(t){var e=t.length,n,r=-1,i=0,a,o;for(;++r<e;)i+=t[r].length;a=new Array(i);for(;--e>=0;){n=(o=t[e]).length;for(;--n>=0;)a[--i]=o[n]}return a};var S=Math.abs;a.range=function(t,e,n){if(arguments.length<3){n=1;if(arguments.length<2){e=t;t=0}}if((e-t)/n===1/0)throw new Error("infinite range");var r=[],i=b(S(n)),a=-1,o;t*=i,e*=i;if((n*=i)<0)for(;(o=t+n*++a)>e;)r.push(o/i);else for(;(o=t+n*++a)<e;)r.push(o/i);return r};function b(t){var e=1;for(;t*e%1;)e*=10;return e}function A(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:false})}a.map=function(t,e){var n=new T;if(t instanceof T)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r=-1,i=t.length,a;if(1===arguments.length)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e.call(t,a=t[r],r),a)}else for(var o in t)n.set(o,t[o]);return n};function T(){this._=Object.create(null)}var M="__proto__",C="\0";A(T,{has:E,get:function(t){return this._[P(t)]},set:function(t,e){return this._[P(t)]=e},remove:k,keys:V,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:L(e),value:this._[e]});return t},size:O,empty:I,forEach:function(t){for(var e in this._)t.call(this,L(e),this._[e])}});function P(t){return(t+="")===M||t[0]===C?C+t:t}function L(t){return(t+="")[0]===C?t.slice(1):t}function E(t){return P(t)in this._}function k(t){return(t=P(t))in this._&&delete this._[t]}function V(){var t=[];for(var e in this._)t.push(L(e));return t}function O(){var t=0;for(var e in this._)++t;return t}function I(){for(var t in this._)return false;return true}a.nest=function(){var t={},e=[],n=[],r,i;function o(n,a,s){if(s>=e.length)return i?i.call(t,a):r?a.sort(r):a;var u=-1,c=a.length,l=e[s++],f,h,d,g=new T,p;for(;++u<c;)if(p=g.get(f=l(h=a[u])))p.push(h);else g.set(f,[h]);if(n){h=n();d=function(t,e){h.set(t,o(n,e,s))}}else{h={};d=function(t,e){h[t]=o(n,e,s)}}g.forEach(d);return h}function s(t,r){if(r>=e.length)return t;var i=[],a=n[r++];t.forEach(function(t,e){i.push({key:t,values:s(e,r)})});return a?i.sort(function(t,e){return a(t.key,e.key)}):i}t.map=function(t,e){return o(e,t,0)};t.entries=function(t){return s(o(a.map,t,0),0)};t.key=function(n){e.push(n);return t};t.sortKeys=function(r){n[e.length-1]=r;return t};t.sortValues=function(e){r=e;return t};t.rollup=function(e){i=e;return t};return t};a.set=function(t){var e=new R;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e};function R(){this._=Object.create(null)}A(R,{has:E,add:function(t){this._[P(t+="")]=true;return t},remove:k,values:V,size:O,empty:I,forEach:function(t){for(var e in this._)t.call(this,L(e))}});a.behavior={};function G(t){return t}a.rebind=function(t,e){var n=1,r=arguments.length,i;for(;++n<r;)t[i=arguments[n]]=N(t,e,e[i]);return t};function N(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function D(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=F.length;n<r;++n){var i=F[n]+e;if(i in t)return i}}var F=["webkit","ms","moz","Moz","o","O"];function z(){}a.dispatch=function(){var t=new j,e=-1,n=arguments.length;for(;++e<n;)t[arguments[e]]=X(t);return t};function j(){}j.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0){r=t.slice(n+1);t=t.slice(0,n)}if(t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)if(this.hasOwnProperty(t))this[t].on(r,null);return this}};function X(t){var e=[],n=new T;function r(){var n=e,r=-1,i=n.length,a;for(;++r<i;)if(a=n[r].on)a.apply(this,arguments);return t}r.on=function(r,i){var a=n.get(r),o;if(arguments.length<2)return a&&a.on;if(a){a.on=null;e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1));n.remove(r)}if(i)e.push(n.set(r,{on:i}));return t};return r}a.event=null;function B(){a.event.preventDefault()}function H(){var t=a.event,e;for(;e=t.sourceEvent;)t=e;return t}function Y(t){var e=new j,n=0,r=arguments.length;for(;++n<r;)e[arguments[n]]=X(e);e.of=function(n,r){return function(i){try{var o=i.sourceEvent=a.event;i.target=t;a.event=i;e[i.type].apply(n,r)}finally{a.event=o}}};return e}a.requote=function(t){return t.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var W={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function q(t){W(t,K);return t}var Q=function(t,e){return e.querySelector(t)},$=function(t,e){return e.querySelectorAll(t)},Z=function(t,e){var n=t.matches||t[D(t,"matchesSelector")];return(Z=function(t,e){return n.call(t,e)})(t,e)};if("function"===typeof Sizzle){Q=function(t,e){return Sizzle(t,e)[0]||null};$=Sizzle;Z=Sizzle.matchesSelector}a.selection=function(){return a.select(u.documentElement)};var K=a.selection.prototype=[];K.select=function(t){var e=[],n,r,i,a;t=J(t);for(var o=-1,s=this.length;++o<s;){e.push(n=[]);n.parentNode=(i=this[o]).parentNode;for(var u=-1,c=i.length;++u<c;)if(a=i[u]){n.push(r=t.call(a,a.__data__,u,o));if(r&&"__data__"in a)r.__data__=a.__data__}else n.push(null)}return q(e)};function J(t){return"function"===typeof t?t:function(){return Q(t,this)}}K.selectAll=function(t){var e=[],n,r;t=tt(t);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],u=-1,c=o.length;++u<c;)if(r=o[u]){e.push(n=s(t.call(r,r.__data__,u,i)));n.parentNode=r}return q(e)};function tt(t){return"function"===typeof t?t:function(){return $(t,this)}}var et="http://www.w3.org/1999/xhtml";var nt={svg:"http://www.w3.org/2000/svg",xhtml:et,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};a.ns={prefix:nt,qualify:function(t){var e=t.indexOf(":"),n=t;if(e>=0&&"xmlns"!==(n=t.slice(0,e)))t=t.slice(e+1);return nt.hasOwnProperty(n)?{space:nt[n],local:t}:t}};K.attr=function(t,e){if(arguments.length<2){if("string"===typeof t){var n=this.node();return(t=a.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(rt(e,t[e]));return this}return this.each(rt(t,e))};function rt(t,e){t=a.ns.qualify(t);function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);if(null==n)this.removeAttribute(t);else this.setAttribute(t,n)}function u(){var n=e.apply(this,arguments);if(null==n)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,n)}return null==e?t.local?r:n:"function"===typeof e?t.local?u:s:t.local?o:i}function it(t){return t.trim().replace(/\s+/g," ")}K.classed=function(t,e){if(arguments.length<2){if("string"===typeof t){var n=this.node(),r=(t=ot(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return false}else{e=n.getAttribute("class");for(;++i<r;)if(!at(t[i]).test(e))return false}return true}for(e in t)this.each(st(e,t[e]));return this}return this.each(st(t,e))};function at(t){return new RegExp("(?:^|\\s+)"+a.requote(t)+"(?:\\s+|$)","g")}function ot(t){return(t+"").trim().split(/^|\s+/)}function st(t,e){var n=(t=ot(t).map(ut)).length;function r(){var r=-1;for(;++r<n;)t[r](this,e)}function i(){var r=-1,i=e.apply(this,arguments);for(;++r<n;)t[r](this,i)}return"function"===typeof e?i:r}function ut(t){var e=at(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";if(r){e.lastIndex=0;if(!e.test(i))n.setAttribute("class",it(i+" "+t))}else n.setAttribute("class",it(i.replace(e," ")))}}K.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){if(r<2)e="";for(n in t)this.each(ct(n,t[n],e));return this}if(r<2){var i=this.node();return l(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(ct(t,e,n))};function ct(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function a(){var r=e.apply(this,arguments);if(null==r)this.style.removeProperty(t);else this.style.setProperty(t,r,n)}return null==e?r:"function"===typeof e?a:i}K.property=function(t,e){if(arguments.length<2){if("string"===typeof t)return this.node()[t];for(e in t)this.each(lt(e,t[e]));return this}return this.each(lt(t,e))};function lt(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);if(null==n)delete this[t];else this[t]=n}return null==e?n:"function"===typeof e?i:r}K.text=function(t){return arguments.length?this.each("function"===typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent};K.html=function(t){return arguments.length?this.each("function"===typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML};K.append=function(t){t=ft(t);return this.select(function(){return this.appendChild(t.apply(this,arguments))})};function ft(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n===et&&e.documentElement.namespaceURI===et?e.createElement(t):e.createElementNS(n,t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"===typeof t?t:(t=a.ns.qualify(t)).local?n:e}K.insert=function(t,e){t=ft(t);e=J(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})};K.remove=function(){return this.each(ht)};function ht(){var t=this.parentNode;if(t)t.removeChild(this)}K.data=function(t,e){var n=-1,r=this.length,i,a;if(!arguments.length){t=new Array(r=(i=this[0]).length);for(;++n<r;)if(a=i[n])t[n]=a.__data__;return t}function o(t,n){var r,i=t.length,a=n.length,o=Math.min(i,a),l=new Array(a),f=new Array(a),h=new Array(i),d,g;if(e){var p=new T,v=new Array(i),y;for(r=-1;++r<i;)if(d=t[r]){if(p.has(y=e.call(d,d.__data__,r)))h[r]=d;else p.set(y,d);v[r]=y}for(r=-1;++r<a;){if(!(d=p.get(y=e.call(n,g=n[r],r))))f[r]=dt(g);else if(true!==d){l[r]=d;d.__data__=g}p.set(y,true)}for(r=-1;++r<i;)if(r in v&&true!==p.get(v[r]))h[r]=t[r]}else{for(r=-1;++r<o;){d=t[r];g=n[r];if(d){d.__data__=g;l[r]=d}else f[r]=dt(g)}for(;r<a;++r)f[r]=dt(n[r]);for(;r<i;++r)h[r]=t[r]}f.update=l;f.parentNode=l.parentNode=h.parentNode=t.parentNode;s.push(f);u.push(l);c.push(h)}var s=yt([]),u=q([]),c=q([]);if("function"===typeof t)for(;++n<r;)o(i=this[n],t.call(i,i.parentNode.__data__,n));else for(;++n<r;)o(i=this[n],t);u.enter=function(){return s};u.exit=function(){return c};return u};function dt(t){return{__data__:t}}K.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")};K.filter=function(t){var e=[],n,r,i;if("function"!==typeof t)t=gt(t);for(var a=0,o=this.length;a<o;a++){e.push(n=[]);n.parentNode=(r=this[a]).parentNode;for(var s=0,u=r.length;s<u;s++)if((i=r[s])&&t.call(i,i.__data__,s,a))n.push(i)}return q(e)};function gt(t){return function(){return Z(this,t)}}K.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n=this[t],r=n.length-1,i=n[r],a;--r>=0;)if(a=n[r]){if(i&&i!==a.nextSibling)i.parentNode.insertBefore(a,i);i=a}return this};K.sort=function(t){t=pt.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()};function pt(t){if(!arguments.length)t=v;return function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}K.each=function(t){return vt(this,function(e,n,r){t.call(e,e.__data__,n,r)})};function vt(t,e){for(var n=0,r=t.length;n<r;n++)for(var i=t[n],a=0,o=i.length,s;a<o;a++)if(s=i[a])e(s,a,n);return t}K.call=function(t){var e=s(arguments);t.apply(e[0]=this,e);return this};K.empty=function(){return!this.node()};K.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null};K.size=function(){var t=0;vt(this,function(){++t});return t};function yt(t){W(t,mt);return t}var mt=[];a.selection.enter=yt;a.selection.enter.prototype=mt;mt.append=K.append;mt.empty=K.empty;mt.node=K.node;mt.call=K.call;mt.size=K.size;mt.select=function(t){var e=[],n,r,i,a,o;for(var s=-1,u=this.length;++s<u;){i=(a=this[s]).update;e.push(n=[]);n.parentNode=a.parentNode;for(var c=-1,l=a.length;++c<l;)if(o=a[c]){n.push(i[c]=r=t.call(a.parentNode,o.__data__,c,s));r.__data__=o.__data__}else n.push(null)}return q(e)};mt.insert=function(t,e){if(arguments.length<2)e=xt(this);return K.insert.call(this,t,e)};function xt(t){var e,n;return function(r,i,a){var o=t[a].update,s=o.length,u;if(a!=n)n=a,e=0;if(i>=e)e=i+1;for(;!(u=o[e])&&++e<s;);return u}}a.select=function(t){var e;if("string"===typeof t)(e=[Q(t,u)]).parentNode=u.documentElement;else(e=[t]).parentNode=c(t);return q([e])};a.selectAll=function(t){var e;if("string"===typeof t)(e=s($(t,u))).parentNode=u.documentElement;else(e=s(t)).parentNode=null;return q([e])};K.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){if(r<2)e=false;for(n in t)this.each(_t(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=false}return this.each(_t(t,e,n))};function _t(t,e,n){var r="__on"+t,i=t.indexOf("."),o=St;if(i>0)t=t.slice(0,i);var u=wt.get(t);if(u)t=u,o=bt;function c(){var e=this[r];if(e){this.removeEventListener(t,e,e.$);delete this[r]}}function l(){var i=o(e,s(arguments));c.call(this);this.addEventListener(t,this[r]=i,i.$=n);i._=e}function f(){var e=new RegExp("^__on([^.]+)"+a.requote(t)+"$"),n;for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$);delete this[r]}}return i?e?l:c:e?z:f}var wt=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(u)wt.forEach(function(t){if("on"+t in u)wt.remove(t)});function St(t,e){return function(n){var r=a.event;a.event=n;e[0]=this.__data__;try{t.apply(this,e)}finally{a.event=r}}}function bt(t,e){var n=St(t,e);return function(t){var e=this,r=t.relatedTarget;if(!r||r!==this&&!(8&r.compareDocumentPosition(this)))n.call(this,t)}}var At,Tt=0;function Mt(t){var e=".dragsuppress-"+ ++Tt,n="click"+e,r=a.select(l(t)).on("touchmove"+e,B).on("dragstart"+e,B).on("selectstart"+e,B);if(null==At)At="onselectstart"in t?false:D(t.style,"userSelect");if(At){var i=c(t).style,o=i[At];i[At]="none"}return function(t){r.on(e,null);if(At)i[At]=o;if(t){var a=function(){r.on(n,null)};r.on(n,function(){B();a()},true);setTimeout(a,0)}}}a.mouse=function(t){return Pt(t,H())};var Ct=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Pt(t,e){if(e.changedTouches)e=e.changedTouches[0];var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(Ct<0){var i=l(t);if(i.scrollX||i.scrollY){var o=(n=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ct=!(o.f||o.e);n.remove()}}if(Ct)r.x=e.pageX,r.y=e.pageY;else r.x=e.clientX,r.y=e.clientY;return[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}a.touch=function(t,e,n){if(arguments.length<3)n=e,e=H().changedTouches;if(e)for(var r=0,i=e.length,a;r<i;++r)if((a=e[r]).identifier===n)return Pt(t,a)};a.behavior.drag=function(){var t=Y(i,"drag","dragstart","dragend"),e=null,n=o(z,a.mouse,l,"mousemove","mouseup"),r=o(Lt,a.touch,G,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(n,r,i,o,s){return function(){var u=this,c=a.event.target.correspondingElement||a.event.target,l=this.parentNode,f=t.of(this,arguments),h=0,d=n(),g=".drag"+(null==d?"":"-"+d),p,v=a.select(i(c)).on(o+g,x).on(s+g,_),y=Mt(c),m=r(l,d);if(e)p=[(p=e.apply(this,arguments)).x-m[0],p.y-m[1]];else p=[0,0];f({type:"dragstart"});function x(){var t=r(l,d),e,n;if(!t)return;e=t[0]-m[0];n=t[1]-m[1];h|=e|n;m=t;f({type:"drag",x:t[0]+p[0],y:t[1]+p[1],dx:e,dy:n})}function _(){if(!r(l,d))return;v.on(o+g,null).on(s+g,null);y(h);f({type:"dragend"})}}}i.origin=function(t){if(!arguments.length)return e;e=t;return i};return a.rebind(i,t,"on")};function Lt(){return a.event.changedTouches[0].identifier}a.touches=function(t,e){if(arguments.length<2)e=H().touches;return e?s(e).map(function(e){var n=Pt(t,e);n.identifier=e.identifier;return n}):[]};var Et=1e-6,kt=Et*Et,Vt=Math.PI,Ot=2*Vt,It=Ot-Et,Rt=Vt/2,Gt=Vt/180,Nt=180/Vt;function Dt(t){return t>0?1:t<0?-1:0}function Ft(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function zt(t){return t>1?0:t<-1?Vt:Math.acos(t)}function jt(t){return t>1?Rt:t<-1?-Rt:Math.asin(t)}function Xt(t){return((t=Math.exp(t))-1/t)/2}function Bt(t){return((t=Math.exp(t))+1/t)/2}function Ht(t){return((t=Math.exp(2*t))-1)/(t+1)}function Yt(t){return(t=Math.sin(t/2))*t}var Ut=Math.SQRT2,Wt=2,qt=4;a.interpolateZoom=function(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2],u=a-n,c=o-r,l=u*u+c*c,f,h;if(l<kt){h=Math.log(s/i)/Ut;f=function(t){return[n+t*u,r+t*c,i*Math.exp(Ut*t*h)]}}else{var d=Math.sqrt(l),g=(s*s-i*i+4*l)/(2*i*2*d),p=(s*s-i*i-4*l)/(2*s*2*d),v=Math.log(Math.sqrt(g*g+1)-g),y=Math.log(Math.sqrt(p*p+1)-p);h=(y-v)/Ut;f=function(t){var e=t*h,a=Bt(v),o=i/(2*d)*(a*Ht(Ut*e+v)-Xt(v));return[n+o*u,r+o*c,i*a/Bt(Ut*e+v)]}}f.duration=1e3*h;return f};a.behavior.zoom=function(){var t={x:0,y:0,k:1},e,n,r,i=[960,500],o=Qt,s=250,c=0,f="mousedown.zoom",h="mousemove.zoom",d="mouseup.zoom",g,p="touchstart.zoom",v,y=Y(S,"zoomstart","zoom","zoomend"),m,x,_,w;if(!Zt)Zt="onwheel"in u?($t=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?($t=function(){return a.event.wheelDelta},"mousewheel"):($t=function(){return-a.event.detail},"MozMousePixelScroll");function S(t){t.on(f,V).on(Zt+".zoom",I).on("dblclick.zoom",R).on(p,O)}S.event=function(e){e.each(function(){var e=y.of(this,arguments),r=t;if(Ru)a.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1};L(e)}).tween("zoom:zoom",function(){var o=i[0],s=i[1],u=n?n[0]:o/2,c=n?n[1]:s/2,l=a.interpolateZoom([(u-t.x)/t.k,(c-t.y)/t.k,o/t.k],[(u-r.x)/r.k,(c-r.y)/r.k,o/r.k]);return function(n){var r=l(n),i=o/r[2];this.__chart__=t={x:u-r[0]*i,y:c-r[1]*i,k:i};E(e)}}).each("interrupt.zoom",function(){k(e)}).each("end.zoom",function(){k(e)});else{this.__chart__=t;L(e);E(e);k(e)}})};S.translate=function(e){if(!arguments.length)return[t.x,t.y];t={x:+e[0],y:+e[1],k:t.k};P();return S};S.scale=function(e){if(!arguments.length)return t.k;t={x:t.x,y:t.y,k:null};T(+e);P();return S};S.scaleExtent=function(t){if(!arguments.length)return o;o=null==t?Qt:[+t[0],+t[1]];return S};S.center=function(t){if(!arguments.length)return r;r=t&&[+t[0],+t[1]];return S};S.size=function(t){if(!arguments.length)return i;i=t&&[+t[0],+t[1]];return S};S.duration=function(t){if(!arguments.length)return s;s=+t;return S};S.x=function(e){if(!arguments.length)return x;x=e;m=e.copy();t={x:0,y:0,k:1};return S};S.y=function(e){if(!arguments.length)return w;w=e;_=e.copy();t={x:0,y:0,k:1};return S};function b(e){return[(e[0]-t.x)/t.k,(e[1]-t.y)/t.k]}function A(e){return[e[0]*t.k+t.x,e[1]*t.k+t.y]}function T(e){t.k=Math.max(o[0],Math.min(o[1],e))}function M(e,n){n=A(n);t.x+=e[0]-n[0];t.y+=e[1]-n[1]}function C(e,r,i,o){e.__chart__={x:t.x,y:t.y,k:t.k};T(Math.pow(2,o));M(n=r,i);e=a.select(e);if(s>0)e=e.transition().duration(s);e.call(S.event)}function P(){if(x)x.domain(m.range().map(function(e){return(e-t.x)/t.k}).map(m.invert));if(w)w.domain(_.range().map(function(e){return(e-t.y)/t.k}).map(_.invert))}function L(t){if(!c++)t({type:"zoomstart"})}function E(e){P();e({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function k(t){if(!--c)t({type:"zoomend"}),n=null}function V(){var t=this,e=y.of(t,arguments),n=0,r=a.select(l(t)).on(h,s).on(d,u),i=b(a.mouse(t)),o=Mt(t);Eu.call(t);L(e);function s(){n=1;M(a.mouse(t),i);E(e)}function u(){r.on(h,null).on(d,null);o(n);k(e)}}function O(){var e=this,n=y.of(e,arguments),r={},i=0,o,s=".zoom-"+a.event.changedTouches[0].identifier,u="touchmove"+s,c="touchend"+s,l=[],h=a.select(e),d=Mt(e);m();L(n);h.on(f,null).on(p,m);function g(){var n=a.touches(e);o=t.k;n.forEach(function(t){if(t.identifier in r)r[t.identifier]=b(t)});return n}function m(){var n=a.event.target;a.select(n).on(u,x).on(c,_);l.push(n);var o=a.event.changedTouches;for(var s=0,f=o.length;s<f;++s)r[o[s].identifier]=null;var h=g(),d=Date.now();if(1===h.length){if(d-v<500){var p=h[0];C(e,p,r[p.identifier],Math.floor(Math.log(t.k)/Math.LN2)+1);B()}v=d}else if(h.length>1){var p=h[0],y=h[1],m=p[0]-y[0],w=p[1]-y[1];i=m*m+w*w}}function x(){var t=a.touches(e),s,u,c,l;Eu.call(e);for(var f=0,h=t.length;f<h;++f,l=null){c=t[f];if(l=r[c.identifier]){if(u)break;s=c,u=l}}if(l){var d=(d=c[0]-s[0])*d+(d=c[1]-s[1])*d,g=i&&Math.sqrt(d/i);s=[(s[0]+c[0])/2,(s[1]+c[1])/2];u=[(u[0]+l[0])/2,(u[1]+l[1])/2];T(g*o)}v=null;M(s,u);E(n)}function _(){if(a.event.touches.length){var t=a.event.changedTouches;for(var e=0,i=t.length;e<i;++e)delete r[t[e].identifier];for(var o in r)return void g()}a.selectAll(l).on(s,null);h.on(f,V).on(p,O);d();k(n)}}function I(){var i=y.of(this,arguments);if(g)clearTimeout(g);else Eu.call(this),e=b(n=r||a.mouse(this)),L(i);g=setTimeout(function(){g=null;k(i)},50);B();T(Math.pow(2,.002*$t())*t.k);M(n,e);E(i)}function R(){var e=a.mouse(this),n=Math.log(t.k)/Math.LN2;C(this,e,b(e),a.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return a.rebind(S,y,"on")};var Qt=[0,1/0],$t,Zt;a.color=Kt;function Kt(){}Kt.prototype.toString=function(){return this.rgb()+""};a.hsl=Jt;function Jt(t,e,n){return this instanceof Jt?void(this.h=+t,this.s=+e,this.l=+n):arguments.length<2?t instanceof Jt?new Jt(t.h,t.s,t.l):we(""+t,Se,Jt):new Jt(t,e,n)}var te=Jt.prototype=new Kt;te.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);return new Jt(this.h,this.s,this.l/t)};te.darker=function(t){t=Math.pow(.7,arguments.length?t:1);return new Jt(this.h,this.s,t*this.l)};te.rgb=function(){return ee(this.h,this.s,this.l)};function ee(t,e,n){var r,i;t=isNaN(t)?0:(t%=360)<0?t+360:t;e=isNaN(e)?0:e<0?0:e>1?1:e;r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e);function a(t){if(t>360)t-=360;else if(t<0)t+=360;if(t<60)return r+(i-r)*t/60;if(t<180)return i;if(t<240)return r+(i-r)*(240-t)/60;return r}function o(t){return Math.round(255*a(t))}return new ve(o(t+120),o(t),o(t-120))}a.hcl=ne;function ne(t,e,n){return this instanceof ne?void(this.h=+t,this.c=+e,this.l=+n):arguments.length<2?t instanceof ne?new ne(t.h,t.c,t.l):t instanceof ae?he(t.l,t.a,t.b):he((t=be((t=a.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ne(t,e,n)}var re=ne.prototype=new Kt;re.brighter=function(t){return new ne(this.h,this.c,Math.min(100,this.l+oe*(arguments.length?t:1)))};re.darker=function(t){return new ne(this.h,this.c,Math.max(0,this.l-oe*(arguments.length?t:1)))};re.rgb=function(){return ie(this.h,this.c,this.l).rgb()};function ie(t,e,n){if(isNaN(t))t=0;if(isNaN(e))e=0;return new ae(n,Math.cos(t*=Gt)*e,Math.sin(t)*e)}a.lab=ae;function ae(t,e,n){return this instanceof ae?void(this.l=+t,this.a=+e,this.b=+n):arguments.length<2?t instanceof ae?new ae(t.l,t.a,t.b):t instanceof ne?ie(t.h,t.c,t.l):be((t=ve(t)).r,t.g,t.b):new ae(t,e,n)}var oe=18;var se=.95047,ue=1,ce=1.08883;var le=ae.prototype=new Kt;le.brighter=function(t){return new ae(Math.min(100,this.l+oe*(arguments.length?t:1)),this.a,this.b)};le.darker=function(t){return new ae(Math.max(0,this.l-oe*(arguments.length?t:1)),this.a,this.b)};le.rgb=function(){return fe(this.l,this.a,this.b)};function fe(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return new ve(pe(3.2404542*(i=de(i)*se)-1.5371385*(r=de(r)*ue)-.4985314*(a=de(a)*ce)),pe(-.969266*i+1.8760108*r+.041556*a),pe(.0556434*i-.2040259*r+1.0572252*a))}function he(t,e,n){return t>0?new ne(Math.atan2(n,e)*Nt,Math.sqrt(e*e+n*n),t):new ne(NaN,NaN,t)}function de(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ge(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function pe(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}a.rgb=ve;function ve(t,e,n){return this instanceof ve?void(this.r=~~t,this.g=~~e,this.b=~~n):arguments.length<2?t instanceof ve?new ve(t.r,t.g,t.b):we(""+t,ve,ee):new ve(t,e,n)}function ye(t){return new ve(t>>16,t>>8&255,255&t)}function me(t){return ye(t)+""}var xe=ve.prototype=new Kt;xe.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;if(!e&&!n&&!r)return new ve(i,i,i);if(e&&e<i)e=i;if(n&&n<i)n=i;if(r&&r<i)r=i;return new ve(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))};xe.darker=function(t){return new ve((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)};xe.hsl=function(){return Se(this.r,this.g,this.b)};xe.toString=function(){return"#"+_e(this.r)+_e(this.g)+_e(this.b)};function _e(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function we(t,e,n){var r=0,i=0,a=0,o,s,u;if(o=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase())){s=o[2].split(",");switch(o[1]){case"hsl":return n(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100);case"rgb":return e(Te(s[0]),Te(s[1]),Te(s[2]))}}if(u=Me.get(t))return e(u.r,u.g,u.b);if(null!=t&&"#"===t.charAt(0)&&!isNaN(u=parseInt(t.slice(1),16)))if(4===t.length){r=(3840&u)>>4;r|=r>>4;i=240&u;i|=i>>4;a=15&u;a|=a<<4}else if(7===t.length){r=(16711680&u)>>16;i=(65280&u)>>8;a=255&u}return e(r,i,a)}function Se(t,e,n){var r=Math.min(t/=255,e/=255,n/=255),i=Math.max(t,e,n),a=i-r,o,s,u=(i+r)/2;if(a){s=u<.5?a/(i+r):a/(2-i-r);if(t==i)o=(e-n)/a+(e<n?6:0);else if(e==i)o=(n-t)/a+2;else o=(t-e)/a+4;o*=60}else{o=NaN;s=u>0&&u<1?0:o}return new Jt(o,s,u)}function be(t,e,n){var r=ge((.4124564*(t=Ae(t))+.3575761*(e=Ae(e))+.1804375*(n=Ae(n)))/se),i=ge((.2126729*t+.7151522*e+.072175*n)/ue),a;return ae(116*i-16,500*(r-i),200*(i-ge((.0193339*t+.119192*e+.9503041*n)/ce)))}function Ae(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Te(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}var Me=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Me.forEach(function(t,e){Me.set(t,ye(e))});function Ce(t){return"function"===typeof t?t:function(){return t}}a.functor=Ce;a.xhr=Pe(G);function Pe(t){return function(e,n,r){if(2===arguments.length&&"function"===typeof n)r=n,n=null;return Le(e,n,t,r)}}function Le(t,e,n,r){var i={},o=a.dispatch("beforesend","progress","load","error"),u={},c=new XMLHttpRequest,l=null;if(this.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(t))c=new XDomainRequest;"onload"in c?c.onload=c.onerror=f:c.onreadystatechange=function(){c.readyState>3&&f()};function f(){var t=c.status,e;if(!t&&ke(c)||t>=200&&t<300||304===t){try{e=n.call(i,c)}catch(t){o.error.call(i,t);return}o.load.call(i,e)}else o.error.call(i,c)}c.onprogress=function(t){var e=a.event;a.event=t;try{o.progress.call(i,c)}finally{a.event=e}};i.header=function(t,e){t=(t+"").toLowerCase();if(arguments.length<2)return u[t];if(null==e)delete u[t];else u[t]=e+"";return i};i.mimeType=function(t){if(!arguments.length)return e;e=null==t?null:t+"";return i};i.responseType=function(t){if(!arguments.length)return l;l=t;return i};i.response=function(t){n=t;return i};["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(s(arguments)))}});i.send=function(n,r,a){if(2===arguments.length&&"function"===typeof r)a=r,r=null;c.open(n,t,true);if(null!=e&&!("accept"in u))u.accept=e+",*/*";if(c.setRequestHeader)for(var s in u)c.setRequestHeader(s,u[s]);if(null!=e&&c.overrideMimeType)c.overrideMimeType(e);if(null!=l)c.responseType=l;if(null!=a)i.on("error",a).on("load",function(t){a(null,t)});o.beforesend.call(i,c);c.send(null==r?null:r);return i};i.abort=function(){c.abort();return i};a.rebind(i,o,"on");return null==r?i:i.get(Ee(r))}function Ee(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function ke(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}a.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){if(arguments.length<3)r=n,n=null;var i=Le(t,e,null==n?a:o(n),r);i.row=function(t){return arguments.length?i.response(null==(n=t)?a:o(t)):n};return i}function a(t){return i.parse(t.responseText)}function o(t){return function(e){return i.parse(e.responseText,t)}}i.parse=function(t,e){var n;return i.parseRows(t,function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i})};i.parseRows=function(t,e){var n={},i={},a=[],o=t.length,s=0,u=0,c,l;function f(){if(s>=o)return i;if(l)return l=false,n;var e=s;if(34===t.charCodeAt(e)){var a=e;for(;a++<o;)if(34===t.charCodeAt(a)){if(34!==t.charCodeAt(a+1))break;++a}s=a+2;var u;if(13===(u=t.charCodeAt(a+1))){l=true;if(10===t.charCodeAt(a+2))++s}else if(10===u)l=true;return t.slice(e+1,a).replace(/""/g,'"')}for(;s<o;){var u,c=1;if(10===(u=t.charCodeAt(s++)))l=true;else if(13===u){l=true;if(10===t.charCodeAt(s))++s,++c}else if(u!==r)continue;return t.slice(e,s-c)}return t.slice(e)}for(;(c=f())!==i;){var h=[];for(;c!==n&&c!==i;){h.push(c);c=f()}if(e&&null==(h=e(h,u++)))continue;a.push(h)}return a};i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new R,r=[];e.forEach(function(t){for(var e in t)if(!n.has(e))r.push(n.add(e))});return[r.map(u).join(t)].concat(e.map(function(e){return r.map(function(t){return u(e[t])}).join(t)})).join("\n")};i.formatRows=function(t){return t.map(s).join("\n")};function s(e){return e.map(u).join(t)}function u(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i};a.csv=a.dsv(",","text/csv");a.tsv=a.dsv("\t","text/tab-separated-values");var Ve,Oe,Ie,Re,Ge=this[D(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};a.timer=function(){Ne.apply(this,arguments)};function Ne(t,e,n){var r=arguments.length;if(r<2)e=0;if(r<3)n=Date.now();var i,a={c:t,t:n+e,n:null};if(Oe)Oe.n=a;else Ve=a;Oe=a;if(!Ie){Re=clearTimeout(Re);Ie=1;Ge(De)}return a}function De(){var t=Fe(),e=ze()-t;if(e>24){if(isFinite(e)){clearTimeout(Re);Re=setTimeout(De,e)}Ie=0}else{Ie=1;Ge(De)}}a.timer.flush=function(){Fe();ze()};function Fe(){var t=Date.now(),e=Ve;for(;e;){if(t>=e.t&&e.c(t-e.t))e.c=null;e=e.n}return t}function ze(){var t,e=Ve,n=1/0;for(;e;)if(e.c){if(e.t<n)n=e.t;e=(t=e).n}else e=t?t.n=e.n:Ve=e.n;Oe=t;return n}function je(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}a.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Xe=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Be);a.formatPrefix=function(t,e){var n=0;if(t=+t){if(t<0)t*=-1;if(e)t=a.round(t,je(t,e));n=1+Math.floor(1e-12+Math.log(t)/Math.LN10);n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))}return Xe[8+n/3]};function Be(t,e){var n=Math.pow(10,3*S(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function He(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){var i=t.length,a=[],o=0,s=r[0],u=0;for(;i>0&&s>0;){if(u+s+1>e)s=Math.max(1,e-u);a.push(t.substring(i-=s,i+s));if((u+=s+1)>e)break;s=r[o=(o+1)%r.length]}return a.reverse().join(n)}:G;return function(t){var n=Ye.exec(t),r=n[1]||" ",s=n[2]||">",u=n[3]||"-",c=n[4]||"",l=n[5],f=+n[6],h=n[7],d=n[8],g=n[9],p=1,v="",y="",m=false,x=true;if(d)d=+d.substring(1);if(l||"0"===r&&"="===s){l=r="0";s="="}switch(g){case"n":h=true;g="g";break;case"%":p=100;y="%";g="f";break;case"p":p=100;y="%";g="r";break;case"b":case"o":case"x":case"X":if("#"===c)v="0"+g.toLowerCase();case"c":x=false;case"d":m=true;d=0;break;case"s":p=-1;g="r";break}if("$"===c)v=i[0],y=i[1];if("r"==g&&!d)g="g";if(null!=d)if("g"==g)d=Math.max(1,Math.min(21,d));else if("e"==g||"f"==g)d=Math.max(0,Math.min(20,d));g=Ue.get(g)||We;var _=l&&h;return function(t){var n=y;if(m&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===u?"":u;if(p<0){var c=a.formatPrefix(t,d);t=c.scale(t);n=c.symbol+y}else t*=p;var w=(t=g(t,d)).lastIndexOf("."),S,b;if(w<0){var A=x?t.lastIndexOf("e"):-1;if(A<0)S=t,b="";else S=t.substring(0,A),b=t.substring(A)}else{S=t.substring(0,w);b=e+t.substring(w+1)}if(!l&&h)S=o(S,1/0);var T=v.length+S.length+b.length+(_?0:i.length),M=T<f?new Array(T=f-T+1).join(r):"";if(_)S=o(M+S,M.length?f-b.length:1/0);i+=v;t=S+b;return("<"===s?i+t+M:">"===s?M+i+t:"^"===s?M.substring(0,T>>=1)+i+t+M.substring(T):i+(_?t:M+t))+n}}}var Ye=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Ue=a.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=a.round(t,je(t,e))).toFixed(Math.max(0,Math.min(20,je(t*(1+1e-15),e))))}});function We(t){return t+""}var qe=a.time={},Qe=Date;function $e(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}$e.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ze.setUTCDate.apply(this._,arguments)},setDay:function(){Ze.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ze.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ze.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ze.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ze.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ze.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ze.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ze.setTime.apply(this._,arguments)}};var Ze=Date.prototype;function Ke(t,e,n){function r(e){var n=t(e),r=a(n,1);return e-n<r-e?n:r}function i(n){e(n=t(new Qe(n-1)),1);return n}function a(t,n){e(t=new Qe(+t),n);return t}function o(t,r,a){var o=i(t),s=[];if(a>1)for(;o<r;){if(!(n(o)%a))s.push(new Date(+o));e(o,1)}else for(;o<r;)s.push(new Date(+o)),e(o,1);return s}function s(t,e,n){try{Qe=$e;var r=new $e;r._=t;return o(r,e,n)}finally{Qe=Date}}t.floor=t;t.round=r;t.ceil=i;t.offset=a;t.range=o;var u=t.utc=Je(t);u.floor=u;u.round=Je(r);u.ceil=Je(i);u.offset=Je(a);u.range=s;return t}function Je(t){return function(e,n){try{Qe=$e;var r=new $e;r._=e;return t(r,n)._}finally{Qe=Date}}}qe.year=Ke(function(t){(t=qe.day(t)).setMonth(0,1);return t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()});qe.years=qe.year.range;qe.years.utc=qe.year.utc.range;qe.day=Ke(function(t){var e=new Qe(2e3,0);e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate());return e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1});qe.days=qe.day.range;qe.days.utc=qe.day.utc.range;qe.dayOfYear=function(t){var e=qe.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=qe[t]=Ke(function(t){(t=qe.day(t)).setDate(t.getDate()-(t.getDay()+e)%7);return t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=qe.year(t).getDay();return Math.floor((qe.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});qe[t+"s"]=n.range;qe[t+"s"].utc=n.utc.range;qe[t+"OfYear"]=function(t){var n=qe.year(t).getDay();return Math.floor((qe.dayOfYear(t)+(n+e)%7)/7)}});qe.week=qe.sunday;qe.weeks=qe.sunday.range;qe.weeks.utc=qe.sunday.utc.range;qe.weekOfYear=qe.sundayOfYear;function tn(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,u=t.months,c=t.shortMonths;function l(t){var e=t.length;function n(n){var r=[],i=-1,a=0,o,s,u;for(;++i<e;)if(37===t.charCodeAt(i)){r.push(t.slice(a,i));if(null!=(s=en[o=t.charAt(++i)]))o=t.charAt(++i);if(u=w[o])o=u(n,null==s?"e"===o?" ":"0":s);r.push(o);a=i+1}r.push(t.slice(a,i));return r.join("")}n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r;if(f(n,t,e,0)!=e.length)return null;if("p"in n)n.H=n.H%12+12*n.p;var i=null!=n.Z&&Qe!==$e,a=new(i?$e:Qe);if("j"in n)a.setFullYear(n.y,0,n.j);else if("W"in n||"U"in n){if(!("w"in n))n.w="W"in n?1:0;a.setFullYear(n.y,0,1);a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(a.getDay()+5)%7:n.w+7*n.U-(a.getDay()+6)%7)}else a.setFullYear(n.y,n.m,n.d);a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L);return i?a._:a};n.toString=function(){return t};return n}function f(t,e,n,r){var i,a,o,s=0,u=e.length,c=n.length;for(;s<u;){if(r>=c)return-1;if(37===(i=e.charCodeAt(s++))){o=e.charAt(s++);if(!(a=S[o in en?e.charAt(s++):o])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}l.utc=function(t){var e=l(t);function n(t){try{var n=new(Qe=$e);n._=t;return e(n)}finally{Qe=Date}}n.parse=function(t){try{Qe=$e;var n=e.parse(t);return n&&n._}finally{Qe=Date}};n.toString=e.toString;return n};l.multi=l.utc.multi=An;var h=a.map(),d=on(o),g=sn(o),p=on(s),v=sn(s),y=on(u),m=sn(u),x=on(c),_=sn(c);i.forEach(function(t,e){h.set(t.toLowerCase(),e)});var w={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:l(e),d:function(t,e){return an(t.getDate(),e,2)},e:function(t,e){return an(t.getDate(),e,2)},H:function(t,e){return an(t.getHours(),e,2)},I:function(t,e){return an(t.getHours()%12||12,e,2)},j:function(t,e){return an(1+qe.dayOfYear(t),e,3)},L:function(t,e){return an(t.getMilliseconds(),e,3)},m:function(t,e){return an(t.getMonth()+1,e,2)},M:function(t,e){return an(t.getMinutes(),e,2)},p:function(t){return i[+(t.getHours()>=12)]},S:function(t,e){return an(t.getSeconds(),e,2)},U:function(t,e){return an(qe.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return an(qe.mondayOfYear(t),e,2)},x:l(n),X:l(r),y:function(t,e){return an(t.getFullYear()%100,e,2)},Y:function(t,e){return an(t.getFullYear()%1e4,e,4)},Z:Sn,"%":function(){return"%"}};var S={a:b,A:A,b:T,B:M,c:C,d:vn,e:vn,H:mn,I:mn,j:yn,L:wn,m:pn,M:xn,p:E,S:_n,U:cn,w:un,W:ln,x:P,X:L,y:hn,Y:fn,Z:dn,"%":bn};function b(t,e,n){p.lastIndex=0;var r=p.exec(e.slice(n));return r?(t.w=v.get(r[0].toLowerCase()),n+r[0].length):-1}function A(t,e,n){d.lastIndex=0;var r=d.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1}function T(t,e,n){x.lastIndex=0;var r=x.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1}function M(t,e,n){y.lastIndex=0;var r=y.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1}function C(t,e,n){return f(t,w.c.toString(),e,n)}function P(t,e,n){return f(t,w.x.toString(),e,n)}function L(t,e,n){return f(t,w.X.toString(),e,n)}function E(t,e,n){var r=h.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}return l}var en={"-":"",_:" ",0:"0"},nn=/^\s*\d+/,rn=/^%/;function an(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function on(t){return new RegExp("^(?:"+t.map(a.requote).join("|")+")","i")}function sn(t){var e=new T,n=-1,r=t.length;for(;++n<r;)e.set(t[n].toLowerCase(),n);return e}function un(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function cn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function ln(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function fn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function hn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.y=gn(+r[0]),n+r[0].length):-1}function dn(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function gn(t){return t+(t>68?1900:2e3)}function pn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function vn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function yn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function mn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function xn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function _n(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function wn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Sn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=S(e)/60|0,i=S(e)%60;return n+an(r,"0",2)+an(i,"0",2)}function bn(t,e,n){rn.lastIndex=0;var r=rn.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function An(t){var e=t.length,n=-1;for(;++n<e;)t[n][0]=this(t[n][0]);return function(e){var n=0,r=t[n];for(;!r[1](e);)r=t[++n];return r[0](e)}}a.locale=function(t){return{numberFormat:He(t),timeFormat:tn(t)}};var Tn=a.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});a.format=Tn.numberFormat;a.geo={};function Mn(){}Mn.prototype={s:0,t:0,add:function(t){Pn(t,this.t,Cn);Pn(Cn.s,this.s,this);if(this.s)this.t+=Cn.t;else this.s=Cn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Cn=new Mn;function Pn(t,e,n){var r=n.s=t+e,i=r-t,a=r-i;n.t=t-a+(e-i)}a.geo.stream=function(t,e){if(t&&En.hasOwnProperty(t.type))En[t.type](t,e);else Ln(t,e)};function Ln(t,e){if(t&&kn.hasOwnProperty(t.type))kn[t.type](t,e)}var En={Feature:function(t,e){Ln(t.geometry,e)},FeatureCollection:function(t,e){var n=t.features,r=-1,i=n.length;for(;++r<i;)Ln(n[r].geometry,e)}};var kn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates;e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){var n=t.coordinates,r=-1,i=n.length;for(;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Vn(t.coordinates,e,0)},MultiLineString:function(t,e){var n=t.coordinates,r=-1,i=n.length;for(;++r<i;)Vn(n[r],e,0)},Polygon:function(t,e){On(t.coordinates,e)},MultiPolygon:function(t,e){var n=t.coordinates,r=-1,i=n.length;for(;++r<i;)On(n[r],e)},GeometryCollection:function(t,e){var n=t.geometries,r=-1,i=n.length;for(;++r<i;)Ln(n[r],e)}};function Vn(t,e,n){var r=-1,i=t.length-n,a;e.lineStart();for(;++r<i;)a=t[r],e.point(a[0],a[1],a[2]);e.lineEnd()}function On(t,e){var n=-1,r=t.length;e.polygonStart();for(;++n<r;)Vn(t[n],e,1);e.polygonEnd()}a.geo.area=function(t){In=0;a.geo.stream(t,Gn);return In};var In,Rn=new Mn;var Gn={sphere:function(){In+=4*Vt},point:z,lineStart:z,lineEnd:z,polygonStart:function(){Rn.reset();Gn.lineStart=Nn},polygonEnd:function(){var t=2*Rn;In+=t<0?4*Vt+t:t;Gn.lineStart=Gn.lineEnd=Gn.point=z}};function Nn(){var t,e,n,r,i;Gn.point=function(o,s){Gn.point=a;n=(t=o)*Gt,r=Math.cos(s=(e=s)*Gt/2+Vt/4),i=Math.sin(s)};function a(t,e){e=e*Gt/2+Vt/4;var a=(t*=Gt)-n,o=a>=0?1:-1,s=o*a,u=Math.cos(e),c=Math.sin(e),l=i*c,f=r*u+l*Math.cos(s),h=l*o*Math.sin(s);Rn.add(Math.atan2(h,f));n=t,r=u,i=c}Gn.lineEnd=function(){a(t,e)}}function Dn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Fn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function zn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function jn(t,e){t[0]+=e[0];t[1]+=e[1];t[2]+=e[2]}function Xn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Bn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e;t[1]/=e;t[2]/=e}function Hn(t){return[Math.atan2(t[1],t[0]),jt(t[2])]}function Yn(t,e){return S(t[0]-e[0])<Et&&S(t[1]-e[1])<Et}a.geo.bounds=function(){var t,e,n,r,i,o,s,u,c,l,f;var h={point:d,lineStart:p,lineEnd:v,polygonStart:function(){h.point=y;h.lineStart=m;h.lineEnd=x;c=0;Gn.polygonStart()},polygonEnd:function(){Gn.polygonEnd();h.point=d;h.lineStart=p;h.lineEnd=v;if(Rn<0)t=-(n=180),e=-(r=90);else if(c>Et)r=90;else if(c<-Et)e=-90;f[0]=t,f[1]=n}};function d(i,a){l.push(f=[t=i,n=i]);if(a<e)e=a;if(a>r)r=a}function g(a,o){var s=Dn([a*Gt,o*Gt]);if(u){var c=zn(u,s),l,f=zn([c[1],-c[0],0],c);Bn(f);f=Hn(f);var h=a-i,g=h>0?1:-1,p=f[0]*Nt*g,v=S(h)>180;if(v^(g*i<p&&p<g*a)){var y;if((y=f[1]*Nt)>r)r=y}else if(v^(g*i<(p=(p+360)%360-180)&&p<g*a)){var y;if((y=-f[1]*Nt)<e)e=y}else{if(o<e)e=o;if(o>r)r=o}if(v){if(a<i){if(_(t,a)>_(t,n))n=a}else if(_(a,n)>_(t,n))t=a}else if(n>=t){if(a<t)t=a;if(a>n)n=a}else if(a>i){if(_(t,a)>_(t,n))n=a}else if(_(a,n)>_(t,n))t=a}else d(a,o);u=s,i=a}function p(){h.point=g}function v(){f[0]=t,f[1]=n;h.point=d;u=null}function y(t,e){if(u){var n=t-i;c+=S(n)>180?n+(n>0?360:-360):n}else o=t,s=e;Gn.point(t,e);g(t,e)}function m(){Gn.lineStart()}function x(){y(o,s);Gn.lineEnd();if(S(c)>Et)t=-(n=180);f[0]=t,f[1]=n;u=null}function _(t,e){return(e-=t)<0?e+360:e}function w(t,e){return t[0]-e[0]}function b(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(i){r=n=-(t=e=1/0);l=[];a.geo.stream(i,h);var o;if(o=l.length){l.sort(w);for(var s=1,u,c,d=[u=l[0]];s<o;++s)if(b((c=l[s])[0],u)||b(c[1],u)){if(_(u[0],c[1])>_(u[0],u[1]))u[1]=c[1];if(_(c[0],u[1])>_(u[0],u[1]))u[0]=c[0]}else d.push(u=c);var g=-1/0,p;for(var o,s=0,u=d[o=d.length-1],c;s<=o;u=c,++s){c=d[s];if((p=_(u[1],c[0]))>g)g=p,t=c[0],n=u[1]}}l=f=null;return t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,r]]}}();a.geo.centroid=function(t){Un=Wn=qn=Qn=$n=Zn=Kn=Jn=tr=er=nr=0;a.geo.stream(t,rr);var e=tr,n=er,r=nr,i=e*e+n*n+r*r;if(i<kt){e=Zn,n=Kn,r=Jn;if(Wn<Et)e=qn,n=Qn,r=$n;if((i=e*e+n*n+r*r)<kt)return[NaN,NaN]}return[Math.atan2(n,e)*Nt,jt(r/Math.sqrt(i))*Nt]};var Un,Wn,qn,Qn,$n,Zn,Kn,Jn,tr,er,nr;var rr={sphere:z,point:ir,lineStart:or,lineEnd:sr,polygonStart:function(){rr.lineStart=ur},polygonEnd:function(){rr.lineStart=or}};function ir(t,e){t*=Gt;var n=Math.cos(e*=Gt);ar(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function ar(t,e,n){qn+=(t-qn)/++Un;Qn+=(e-Qn)/Un;$n+=(n-$n)/Un}function or(){var t,e,n;rr.point=function(i,a){i*=Gt;var o=Math.cos(a*=Gt);t=o*Math.cos(i);e=o*Math.sin(i);n=Math.sin(a);rr.point=r;ar(t,e,n)};function r(r,i){r*=Gt;var a=Math.cos(i*=Gt),o=a*Math.cos(r),s=a*Math.sin(r),u=Math.sin(i),c=Math.atan2(Math.sqrt((c=e*u-n*s)*c+(c=n*o-t*u)*c+(c=t*s-e*o)*c),t*o+e*s+n*u);Wn+=c;Zn+=c*(t+(t=o));Kn+=c*(e+(e=s));Jn+=c*(n+(n=u));ar(t,e,n)}}function sr(){rr.point=ir}function ur(){var t,e,n,r,i;rr.point=function(o,s){t=o,e=s;rr.point=a;o*=Gt;var u=Math.cos(s*=Gt);n=u*Math.cos(o);r=u*Math.sin(o);i=Math.sin(s);ar(n,r,i)};rr.lineEnd=function(){a(t,e);rr.lineEnd=sr;rr.point=ir};function a(t,e){t*=Gt;var a=Math.cos(e*=Gt),o=a*Math.cos(t),s=a*Math.sin(t),u=Math.sin(e),c=r*u-i*s,l=i*o-n*u,f=n*s-r*o,h=Math.sqrt(c*c+l*l+f*f),d=n*o+r*s+i*u,g=h&&-zt(d)/h,p=Math.atan2(h,d);tr+=g*c;er+=g*l;nr+=g*f;Wn+=p;Zn+=p*(n+(n=o));Kn+=p*(r+(r=s));Jn+=p*(i+(i=u));ar(n,r,i)}}function cr(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}if(t.invert&&e.invert)n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])};return n}function lr(){return true}function fr(t,e,n,r,i){var a=[],o=[];t.forEach(function(t){if((e=t.length-1)<=0)return;var e,n=t[0],r=t[e];if(Yn(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);i.lineEnd();return}var u=new dr(n,t,null,true),c=new dr(n,null,u,false);u.o=c;a.push(u);o.push(c);u=new dr(r,t,null,false);c=new dr(r,null,u,true);u.o=c;a.push(u);o.push(c)});o.sort(e);hr(a);hr(o);if(!a.length)return;for(var s=0,u=n,c=o.length;s<c;++s)o[s].e=u=!u;var l=a[0],f,h;for(;;){var d=l,g=true;for(;d.v;)if((d=d.n)===l)return;f=d.z;i.lineStart();do{d.v=d.o.v=true;if(d.e){if(g)for(var s=0,c=f.length;s<c;++s)i.point((h=f[s])[0],h[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(g)for(var s=(f=d.p.z).length-1;s>=0;--s)i.point((h=f[s])[0],h[1]);else r(d.x,d.p.x,-1,i);d=d.p}f=(d=d.o).z;g=!g}while(!d.v);i.lineEnd()}}function hr(t){if(!(e=t.length))return;var e,n=0,r=t[0],i;for(;++n<e;){r.n=i=t[n];i.p=r;r=i}r.n=i=t[0];i.p=r}function dr(t,e,n,r){this.x=t;this.z=e;this.o=n;this.e=r;this.v=false;this.n=this.p=null}function gr(t,e,n,r){return function(i,o){var s=e(o),u=i.invert(r[0],r[1]);var c={point:l,lineStart:h,lineEnd:d,polygonStart:function(){c.point=_;c.lineStart=w;c.lineEnd=S;g=[];m=[]},polygonEnd:function(){c.point=l;c.lineStart=h;c.lineEnd=d;g=a.merge(g);var t=Sr(u,m);if(g.length){if(!y)o.polygonStart(),y=true;fr(g,yr,t,n,o)}else if(t){if(!y)o.polygonStart(),y=true;o.lineStart();n(null,null,1,o);o.lineEnd()}if(y)o.polygonEnd(),y=false;g=m=null},sphere:function(){o.polygonStart();o.lineStart();n(null,null,1,o);o.lineEnd();o.polygonEnd()}};function l(e,n){var r=i(e,n);if(t(e=r[0],n=r[1]))o.point(e,n)}function f(t,e){var n=i(t,e);s.point(n[0],n[1])}function h(){c.point=f;s.lineStart()}function d(){c.point=l;s.lineEnd()}var g;var p=vr(),v=e(p),y=false,m,x;function _(t,e){x.push([t,e]);var n=i(t,e);v.point(n[0],n[1])}function w(){v.lineStart();x=[]}function S(){_(x[0][0],x[0][1]);v.lineEnd();var t=v.clean(),e=p.buffer(),n,r=e.length;x.pop();m.push(x);x=null;if(!r)return;if(1&t){var r,i=-1,a;if((r=(n=e[0]).length-1)>0){if(!y)o.polygonStart(),y=true;o.lineStart();for(;++i<r;)o.point((a=n[i])[0],a[1]);o.lineEnd()}return}if(r>1&&2&t)e.push(e.pop().concat(e.shift()));g.push(e.filter(pr))}return c}}function pr(t){return t.length>1}function vr(){var t=[],e;return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:z,buffer:function(){var n=t;t=[];e=null;return n},rejoin:function(){if(t.length>1)t.push(t.pop().concat(t.shift()))}}}function yr(t,e){return((t=t.x)[0]<0?t[1]-Rt-Et:Rt-t[1])-((e=e.x)[0]<0?e[1]-Rt-Et:Rt-e[1])}var mr=gr(lr,xr,wr,[-Vt,-Vt/2]);function xr(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart();i=1},point:function(a,o){var s=a>0?Vt:-Vt,u=S(a-e);if(S(u-Vt)<Et){t.point(e,n=(n+o)/2>0?Rt:-Rt);t.point(r,n);t.lineEnd();t.lineStart();t.point(s,n);t.point(a,n);i=0}else if(r!==s&&u>=Vt){if(S(e-r)<Et)e-=r*Et;if(S(a-s)<Et)a-=s*Et;n=_r(e,n,a,o);t.point(r,n);t.lineEnd();t.lineStart();t.point(s,n);i=0}t.point(e=a,n=o);r=s},lineEnd:function(){t.lineEnd();e=n=NaN},clean:function(){return 2-i}}}function _r(t,e,n,r){var i,a,o=Math.sin(t-n);return S(o)>Et?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}function wr(t,e,n,r){var i;if(null==t){i=n*Rt;r.point(-Vt,i);r.point(0,i);r.point(Vt,i);r.point(Vt,0);r.point(Vt,-i);r.point(0,-i);r.point(-Vt,-i);r.point(-Vt,0);r.point(-Vt,i)}else if(S(t[0]-e[0])>Et){var a=t[0]<e[0]?Vt:-Vt;i=n*a/2;r.point(-a,i);r.point(0,i);r.point(a,i)}else r.point(e[0],e[1])}function Sr(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Rn.reset();for(var s=0,u=e.length;s<u;++s){var c=e[s],l=c.length;if(!l)continue;var f=c[0],h=f[0],d=f[1]/2+Vt/4,g=Math.sin(d),p=Math.cos(d),v=1;for(;;){if(v===l)v=0;var y=(t=c[v])[0],m=t[1]/2+Vt/4,x=Math.sin(m),_=Math.cos(m),w=y-h,S=w>=0?1:-1,b=S*w,A=b>Vt,T=g*x;Rn.add(Math.atan2(T*S*Math.sin(b),p*_+T*Math.cos(b)));a+=A?w+S*Ot:w;if(A^h>=n^y>=n){var M=zn(Dn(f),Dn(t));Bn(M);var C=zn(i,M);Bn(C);var P=(A^w>=0?-1:1)*jt(C[2]);if(r>P||r===P&&(M[0]||M[1]))o+=A^w>=0?1:-1}if(!v++)break;h=y,g=x,p=_,f=t}}return(a<-Et||a<Et&&Rn<-Et)^1&o}function br(t){var e=Math.cos(t),n=e>0,r=S(e)>Et,i;return gr(a,o,oi(t,6*Gt),n?[0,-t]:[-Vt,t-Vt]);function a(t,n){return Math.cos(t)*Math.cos(n)>e}function o(t){var e,i,o,c,l;return{lineStart:function(){c=o=false;l=1},point:function(f,h){var d=[f,h],g,p=a(f,h),v=n?p?0:u(f,h):p?u(f+(f<0?Vt:-Vt),h):0;if(!e&&(c=o=p))t.lineStart();if(p!==o){g=s(e,d);if(Yn(e,g)||Yn(d,g)){d[0]+=Et;d[1]+=Et;p=a(d[0],d[1])}}if(p!==o){l=0;if(p){t.lineStart();g=s(d,e);t.point(g[0],g[1])}else{g=s(e,d);t.point(g[0],g[1]);t.lineEnd()}e=g}else if(r&&e&&n^p){var y;if(!(v&i)&&(y=s(d,e,true))){l=0;if(n){t.lineStart();t.point(y[0][0],y[0][1]);t.point(y[1][0],y[1][1]);t.lineEnd()}else{t.point(y[1][0],y[1][1]);t.lineEnd();t.lineStart();t.point(y[0][0],y[0][1])}}}if(p&&(!e||!Yn(e,d)))t.point(d[0],d[1]);e=d,o=p,i=v},lineEnd:function(){if(o)t.lineEnd();e=null},clean:function(){return l|(c&&o)<<1}}}function s(t,n,r){var i,a;var o=[1,0,0],s=zn(Dn(t),Dn(n)),u=Fn(s,s),c=s[0],l=u-c*c;if(!l)return!r&&t;var f=e*u/l,h=-e*c/l,d=zn(o,s),g=Xn(o,f),p;jn(g,Xn(s,h));var v=d,y=Fn(g,v),m=Fn(v,v),x=y*y-m*(Fn(g,g)-1);if(x<0)return;var _=Math.sqrt(x),w=Xn(v,(-y-_)/m);jn(w,g);w=Hn(w);if(!r)return w;var b=t[0],A=n[0],T=t[1],M=n[1],C;if(A<b)C=b,b=A,A=C;var P=A-b,L=S(P-Vt)<Et,E;if(!L&&M<T)C=T,T=M,M=C;if(L||P<Et?L?T+M>0^w[1]<(S(w[0]-b)<Et?T:M):T<=w[1]&&w[1]<=M:P>Vt^(b<=w[0]&&w[0]<=A)){var k=Xn(v,(-y+_)/m);jn(k,g);return[w,Hn(k)]}}function u(e,r){var i=n?t:Vt-t,a=0;if(e<-i)a|=1;else if(e>i)a|=2;if(r<-i)a|=4;else if(r>i)a|=8;return a}}function Ar(t,e,n,r){return function(i){var a=i.a,o=i.b,s=a.x,u=a.y,c,l,f=0,h=1,d=o.x-s,g=o.y-u,p;p=t-s;if(!d&&p>0)return;p/=d;if(d<0){if(p<f)return;if(p<h)h=p}else if(d>0){if(p>h)return;if(p>f)f=p}p=n-s;if(!d&&p<0)return;p/=d;if(d<0){if(p>h)return;if(p>f)f=p}else if(d>0){if(p<f)return;if(p<h)h=p}p=e-u;if(!g&&p>0)return;p/=g;if(g<0){if(p<f)return;if(p<h)h=p}else if(g>0){if(p>h)return;if(p>f)f=p}p=r-u;if(!g&&p<0)return;p/=g;if(g<0){if(p>h)return;if(p>f)f=p}else if(g>0){if(p<f)return;if(p<h)h=p}if(f>0)i.a={x:s+f*d,y:u+f*g};if(h<1)i.b={x:s+h*d,y:u+h*g};return i}}var Tr=1e9;a.geo.clipExtent=function(){var t,e,n,r,i,a,o={stream:function(t){if(i)i.valid=false;(i=a(t)).valid=true;return i},extent:function(s){if(!arguments.length)return[[t,e],[n,r]];a=Mr(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]);if(i)i.valid=false,i=null;return o}};return o.extent([[0,0],[960,500]])};function Mr(t,e,n,r){return function(u){var c=u,l=vr(),f=Ar(t,e,n,r),h,d,g;var p={point:x,lineStart:P,lineEnd:L,polygonStart:function(){u=l;h=[];d=[];C=true},polygonEnd:function(){u=c;h=a.merge(h);var e=v([t,r]),n=C&&e,i=h.length;if(n||i){u.polygonStart();if(n){u.lineStart();y(null,null,1,u);u.lineEnd()}if(i)fr(h,o,e,y,u);u.polygonEnd()}h=d=g=null}};function v(t){var e=0,n=d.length,r=t[1];for(var i=0;i<n;++i)for(var a=1,o=d[i],s=o.length,u=o[0],c;a<s;++a){c=o[a];if(u[1]<=r){if(c[1]>r&&Ft(u,c,t)>0)++e}else if(c[1]<=r&&Ft(u,c,t)<0)--e;u=c}return 0!==e}function y(a,o,u,c){var l=0,f=0;if(null==a||(l=i(a,u))!==(f=i(o,u))||s(a,o)<0^u>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+u+4)%4)!==f);else c.point(o[0],o[1])}function m(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function x(t,e){if(m(t,e))u.point(t,e)}var _,w,S,b,A,T,M,C;function P(){p.point=E;if(d)d.push(g=[]);M=true;T=false;b=A=NaN}function L(){if(h){E(_,w);if(S&&T)l.rejoin();h.push(l.buffer())}p.point=x;if(T)u.lineEnd()}function E(t,e){var n=m(t=Math.max(-Tr,Math.min(Tr,t)),e=Math.max(-Tr,Math.min(Tr,e)));if(d)g.push([t,e]);if(M){_=t,w=e,S=n;M=false;if(n){u.lineStart();u.point(t,e)}}else if(n&&T)u.point(t,e);else{var r={a:{x:b,y:A},b:{x:t,y:e}};if(f(r)){if(!T){u.lineStart();u.point(r.a.x,r.a.y)}u.point(r.b.x,r.b.y);if(!n)u.lineEnd();C=false}else if(n){u.lineStart();u.point(t,e);C=false}}b=t,A=e,T=n}return p};function i(r,i){return S(r[0]-t)<Et?i>0?0:3:S(r[0]-n)<Et?i>0?2:1:S(r[1]-e)<Et?i>0?1:0:i>0?3:2}function o(t,e){return s(t.x,e.x)}function s(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function Cr(t){var e=0,n=Vt/3,r=Kr(t),i=r(e,n);i.parallels=function(t){if(!arguments.length)return[e/Vt*180,n/Vt*180];return r(e=t[0]*Vt/180,n=t[1]*Vt/180)};return i}function Pr(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),a-n*Math.cos(t)]}o.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,jt((i-(t*t+n*n)*r*r)/(2*r))]};return o}(a.geo.conicEqualArea=function(){return Cr(Pr)}).raw=Pr;a.geo.albers=function(){return a.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};a.geo.albersUsa=function(){var t=a.geo.albers();var e=a.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var n=a.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var r,i={point:function(t,e){r=[t,e]}},o,s,u;function c(t){var e=t[0],n=t[1];r=null;(o(e,n),r)||(s(e,n),r)||u(e,n);return r}c.invert=function(r){var i=t.scale(),a=t.translate(),o=(r[0]-a[0])/i,s=(r[1]-a[1])/i;return(s>=.12&&s<.234&&o>=-.425&&o<-.214?e:s>=.166&&s<.234&&o>=-.214&&o<-.115?n:t).invert(r)};c.stream=function(r){var i=t.stream(r),a=e.stream(r),o=n.stream(r);return{point:function(t,e){i.point(t,e);a.point(t,e);o.point(t,e)},sphere:function(){i.sphere();a.sphere();o.sphere()},lineStart:function(){i.lineStart();a.lineStart();o.lineStart()},lineEnd:function(){i.lineEnd();a.lineEnd();o.lineEnd()},polygonStart:function(){i.polygonStart();a.polygonStart();o.polygonStart()},polygonEnd:function(){i.polygonEnd();a.polygonEnd();o.polygonEnd()}}};c.precision=function(r){if(!arguments.length)return t.precision();t.precision(r);e.precision(r);n.precision(r);return c};c.scale=function(r){if(!arguments.length)return t.scale();t.scale(r);e.scale(.35*r);n.scale(r);return c.translate(t.translate())};c.translate=function(r){if(!arguments.length)return t.translate();var a=t.scale(),l=+r[0],f=+r[1];o=t.translate(r).clipExtent([[l-.455*a,f-.238*a],[l+.455*a,f+.238*a]]).stream(i).point;s=e.translate([l-.307*a,f+.201*a]).clipExtent([[l-.425*a+Et,f+.12*a+Et],[l-.214*a-Et,f+.234*a-Et]]).stream(i).point;u=n.translate([l-.205*a,f+.212*a]).clipExtent([[l-.214*a+Et,f+.166*a+Et],[l-.115*a-Et,f+.234*a-Et]]).stream(i).point;return c};return c.scale(1070)};var Lr,Er,kr={point:z,lineStart:z,lineEnd:z,polygonStart:function(){Er=0;kr.lineStart=Vr},polygonEnd:function(){kr.lineStart=kr.lineEnd=kr.point=z;Lr+=S(Er/2)}};function Vr(){var t,e,n,r;kr.point=function(a,o){kr.point=i;t=n=a,e=r=o};function i(t,e){Er+=r*t-n*e;n=t,r=e}kr.lineEnd=function(){i(t,e)}}var Or,Ir,Rr,Gr;var Nr={point:Dr,lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z};function Dr(t,e){if(t<Or)Or=t;if(t>Rr)Rr=t;if(e<Ir)Ir=e;if(e>Gr)Gr=e}function Fr(){var t=zr(4.5),e=[];var n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(e){t=zr(e);return n},result:function(){if(e.length){var t=e.join("");e=[];return t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r);n.point=a}function a(t,n){e.push("L",t,",",n)}function o(){n.point=r}function s(){e.push("Z")}return n}function zr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var jr={point:Xr,lineStart:Br,lineEnd:Hr,polygonStart:function(){jr.lineStart=Yr},polygonEnd:function(){jr.point=Xr;jr.lineStart=Br;jr.lineEnd=Hr}};function Xr(t,e){qn+=t;Qn+=e;++$n}function Br(){var t,e;jr.point=function(r,i){jr.point=n;Xr(t=r,e=i)};function n(n,r){var i=n-t,a=r-e,o=Math.sqrt(i*i+a*a);Zn+=o*(t+n)/2;Kn+=o*(e+r)/2;Jn+=o;Xr(t=n,e=r)}}function Hr(){jr.point=Xr}function Yr(){var t,e,n,r;jr.point=function(a,o){jr.point=i;Xr(t=n=a,e=r=o)};function i(t,e){var i=t-n,a=e-r,o=Math.sqrt(i*i+a*a);Zn+=o*(n+t)/2;Kn+=o*(r+e)/2;Jn+=o;tr+=(o=r*t-n*e)*(n+t);er+=o*(r+e);nr+=3*o;Xr(n=t,r=e)}jr.lineEnd=function(){i(t,e)}}function Ur(t){var e=4.5;var n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(t){e=t;return n},result:z};function r(n,r){t.moveTo(n+e,r);t.arc(n,r,e,0,Ot)}function i(e,r){t.moveTo(e,r);n.point=a}function a(e,n){t.lineTo(e,n)}function o(){n.point=r}function s(){t.closePath()}return n}function Wr(t){var e=.5,n=Math.cos(30*Gt),r=16;function i(t){return(r?o:a)(t)}function a(e){return $r(e,function(n,r){n=t(n,r);e.point(n[0],n[1])})}function o(e){var n,i,a,o,u,c,l,f,h,d,g,p,v;var y={point:m,lineStart:x,lineEnd:w,polygonStart:function(){e.polygonStart();y.lineStart=S},polygonEnd:function(){e.polygonEnd();y.lineStart=x}};function m(n,r){n=t(n,r);e.point(n[0],n[1])}function x(){h=NaN;y.point=_;e.lineStart()}function _(n,i){var a=Dn([n,i]),o=t(n,i);s(h,d,f,g,p,v,h=o[0],d=o[1],f=n,g=a[0],p=a[1],v=a[2],r,e);e.point(h,d)}function w(){y.point=m;e.lineEnd()}function S(){x();y.point=b;y.lineEnd=A}function b(t,e){_(n=t,i=e),a=h,o=d,u=g,c=p,l=v;y.point=_}function A(){s(h,d,f,g,p,v,a,o,n,u,c,l,r,e);y.lineEnd=w;w()}return y}function s(r,i,a,o,u,c,l,f,h,d,g,p,v,y){var m=l-r,x=f-i,_=m*m+x*x;if(_>4*e&&v--){var w=o+d,b=u+g,A=c+p,T=Math.sqrt(w*w+b*b+A*A),M=Math.asin(A/=T),C=S(S(A)-1)<Et||S(a-h)<Et?(a+h)/2:Math.atan2(b,w),P=t(C,M),L=P[0],E=P[1],k=L-r,V=E-i,O=x*k-m*V;if(O*O/_>e||S((m*k+x*V)/_-.5)>.3||o*d+u*g+c*p<n){s(r,i,a,o,u,c,L,E,C,w/=T,b/=T,A,v,y);y.point(L,E);s(L,E,C,w,b,A,l,f,h,d,g,p,v,y)}}}i.precision=function(t){if(!arguments.length)return Math.sqrt(e);r=(e=t*t)>0&&16;return i};return i}a.geo.path=function(){var t=4.5,e,n,r,i,o;function s(e){if(e){if("function"===typeof t)i.pointRadius(+t.apply(this,arguments));if(!o||!o.valid)o=r(i);a.geo.stream(e,o)}return i.result()}s.area=function(t){Lr=0;a.geo.stream(t,r(kr));return Lr};s.centroid=function(t){qn=Qn=$n=Zn=Kn=Jn=tr=er=nr=0;a.geo.stream(t,r(jr));return nr?[tr/nr,er/nr]:Jn?[Zn/Jn,Kn/Jn]:$n?[qn/$n,Qn/$n]:[NaN,NaN]};s.bounds=function(t){Rr=Gr=-(Or=Ir=1/0);a.geo.stream(t,r(Nr));return[[Or,Ir],[Rr,Gr]]};s.projection=function(t){if(!arguments.length)return e;r=(e=t)?t.stream||qr(t):G;return u()};s.context=function(e){if(!arguments.length)return n;i=null==(n=e)?new Fr:new Ur(e);if("function"!==typeof t)i.pointRadius(t);return u()};s.pointRadius=function(e){if(!arguments.length)return t;t="function"===typeof e?e:(i.pointRadius(+e),+e);return s};function u(){o=null;return s}return s.projection(a.geo.albersUsa()).context(null)};function qr(t){var e=Wr(function(e,n){return t([e*Nt,n*Nt])});return function(t){return Jr(e(t))}}a.geo.transform=function(t){return{stream:function(e){var n=new Qr(e);for(var r in t)n[r]=t[r];return n}}};function Qr(t){this.stream=t}Qr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function $r(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}a.geo.projection=Zr;a.geo.projectionMutator=Kr;function Zr(t){return Kr(function(){return t})()}function Kr(t){var e,n,r,i=Wr(function(t,n){return[(t=e(t,n))[0]*o+g,p-t[1]*o]}),o=150,s=480,u=250,c=0,l=0,f=0,h=0,d=0,g,p,v=mr,y=G,m=null,x=null,_;function w(t){return[(t=r(t[0]*Gt,t[1]*Gt))[0]*o+g,p-t[1]*o]}function S(t){return(t=r.invert((t[0]-g)/o,(p-t[1])/o))&&[t[0]*Nt,t[1]*Nt]}w.stream=function(t){if(_)_.valid=false;(_=Jr(v(n,i(y(t))))).valid=true;return _};w.clipAngle=function(t){if(!arguments.length)return m;v=null==t?(m=t,mr):br((m=+t)*Gt);return A()};w.clipExtent=function(t){if(!arguments.length)return x;x=t;y=t?Mr(t[0][0],t[0][1],t[1][0],t[1][1]):G;return A()};w.scale=function(t){if(!arguments.length)return o;o=+t;return b()};w.translate=function(t){if(!arguments.length)return[s,u];s=+t[0];u=+t[1];return b()};w.center=function(t){if(!arguments.length)return[c*Nt,l*Nt];c=t[0]%360*Gt;l=t[1]%360*Gt;return b()};w.rotate=function(t){if(!arguments.length)return[f*Nt,h*Nt,d*Nt];f=t[0]%360*Gt;h=t[1]%360*Gt;d=t.length>2?t[2]%360*Gt:0;return b()};a.rebind(w,i,"precision");function b(){r=cr(n=ni(f,h,d),e);var t=e(c,l);g=s-t[0]*o;p=u+t[1]*o;return A()}function A(){if(_)_.valid=false,_=null;return w}return function(){e=t.apply(this,arguments);w.invert=e.invert&&S;return b()}}function Jr(t){return $r(t,function(e,n){t.point(e*Gt,n*Gt)})}function ti(t,e){return[t,e]}(a.geo.equirectangular=function(){return Zr(ti)}).raw=ti.invert=ti;a.geo.rotation=function(t){t=ni(t[0]%360*Gt,t[1]*Gt,t.length>2?t[2]*Gt:0);function e(e){return(e=t(e[0]*Gt,e[1]*Gt))[0]*=Nt,e[1]*=Nt,e}e.invert=function(e){return(e=t.invert(e[0]*Gt,e[1]*Gt))[0]*=Nt,e[1]*=Nt,e};return e};function ei(t,e){return[t>Vt?t-Ot:t<-Vt?t+Ot:t,e]}ei.invert=ti;function ni(t,e,n){return t?e||n?cr(ii(t),ai(e,n)):ii(t):e||n?ai(e,n):ei}function ri(t){return function(e,n){return[(e+=t)>Vt?e-Ot:e<-Vt?e+Ot:e,n]}}function ii(t){var e=ri(t);e.invert=ri(-t);return e}function ai(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),a=Math.sin(e);function o(t,e){var o=Math.cos(e),s=Math.cos(t)*o,u=Math.sin(t)*o,c=Math.sin(e),l=c*n+s*r;return[Math.atan2(u*i-l*a,s*n-c*r),jt(l*i+u*a)]}o.invert=function(t,e){var o=Math.cos(e),s=Math.cos(t)*o,u=Math.sin(t)*o,c=Math.sin(e),l=c*i-u*a;return[Math.atan2(u*i+c*a,s*n+l*r),jt(l*n-s*r)]};return o}a.geo.circle=function(){var t=[0,0],e,n=6,r;function i(){var e="function"===typeof t?t.apply(this,arguments):t,n=ni(-e[0]*Gt,-e[1]*Gt,0).invert,i=[];r(null,null,1,{point:function(t,e){i.push(t=n(t,e));t[0]*=Nt,t[1]*=Nt}});return{type:"Polygon",coordinates:[i]}}i.origin=function(e){if(!arguments.length)return t;t=e;return i};i.angle=function(t){if(!arguments.length)return e;r=oi((e=+t)*Gt,n*Gt);return i};i.precision=function(t){if(!arguments.length)return n;r=oi(e*Gt,(n=+t)*Gt);return i};return i.angle(90)};function oi(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,a,o,s){var u=o*e;if(null!=i){i=si(n,i);a=si(n,a);if(o>0?i<a:i>a)i+=o*Ot}else{i=t+o*Ot;a=t-.5*u}for(var c,l=i;o>0?l>a:l<a;l-=u)s.point((c=Hn([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],c[1])}}function si(t,e){var n=Dn(e);n[0]-=t;Bn(n);var r=zt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Et)%(2*Math.PI)}a.geo.distance=function(t,e){var n=(e[0]-t[0])*Gt,r=t[1]*Gt,i=e[1]*Gt,a=Math.sin(n),o=Math.cos(n),s=Math.sin(r),u=Math.cos(r),c=Math.sin(i),l=Math.cos(i),f;return Math.atan2(Math.sqrt((f=l*a)*f+(f=u*c-s*l*o)*f),s*c+u*l*o)};a.geo.graticule=function(){var t,e,n,r,i,o,s,u,c=10,l=c,f=90,h=360,d,g,p,v,y=2.5;function m(){return{type:"MultiLineString",coordinates:x()}}function x(){return a.range(Math.ceil(r/f)*f,n,f).map(p).concat(a.range(Math.ceil(u/h)*h,s,h).map(v)).concat(a.range(Math.ceil(e/c)*c,t,c).filter(function(t){return S(t%f)>Et}).map(d)).concat(a.range(Math.ceil(o/l)*l,i,l).filter(function(t){return S(t%h)>Et}).map(g))}m.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})};m.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(v(s).slice(1),p(n).reverse().slice(1),v(u).reverse().slice(1))]}};m.extent=function(t){if(!arguments.length)return m.minorExtent();return m.majorExtent(t).minorExtent(t)};m.majorExtent=function(t){if(!arguments.length)return[[r,u],[n,s]];r=+t[0][0],n=+t[1][0];u=+t[0][1],s=+t[1][1];if(r>n)t=r,r=n,n=t;if(u>s)t=u,u=s,s=t;return m.precision(y)};m.minorExtent=function(n){if(!arguments.length)return[[e,o],[t,i]];e=+n[0][0],t=+n[1][0];o=+n[0][1],i=+n[1][1];if(e>t)n=e,e=t,t=n;if(o>i)n=o,o=i,i=n;return m.precision(y)};m.step=function(t){if(!arguments.length)return m.minorStep();return m.majorStep(t).minorStep(t)};m.majorStep=function(t){if(!arguments.length)return[f,h];f=+t[0],h=+t[1];return m};m.minorStep=function(t){if(!arguments.length)return[c,l];c=+t[0],l=+t[1];return m};m.precision=function(a){if(!arguments.length)return y;y=+a;d=ui(o,i,90);g=ci(e,t,y);p=ui(u,s,90);v=ci(r,n,y);return m};return m.majorExtent([[-180,-90+Et],[180,90-Et]]).minorExtent([[-180,-80-Et],[180,80+Et]])};function ui(t,e,n){var r=a.range(t,e-Et,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function ci(t,e,n){var r=a.range(t,e-Et,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function li(t){return t.source}function fi(t){return t.target}a.geo.greatArc=function(){var t=li,e,n=fi,r;function i(){return{type:"LineString",coordinates:[e||t.apply(this,arguments),r||n.apply(this,arguments)]}}i.distance=function(){return a.geo.distance(e||t.apply(this,arguments),r||n.apply(this,arguments))};i.source=function(n){if(!arguments.length)return t;t=n,e="function"===typeof n?null:n;return i};i.target=function(t){if(!arguments.length)return n;n=t,r="function"===typeof t?null:t;return i};i.precision=function(){return arguments.length?i:0};return i};a.geo.interpolate=function(t,e){return hi(t[0]*Gt,t[1]*Gt,e[0]*Gt,e[1]*Gt)};function hi(t,e,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(r),s=Math.sin(r),u=i*Math.cos(t),c=i*Math.sin(t),l=o*Math.cos(n),f=o*Math.sin(n),h=2*Math.asin(Math.sqrt(Yt(r-e)+i*o*Yt(n-t))),d=1/Math.sin(h);var g=h?function(t){var e=Math.sin(t*=h)*d,n=Math.sin(h-t)*d,r=n*u+e*l,i=n*c+e*f,o=n*a+e*s;return[Math.atan2(i,r)*Nt,Math.atan2(o,Math.sqrt(r*r+i*i))*Nt]}:function(){return[t*Nt,e*Nt]};g.distance=h;return g}a.geo.length=function(t){di=0;a.geo.stream(t,gi);return di};var di;var gi={sphere:z,point:z,lineStart:pi,lineEnd:z,polygonStart:z,polygonEnd:z};function pi(){var t,e,n;gi.point=function(i,a){t=i*Gt,e=Math.sin(a*=Gt),n=Math.cos(a);gi.point=r};gi.lineEnd=function(){gi.point=gi.lineEnd=z};function r(r,i){var a=Math.sin(i*=Gt),o=Math.cos(i),s=S((r*=Gt)-t),u=Math.cos(s);di+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-e*o*u)*s),e*a+n*o*u);t=r,e=a,n=o}}function vi(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),a=t(r*i);return[a*i*Math.sin(e),a*Math.sin(n)]}n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,r*o),Math.asin(r&&n*a/r)]};return n}var yi=vi(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(a.geo.azimuthalEqualArea=function(){return Zr(yi)}).raw=yi;var mi=vi(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},G);(a.geo.azimuthalEquidistant=function(){return Zr(mi)}).raw=mi;function xi(t,e){var n=Math.cos(t),r=function(t){return Math.tan(Vt/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),a=n*Math.pow(r(t),i)/i;if(!i)return Si;function o(t,e){if(a>0){if(e<-Rt+Et)e=-Rt+Et}else if(e>Rt-Et)e=Rt-Et;var n=a/Math.pow(r(e),i);return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}o.invert=function(t,e){var n=a-e,r=Dt(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(a/r,1/i))-Rt]};return o}(a.geo.conicConformal=function(){return Cr(xi)}).raw=xi;function _i(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(S(r)<Et)return ti;function a(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}a.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-Dt(r)*Math.sqrt(t*t+n*n)]};return a}(a.geo.conicEquidistant=function(){return Cr(_i)}).raw=_i;var wi=vi(function(t){return 1/t},Math.atan);(a.geo.gnomonic=function(){return Zr(wi)}).raw=wi;function Si(t,e){return[t,Math.log(Math.tan(Vt/4+e/2))]}Si.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Rt]};function bi(t){var e=Zr(t),n=e.scale,r=e.translate,i=e.clipExtent,a;e.scale=function(){var t=n.apply(e,arguments);return t===e?a?e.clipExtent(null):e:t};e.translate=function(){var t=r.apply(e,arguments);return t===e?a?e.clipExtent(null):e:t};e.clipExtent=function(t){var o=i.apply(e,arguments);if(o===e){if(a=null==t){var s=Vt*n(),u=r();i([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else if(a)o=null;return o};return e.clipExtent(null)}(a.geo.mercator=function(){return bi(Si)}).raw=Si;var Ai=vi(function(){return 1},Math.asin);(a.geo.orthographic=function(){return Zr(Ai)}).raw=Ai;var Ti=vi(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(a.geo.stereographic=function(){return Zr(Ti)}).raw=Ti;function Mi(t,e){return[Math.log(Math.tan(Vt/4+e/2)),-t]}Mi.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Rt]};(a.geo.transverseMercator=function(){var t=bi(Mi),e=t.center,n=t.rotate;t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]};t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]};return n([0,0,90])}).raw=Mi;a.geom={};function Ci(t){return t[0]}function Pi(t){return t[1]}a.geom.hull=function(t){var e=Ci,n=Pi;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r=Ce(e),i=Ce(n),a,o=t.length,s=[],u=[];for(a=0;a<o;a++)s.push([+r.call(this,t[a],a),+i.call(this,t[a],a),a]);s.sort(Ei);for(a=0;a<o;a++)u.push([s[a][0],-s[a][1]]);var c=Li(s),l=Li(u);var f=l[0]===c[0],h=l[l.length-1]===c[c.length-1],d=[];for(a=c.length-1;a>=0;--a)d.push(t[s[c[a]][2]]);for(a=+f;a<l.length-h;++a)d.push(t[s[l[a]][2]]);return d}r.x=function(t){return arguments.length?(e=t,r):e};r.y=function(t){return arguments.length?(n=t,r):n};return r};function Li(t){var e=t.length,n=[0,1],r=2;for(var i=2;i<e;i++){for(;r>1&&Ft(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Ei(t,e){return t[0]-e[0]||t[1]-e[1]}a.geom.polygon=function(t){W(t,ki);return t};var ki=a.geom.polygon.prototype=[];ki.area=function(){var t=-1,e=this.length,n,r=this[e-1],i=0;for(;++t<e;){n=r;r=this[t];i+=n[1]*r[0]-n[0]*r[1]}return.5*i};ki.centroid=function(t){var e=-1,n=this.length,r=0,i=0,a,o=this[n-1],s;if(!arguments.length)t=-1/(6*this.area());for(;++e<n;){a=o;o=this[e];s=a[0]*o[1]-o[0]*a[1];r+=(a[0]+o[0])*s;i+=(a[1]+o[1])*s}return[r*t,i*t]};ki.clip=function(t){var e,n=Ii(t),r=-1,i=this.length-Ii(this),a,o,s=this[i-1],u,c,l;for(;++r<i;){e=t.slice();t.length=0;u=this[r];c=e[(o=e.length-n)-1];a=-1;for(;++a<o;){if(Vi(l=e[a],s,u)){if(!Vi(c,s,u))t.push(Oi(c,l,s,u));t.push(l)}else if(Vi(c,s,u))t.push(Oi(c,l,s,u));c=l}if(n)t.push(t[0]);s=u}return t};function Vi(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Oi(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,u=t[1],c=n[1],l=e[1]-u,f=r[1]-c,h=(s*(u-c)-f*(i-a))/(f*o-s*l);return[i+h*o,u+h*l]}function Ii(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}var Ri,Gi,Ni,Di=[],Fi,zi,ji=[];function Xi(){ca(this);this.edge=this.site=this.circle=null}function Bi(t){var e=Di.pop()||new Xi;e.site=t;return e}function Hi(t){ta(t);Ni.remove(t);Di.push(t);ca(t)}function Yi(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,s=[t];Hi(t);var u=a;for(;u.circle&&S(n-u.circle.x)<Et&&S(r-u.circle.cy)<Et;){a=u.P;s.unshift(u);Hi(u);u=a}s.unshift(u);ta(u);var c=o;for(;c.circle&&S(n-c.circle.x)<Et&&S(r-c.circle.cy)<Et;){o=c.N;s.push(c);Hi(c);c=o}s.push(c);ta(c);var l=s.length,f;for(f=1;f<l;++f){c=s[f];u=s[f-1];oa(c.edge,u.site,c.site,i)}u=s[0];(c=s[l-1]).edge=ia(u.site,c.site,null,i);Ji(u);Ji(c)}function Ui(t){var e=t.x,n=t.y,r,i,a,o,s=Ni._;for(;s;)if((a=Wi(s,n)-e)>Et)s=s.L;else if((o=e-qi(s,n))>Et){if(!s.R){r=s;break}s=s.R}else{if(a>-Et){r=s.P;i=s}else if(o>-Et){r=s;i=s.N}else r=i=s;break}var u=Bi(t);Ni.insert(r,u);if(!r&&!i)return;if(r===i){ta(r);i=Bi(r.site);Ni.insert(u,i);u.edge=i.edge=ia(r.site,u.site);Ji(r);Ji(i);return}if(!i){u.edge=ia(r.site,u.site);return}ta(r);ta(i);var c=r.site,l=c.x,f=c.y,h=t.x-l,d=t.y-f,g=i.site,p=g.x-l,v=g.y-f,y=2*(h*v-d*p),m=h*h+d*d,x=p*p+v*v,_={x:(v*m-d*x)/y+l,y:(h*x-p*m)/y+f};oa(i.edge,c,g,_);u.edge=ia(c,t,null,_);i.edge=ia(t,g,null,_);Ji(r);Ji(i)}function Wi(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site).x,u=n.y,c=u-e;if(!c)return s;var l=s-r,f=1/a-1/c,h=l/c;if(f)return(-h+Math.sqrt(h*h-2*f*(l*l/(-2*c)-u+c/2+i-a/2)))/f+r;return(r+s)/2}function qi(t,e){var n=t.N;if(n)return Wi(n,e);var r=t.site;return r.y===e?r.x:1/0}function Qi(t){this.site=t;this.edges=[]}Qi.prototype.prepare=function(){var t=this.edges,e=t.length,n;for(;e--;)if(!(n=t[e].edge).b||!n.a)t.splice(e,1);t.sort(Zi);return t.length};function $i(t){var e=t[0][0],n=t[1][0],r=t[0][1],i=t[1][1],a,o,s,u,c=Gi,l=c.length,f,h,d,g,p,v;for(;l--;){if(!(f=c[l])||!f.prepare())continue;g=(d=f.edges).length;h=0;for(;h<g;){s=(v=d[h].end()).x,u=v.y;a=(p=d[++h%g].start()).x,o=p.y;if(S(s-a)>Et||S(u-o)>Et){d.splice(h,0,new sa(aa(f.site,v,S(s-e)<Et&&i-u>Et?{x:e,y:S(a-e)<Et?o:i}:S(u-i)<Et&&n-s>Et?{x:S(o-i)<Et?a:n,y:i}:S(s-n)<Et&&u-r>Et?{x:n,y:S(a-n)<Et?o:r}:S(u-r)<Et&&s-e>Et?{x:S(o-r)<Et?a:e,y:r}:null),f.site,null));++g}}}}function Zi(t,e){return e.angle-t.angle}function Ki(){ca(this);this.x=this.y=this.arc=this.site=this.cy=null}function Ji(t){var e=t.P,n=t.N;if(!e||!n)return;var r=e.site,i=t.site,a=n.site;if(r===a)return;var o=i.x,s=i.y,u=r.x-o,c=r.y-s,l=a.x-o,f;var h=2*(u*(f=a.y-s)-c*l);if(h>=-kt)return;var d=u*u+c*c,g=l*l+f*f,p=(f*d-c*g)/h,v=(u*g-l*d)/h,f=v+s;var y=ji.pop()||new Ki;y.arc=t;y.site=i;y.x=p+o;y.y=f+Math.sqrt(p*p+v*v);y.cy=f;t.circle=y;var m=null,x=zi._;for(;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x)if(x.L)x=x.L;else{m=x.P;break}else if(x.R)x=x.R;else{m=x;break}zi.insert(m,y);if(!m)Fi=y}function ta(t){var e=t.circle;if(e){if(!e.P)Fi=e.N;zi.remove(e);ji.push(e);ca(e);t.circle=null}}function ea(t){var e=Ri,n=Ar(t[0][0],t[0][1],t[1][0],t[1][1]),r=e.length,i;for(;r--;)if(!na(i=e[r],t)||!n(i)||S(i.a.x-i.b.x)<Et&&S(i.a.y-i.b.y)<Et){i.a=i.b=null;e.splice(r,1)}}function na(t,e){var n=t.b;if(n)return true;var r=t.a,i=e[0][0],a=e[1][0],o=e[0][1],s=e[1][1],u=t.l,c=t.r,l=u.x,f=u.y,h=c.x,d=c.y,g=(l+h)/2,p=(f+d)/2,v,y;if(d===f){if(g<i||g>=a)return;if(l>h){if(!r)r={x:g,y:o};else if(r.y>=s)return;n={x:g,y:s}}else{if(!r)r={x:g,y:s};else if(r.y<o)return;n={x:g,y:o}}}else{y=p-(v=(l-h)/(d-f))*g;if(v<-1||v>1)if(l>h){if(!r)r={x:(o-y)/v,y:o};else if(r.y>=s)return;n={x:(s-y)/v,y:s}}else{if(!r)r={x:(s-y)/v,y:s};else if(r.y<o)return;n={x:(o-y)/v,y:o}}else if(f<d){if(!r)r={x:i,y:v*i+y};else if(r.x>=a)return;n={x:a,y:v*a+y}}else{if(!r)r={x:a,y:v*a+y};else if(r.x<i)return;n={x:i,y:v*i+y}}}t.a=r;t.b=n;return true}function ra(t,e){this.l=t;this.r=e;this.a=this.b=null}function ia(t,e,n,r){var i=new ra(t,e);Ri.push(i);if(n)oa(i,t,e,n);if(r)oa(i,e,t,r);Gi[t.i].edges.push(new sa(i,t,e));Gi[e.i].edges.push(new sa(i,e,t));return i}function aa(t,e,n){var r=new ra(t,null);r.a=e;r.b=n;Ri.push(r);return r}function oa(t,e,n,r){if(!t.a&&!t.b){t.a=r;t.l=e;t.r=n}else if(t.l===n)t.b=r;else t.a=r}function sa(t,e,n){var r=t.a,i=t.b;this.edge=t;this.site=e;this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}sa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ua(){this._=null}function ca(t){t.U=t.C=t.L=t.R=t.P=t.N=null}ua.prototype={insert:function(t,e){var n,r,i;if(t){e.P=t;e.N=t.N;if(t.N)t.N.P=e;t.N=e;if(t.R){t=t.R;for(;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else if(this._){t=ha(this._);e.P=null;e.N=t;t.P=t.L=e;n=t}else{e.P=e.N=null;this._=e;n=null}e.L=e.R=null;e.U=n;e.C=true;t=e;for(;n&&n.C;){if(n===(r=n.U).L)if((i=r.R)&&i.C){n.C=i.C=false;r.C=true;t=r}else{if(t===n.R){la(this,n);n=(t=n).U}n.C=false;r.C=true;fa(this,r)}else if((i=r.L)&&i.C){n.C=i.C=false;r.C=true;t=r}else{if(t===n.L){fa(this,n);n=(t=n).U}n.C=false;r.C=true;la(this,r)}n=t.U}this._.C=false},remove:function(t){if(t.N)t.N.P=t.P;if(t.P)t.P.N=t.N;t.N=t.P=null;var e=t.U,n,r=t.L,i=t.R,a,o;if(!r)a=i;else if(!i)a=r;else a=ha(i);if(e)if(e.L===t)e.L=a;else e.R=a;else this._=a;if(r&&i){o=a.C;a.C=t.C;a.L=r;r.U=a;if(a!==i){e=a.U;a.U=t.U;t=a.R;e.L=t;a.R=i;i.U=a}else{a.U=e;e=a;t=a.R}}else{o=t.C;t=a}if(t)t.U=e;if(o)return;if(t&&t.C){t.C=false;return}do{if(t===this._)break;if(t===e.L){if((n=e.R).C){n.C=false;e.C=true;la(this,e);n=e.R}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C){n.L.C=false;n.C=true;fa(this,n);n=e.R}n.C=e.C;e.C=n.R.C=false;la(this,e);t=this._;break}}else{if((n=e.L).C){n.C=false;e.C=true;fa(this,e);n=e.L}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C){n.R.C=false;n.C=true;la(this,n);n=e.L}n.C=e.C;e.C=n.L.C=false;fa(this,e);t=this._;break}}n.C=true;t=e;e=e.U}while(!t.C);if(t)t.C=false}};function la(t,e){var n=e,r=e.R,i=n.U;if(i)if(i.L===n)i.L=r;else i.R=r;else t._=r;r.U=i;n.U=r;n.R=r.L;if(n.R)n.R.U=n;r.L=n}function fa(t,e){var n=e,r=e.L,i=n.U;if(i)if(i.L===n)i.L=r;else i.R=r;else t._=r;r.U=i;n.U=r;n.L=r.R;if(n.L)n.L.U=n;r.R=n}function ha(t){for(;t.L;)t=t.L;return t}function da(t,e){var n=t.sort(ga).pop(),r,i,a;Ri=[];Gi=new Array(t.length);Ni=new ua;zi=new ua;for(;;){a=Fi;if(n&&(!a||n.y<a.y||n.y===a.y&&n.x<a.x)){if(n.x!==r||n.y!==i){Gi[n.i]=new Qi(n);Ui(n);r=n.x,i=n.y}n=t.pop()}else if(a)Yi(a.arc);else break}if(e)ea(e),$i(e);var o={cells:Gi,edges:Ri};Ni=zi=Ri=Gi=null;return o}function ga(t,e){return e.y-t.y||e.x-t.x}a.geom.voronoi=function(t){var e=Ci,n=Pi,r=e,i=n,a=pa;if(t)return o(t);function o(t){var e=new Array(t.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];da(s(t),a).cells.forEach(function(a,s){var u=a.edges,c=a.site,l;(e[s]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):c.x>=n&&c.x<=i&&c.y>=r&&c.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[]).point=t[s]});return e}function s(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/Et)*Et,y:Math.round(i(t,e)/Et)*Et,i:e}})}o.links=function(t){return da(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})};o.triangles=function(t){var e=[];da(s(t)).cells.forEach(function(n,r){var i=n.site,a=n.edges.sort(Zi),o=-1,s=a.length,u,c,l=a[s-1].edge,f=l.l===i?l.r:l.l;for(;++o<s;){u=l;c=f;f=(l=a[o].edge).l===i?l.r:l.l;if(r<c.i&&r<f.i&&va(i,c,f)<0)e.push([t[r],t[c.i],t[f.i]])}});return e};o.x=function(t){return arguments.length?(r=Ce(e=t),o):e};o.y=function(t){return arguments.length?(i=Ce(n=t),o):n};o.clipExtent=function(t){if(!arguments.length)return a===pa?null:a;a=null==t?pa:t;return o};o.size=function(t){if(!arguments.length)return a===pa?null:a&&a[1];return o.clipExtent(t&&[[0,0],t])};return o};var pa=[[-1e6,-1e6],[1e6,1e6]];function va(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}a.geom.delaunay=function(t){return a.geom.voronoi().triangles(t)};a.geom.quadtree=function(t,e,n,r,i){var a=Ci,o=Pi,s;if(s=arguments.length){a=ya;o=ma;if(3===s){i=n;r=e;n=e=0}return u(t)}function u(t){var u,c=Ce(a),l=Ce(o),f,h,d,g,p,v,y,m;if(null!=e)p=e,v=n,y=r,m=i;else{y=m=-(p=v=1/0);f=[],h=[];g=t.length;if(s)for(d=0;d<g;++d){if((u=t[d]).x<p)p=u.x;if(u.y<v)v=u.y;if(u.x>y)y=u.x;if(u.y>m)m=u.y;f.push(u.x);h.push(u.y)}else for(d=0;d<g;++d){var x=+c(u=t[d],d),_=+l(u,d);if(x<p)p=x;if(_<v)v=_;if(x>y)y=x;if(_>m)m=_;f.push(x);h.push(_)}}var w=y-p,b=m-v;if(w>b)m=v+w;else y=p+b;function A(t,e,n,r,i,a,o,s){if(isNaN(n)||isNaN(r))return;if(t.leaf){var u=t.x,c=t.y;if(null!=u)if(S(u-n)+S(c-r)<.01)T(t,e,n,r,i,a,o,s);else{var l=t.point;t.x=t.y=t.point=null;T(t,l,u,c,i,a,o,s);T(t,e,n,r,i,a,o,s)}else t.x=n,t.y=r,t.point=e}else T(t,e,n,r,i,a,o,s)}function T(t,e,n,r,i,a,o,s){var u=.5*(i+o),c=.5*(a+s),l=n>=u,f=r>=c,h=f<<1|l;t.leaf=false;if(l)i=u;else o=u;if(f)a=c;else s=c;A(t=t.nodes[h]||(t.nodes[h]={leaf:true,nodes:[],point:null,x:null,y:null}),e,n,r,i,a,o,s)}var M={leaf:true,nodes:[],point:null,x:null,y:null};M.add=function(t){A(M,t,+c(t,++d),+l(t,d),p,v,y,m)};M.visit=function(t){_a(t,M,p,v,y,m)};M.find=function(t){return wa(M,t[0],t[1],p,v,y,m)};d=-1;if(null==e){for(;++d<g;)A(M,t[d],f[d],h[d],p,v,y,m);--d}else t.forEach(M.add);f=h=t=u=null;return M}u.x=function(t){return arguments.length?(a=t,u):a};u.y=function(t){return arguments.length?(o=t,u):o};u.extent=function(t){if(!arguments.length)return null==e?null:[[e,n],[r,i]];if(null==t)e=n=r=i=null;else e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1];return u};u.size=function(t){if(!arguments.length)return null==e?null:[r-e,i-n];if(null==t)e=n=r=i=null;else e=n=0,r=+t[0],i=+t[1];return u};return u};function ya(t){return t.x}function ma(t){return t.y}function xa(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function _a(t,e,n,r,i,a){if(!t(e,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),u=e.nodes;if(u[0])_a(t,u[0],n,r,o,s);if(u[1])_a(t,u[1],o,r,i,s);if(u[2])_a(t,u[2],n,s,o,a);if(u[3])_a(t,u[3],o,s,i,a)}}function wa(t,e,n,r,i,a,o){var s=1/0,u;!function t(c,l,f,h,d){if(l>a||f>o||h<r||d<i)return;if(g=c.point){var g,p=e-c.x,v=n-c.y,y=p*p+v*v;if(y<s){var m=Math.sqrt(s=y);r=e-m,i=n-m;a=e+m,o=n+m;u=g}}var x=c.nodes,_=.5*(l+h),w=.5*(f+d),S,b;for(var A=(n>=w)<<1|e>=_,T=A+4;A<T;++A)if(c=x[3&A])switch(3&A){case 0:t(c,l,f,_,w);break;case 1:t(c,_,f,h,w);break;case 2:t(c,l,w,_,d);break;case 3:t(c,_,w,h,d);break}}(t,r,i,a,o);return u}a.interpolateRgb=Sa;function Sa(t,e){t=a.rgb(t);e=a.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,s=e.g-r,u=e.b-i;return function(t){return"#"+_e(Math.round(n+o*t))+_e(Math.round(r+s*t))+_e(Math.round(i+u*t))}}a.interpolateObject=ba;function ba(t,e){var n={},r={},i;for(i in t)if(i in e)n[i]=Pa(t[i],e[i]);else r[i]=t[i];for(i in e)if(!(i in t))r[i]=e[i];return function(t){for(i in n)r[i]=n[i](t);return r}}a.interpolateNumber=Aa;function Aa(t,e){t=+t,e=+e;return function(n){return t*(1-n)+e*n}}a.interpolateString=Ta;function Ta(t,e){var n=Ma.lastIndex=Ca.lastIndex=0,r,i,a,o=-1,s=[],u=[];t+="",e+="";for(;(r=Ma.exec(t))&&(i=Ca.exec(e));){if((a=i.index)>n){a=e.slice(n,a);if(s[o])s[o]+=a;else s[++o]=a}if((r=r[0])===(i=i[0]))if(s[o])s[o]+=i;else s[++o]=i;else{s[++o]=null;u.push({i:o,x:Aa(r,i)})}n=Ca.lastIndex}if(n<e.length){a=e.slice(n);if(s[o])s[o]+=a;else s[++o]=a}return s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n=0,r;n<e;++n)s[(r=u[n]).i]=r.x(t);return s.join("")})}var Ma=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ca=new RegExp(Ma.source,"g");a.interpolate=Pa;function Pa(t,e){var n=a.interpolators.length,r;for(;--n>=0&&!(r=a.interpolators[n](t,e)););return r}a.interpolators=[function(t,e){var n=typeof e;return("string"===n?Me.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Sa:Ta:e instanceof Kt?Sa:Array.isArray(e)?La:"object"===n&&isNaN(e)?ba:Aa)(t,e)}];a.interpolateArray=La;function La(t,e){var n=[],r=[],i=t.length,a=e.length,o=Math.min(t.length,e.length),s;for(s=0;s<o;++s)n.push(Pa(t[s],e[s]));for(;s<i;++s)r[s]=t[s];for(;s<a;++s)r[s]=e[s];return function(t){for(s=0;s<o;++s)r[s]=n[s](t);return r}}var Ea=function(){return G};var ka=a.map({linear:Ea,poly:Fa,quad:function(){return Ga},cubic:function(){return Na},sin:function(){return za},exp:function(){return ja},circle:function(){return Xa},elastic:Ba,back:Ha,bounce:function(){return Ya}});var Va=a.map({in:G,out:Ia,"in-out":Ra,"out-in":function(t){return Ra(Ia(t))}});a.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";n=ka.get(n)||Ea;return Oa((r=Va.get(r)||G)(n.apply(null,o.call(arguments,1))))};function Oa(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function Ia(t){return function(e){return 1-t(1-e)}}function Ra(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Ga(t){return t*t}function Na(t){return t*t*t}function Da(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Fa(t){return function(e){return Math.pow(e,t)}}function za(t){return 1-Math.cos(t*Rt)}function ja(t){return Math.pow(2,10*(t-1))}function Xa(t){return 1-Math.sqrt(1-t*t)}function Ba(t,e){var n;if(arguments.length<2)e=.45;if(arguments.length)n=e/Ot*Math.asin(1/t);else t=1,n=e/4;return function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Ot/e)}}function Ha(t){if(!t)t=1.70158;return function(e){return e*e*((t+1)*e-t)}}function Ya(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}a.interpolateHcl=Ua;function Ua(t,e){t=a.hcl(t);e=a.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,s=e.c-r,u=e.l-i;if(isNaN(s))s=0,r=isNaN(r)?e.c:r;if(isNaN(o))o=0,n=isNaN(n)?e.h:n;else if(o>180)o-=360;else if(o<-180)o+=360;return function(t){return ie(n+o*t,r+s*t,i+u*t)+""}}a.interpolateHsl=Wa;function Wa(t,e){t=a.hsl(t);e=a.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,s=e.s-r,u=e.l-i;if(isNaN(s))s=0,r=isNaN(r)?e.s:r;if(isNaN(o))o=0,n=isNaN(n)?e.h:n;else if(o>180)o-=360;else if(o<-180)o+=360;return function(t){return ee(n+o*t,r+s*t,i+u*t)+""}}a.interpolateLab=qa;function qa(t,e){t=a.lab(t);e=a.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,s=e.a-r,u=e.b-i;return function(t){return fe(n+o*t,r+s*t,i+u*t)+""}}a.interpolateRound=Qa;function Qa(t,e){e-=t;return function(n){return Math.round(t+e*n)}}a.transform=function(t){var e=u.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new $a(n?n.matrix:to)})(t)};function $a(t){var e=[t.a,t.b],n=[t.c,t.d],r=Ka(e),i=Za(e,n),a=Ka(Ja(n,e,-i))||0;if(e[0]*n[1]<n[0]*e[1]){e[0]*=-1;e[1]*=-1;r*=-1;i*=-1}this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Nt;this.translate=[t.e,t.f];this.scale=[r,a];this.skew=a?Math.atan2(i,a)*Nt:0}$a.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Za(t,e){return t[0]*e[0]+t[1]*e[1]}function Ka(t){var e=Math.sqrt(Za(t,t));if(e){t[0]/=e;t[1]/=e}return e}function Ja(t,e,n){t[0]+=n*e[0];t[1]+=n*e[1];return t}var to={a:1,b:0,c:0,d:1,e:0,f:0};a.interpolateTransform=oo;function eo(t){return t.length?t.pop()+",":""}function no(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Aa(t[0],e[0])},{i:i-2,x:Aa(t[1],e[1])})}else if(e[0]||e[1])n.push("translate("+e+")")}function ro(t,e,n,r){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;r.push({i:n.push(eo(n)+"rotate(",null,")")-2,x:Aa(t,e)})}else if(e)n.push(eo(n)+"rotate("+e+")")}function io(t,e,n,r){if(t!==e)r.push({i:n.push(eo(n)+"skewX(",null,")")-2,x:Aa(t,e)});else if(e)n.push(eo(n)+"skewX("+e+")")}function ao(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(eo(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Aa(t[0],e[0])},{i:i-2,x:Aa(t[1],e[1])})}else if(1!==e[0]||1!==e[1])n.push(eo(n)+"scale("+e+")")}function oo(t,e){var n=[],r=[];t=a.transform(t),e=a.transform(e);no(t.translate,e.translate,n,r);ro(t.rotate,e.rotate,n,r);io(t.skew,e.skew,n,r);ao(t.scale,e.scale,n,r);t=e=null;return function(t){var e=-1,i=r.length,a;for(;++e<i;)n[(a=r[e]).i]=a.x(t);return n.join("")}}function so(t,e){e=(e-=t=+t)||1/e;return function(n){return(n-t)/e}}function uo(t,e){e=(e-=t=+t)||1/e;return function(n){return Math.max(0,Math.min(1,(n-t)/e))}}a.layout={};a.layout.bundle=function(){return function(t){var e=[],n=-1,r=t.length;for(;++n<r;)e.push(co(t[n]));return e}};function co(t){var e=t.source,n=t.target,r=fo(e,n),i=[e];for(;e!==r;){e=e.parent;i.push(e)}var a=i.length;for(;n!==r;){i.splice(a,0,n);n=n.parent}return i}function lo(t){var e=[],n=t.parent;for(;null!=n;){e.push(t);t=n;n=n.parent}e.push(t);return e}function fo(t,e){if(t===e)return t;var n=lo(t),r=lo(e),i=n.pop(),a=r.pop(),o=null;for(;i===a;){o=i;i=n.pop();a=r.pop()}return o}a.layout.chord=function(){var t={},e,n,r,i,o=0,s,u,c;function l(){var t={},l=[],h=a.range(i),d=[],g,p,v,y,m;e=[];n=[];g=0,y=-1;for(;++y<i;){p=0,m=-1;for(;++m<i;)p+=r[y][m];l.push(p);d.push(a.range(i));g+=p}if(s)h.sort(function(t,e){return s(l[t],l[e])});if(u)d.forEach(function(t,e){t.sort(function(t,n){return u(r[e][t],r[e][n])})});g=(Ot-o*i)/g;p=0,y=-1;for(;++y<i;){v=p,m=-1;for(;++m<i;){var x=h[y],_=d[x][m],w=r[x][_],S=p,b=p+=w*g;t[x+"-"+_]={index:x,subindex:_,startAngle:S,endAngle:b,value:w}}n[x]={index:x,startAngle:v,endAngle:p,value:l[x]};p+=o}y=-1;for(;++y<i;){m=y-1;for(;++m<i;){var A=t[y+"-"+m],T=t[m+"-"+y];if(A.value||T.value)e.push(A.value<T.value?{source:T,target:A}:{source:A,target:T})}}if(c)f()}function f(){e.sort(function(t,e){return c((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}t.matrix=function(a){if(!arguments.length)return r;i=(r=a)&&r.length;e=n=null;return t};t.padding=function(r){if(!arguments.length)return o;o=r;e=n=null;return t};t.sortGroups=function(r){if(!arguments.length)return s;s=r;e=n=null;return t};t.sortSubgroups=function(n){if(!arguments.length)return u;u=n;e=null;return t};t.sortChords=function(n){if(!arguments.length)return c;c=n;if(e)f();return t};t.chords=function(){if(!e)l();return e};t.groups=function(){if(!n)l();return n};return t};a.layout.force=function(){var t={},e=a.dispatch("start","tick","end"),n,r=[1,1],i,o,s=.9,u=mo,c=xo,l=-30,f=_o,h=.1,d=.64,g=[],p=[],v,y,m;function x(t){return function(e,n,r,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=i-n,u=a*a+o*o;if(s*s/d<u){if(u<f){var c=e.charge/u;t.px-=a*c;t.py-=o*c}return true}if(e.point&&u&&u<f){var c=e.pointCharge/u;t.px-=a*c;t.py-=o*c}}return!e.charge}}t.tick=function(){if((o*=.99)<.005){n=null;e.end({type:"end",alpha:o=0});return true}var t=g.length,i=p.length,u,c,f,d,_,w,S,b,A;for(c=0;c<i;++c){d=(f=p[c]).source;if(w=(b=(_=f.target).x-d.x)*b+(A=_.y-d.y)*A){b*=w=o*y[c]*((w=Math.sqrt(w))-v[c])/w;A*=w;_.x-=b*(S=d.weight+_.weight?d.weight/(d.weight+_.weight):.5);_.y-=A*S;d.x+=b*(S=1-S);d.y+=A*S}}if(S=o*h){b=r[0]/2;A=r[1]/2;c=-1;if(S)for(;++c<t;){(f=g[c]).x+=(b-f.x)*S;f.y+=(A-f.y)*S}}if(l){yo(u=a.geom.quadtree(g),o,m);c=-1;for(;++c<t;)if(!(f=g[c]).fixed)u.visit(x(f))}c=-1;for(;++c<t;)if((f=g[c]).fixed){f.x=f.px;f.y=f.py}else{f.x-=(f.px-(f.px=f.x))*s;f.y-=(f.py-(f.py=f.y))*s}e.tick({type:"tick",alpha:o})};t.nodes=function(e){if(!arguments.length)return g;g=e;return t};t.links=function(e){if(!arguments.length)return p;p=e;return t};t.size=function(e){if(!arguments.length)return r;r=e;return t};t.linkDistance=function(e){if(!arguments.length)return u;u="function"===typeof e?e:+e;return t};t.distance=t.linkDistance;t.linkStrength=function(e){if(!arguments.length)return c;c="function"===typeof e?e:+e;return t};t.friction=function(e){if(!arguments.length)return s;s=+e;return t};t.charge=function(e){if(!arguments.length)return l;l="function"===typeof e?e:+e;return t};t.chargeDistance=function(e){if(!arguments.length)return Math.sqrt(f);f=e*e;return t};t.gravity=function(e){if(!arguments.length)return h;h=+e;return t};t.theta=function(e){if(!arguments.length)return Math.sqrt(d);d=e*e;return t};t.alpha=function(r){if(!arguments.length)return o;r=+r;if(o)if(r>0)o=r;else{n.c=null,n.t=NaN,n=null;e.end({type:"end",alpha:o=0})}else if(r>0){e.start({type:"start",alpha:o=r});n=Ne(t.tick)}return t};t.start=function(){var e,n=g.length,i=p.length,a=r[0],o=r[1],s,f;for(e=0;e<n;++e){(f=g[e]).index=e;f.weight=0}for(e=0;e<i;++e){if("number"==typeof(f=p[e]).source)f.source=g[f.source];if("number"==typeof f.target)f.target=g[f.target];++f.source.weight;++f.target.weight}for(e=0;e<n;++e){f=g[e];if(isNaN(f.x))f.x=h("x",a);if(isNaN(f.y))f.y=h("y",o);if(isNaN(f.px))f.px=f.x;if(isNaN(f.py))f.py=f.y}v=[];if("function"===typeof u)for(e=0;e<i;++e)v[e]=+u.call(this,p[e],e);else for(e=0;e<i;++e)v[e]=u;y=[];if("function"===typeof c)for(e=0;e<i;++e)y[e]=+c.call(this,p[e],e);else for(e=0;e<i;++e)y[e]=c;m=[];if("function"===typeof l)for(e=0;e<n;++e)m[e]=+l.call(this,g[e],e);else for(e=0;e<n;++e)m[e]=l;function h(t,r){if(!s){s=new Array(n);for(u=0;u<n;++u)s[u]=[];for(u=0;u<i;++u){var a=p[u];s[a.source.index].push(a.target);s[a.target.index].push(a.source)}}var o=s[e],u=-1,c=o.length,l;for(;++u<c;)if(!isNaN(l=o[u][t]))return l;return Math.random()*r}return t.resume()};t.resume=function(){return t.alpha(.1)};t.stop=function(){return t.alpha(0)};t.drag=function(){if(!i)i=a.behavior.drag().origin(G).on("dragstart.force",ho).on("drag.force",_).on("dragend.force",go);if(!arguments.length)return i;this.on("mouseover.force",po).on("mouseout.force",vo).call(i)};function _(e){e.px=a.event.x,e.py=a.event.y;t.resume()}return a.rebind(t,e,"on")};function ho(t){t.fixed|=2}function go(t){t.fixed&=-7}function po(t){t.fixed|=4;t.px=t.x,t.py=t.y}function vo(t){t.fixed&=-5}function yo(t,e,n){var r=0,i=0;t.charge=0;if(!t.leaf){var a=t.nodes,o=a.length,s=-1,u;for(;++s<o;){if(null==(u=a[s]))continue;yo(u,e,n);t.charge+=u.charge;r+=u.charge*u.cx;i+=u.charge*u.cy}}if(t.point){if(!t.leaf){t.point.x+=Math.random()-.5;t.point.y+=Math.random()-.5}var c=e*n[t.point.index];t.charge+=t.pointCharge=c;r+=c*t.point.x;i+=c*t.point.y}t.cx=r/t.charge;t.cy=i/t.charge}var mo=20,xo=1,_o=1/0;a.layout.hierarchy=function(){var t=Mo,e=Ao,n=To;function r(i){var a=[i],o=[],s;i.depth=0;for(;null!=(s=a.pop());){o.push(s);if((c=e.call(r,s,s.depth))&&(u=c.length)){var u,c,l;for(;--u>=0;){a.push(l=c[u]);l.parent=s;l.depth=s.depth+1}if(n)s.value=0;s.children=c}else{if(n)s.value=+n.call(r,s,s.depth)||0;delete s.children}}bo(i,function(e){var r,i;if(t&&(r=e.children))r.sort(t);if(n&&(i=e.parent))i.value+=e.value});return o}r.sort=function(e){if(!arguments.length)return t;t=e;return r};r.children=function(t){if(!arguments.length)return e;e=t;return r};r.value=function(t){if(!arguments.length)return n;n=t;return r};r.revalue=function(t){if(n){So(t,function(t){if(t.children)t.value=0});bo(t,function(t){var e;if(!t.children)t.value=+n.call(r,t,t.depth)||0;if(e=t.parent)e.value+=t.value})}return t};return r};function wo(t,e){a.rebind(t,e,"sort","children","value");t.nodes=t;t.links=Co;return t}function So(t,e){var n=[t];for(;null!=(t=n.pop());){e(t);if((i=t.children)&&(r=i.length)){var r,i;for(;--r>=0;)n.push(i[r])}}}function bo(t,e){var n=[t],r=[];for(;null!=(t=n.pop());){r.push(t);if((o=t.children)&&(a=o.length)){var i=-1,a,o;for(;++i<a;)n.push(o[i])}}for(;null!=(t=r.pop());)e(t)}function Ao(t){return t.children}function To(t){return t.value}function Mo(t,e){return e.value-t.value}function Co(t){return a.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}a.layout.partition=function(){var t=a.layout.hierarchy(),e=[1,1];function n(t,e,r,i){var a=t.children;t.x=e;t.y=t.depth*i;t.dx=r;t.dy=i;if(a&&(s=a.length)){var o=-1,s,u,c;r=t.value?r/t.value:0;for(;++o<s;){n(u=a[o],e,c=u.value*r,i);e+=c}}}function r(t){var e=t.children,n=0;if(e&&(a=e.length)){var i=-1,a;for(;++i<a;)n=Math.max(n,r(e[i]))}return 1+n}function i(i,a){var o=t.call(this,i,a);n(o[0],0,e[0],e[1]/r(o[0]));return o}i.size=function(t){if(!arguments.length)return e;e=t;return i};return wo(i,t)};a.layout.pie=function(){var t=Number,e=Po,n=0,r=Ot,i=0;function o(s){var u=s.length,c=s.map(function(e,n){return+t.call(o,e,n)}),l=+("function"===typeof n?n.apply(this,arguments):n),f=("function"===typeof r?r.apply(this,arguments):r)-l,h=Math.min(Math.abs(f)/u,+("function"===typeof i?i.apply(this,arguments):i)),d=h*(f<0?-1:1),g=a.sum(c),p=g?(f-u*d)/g:0,v=a.range(u),y=[],m;if(null!=e)v.sort(e===Po?function(t,e){return c[e]-c[t]}:function(t,n){return e(s[t],s[n])});v.forEach(function(t){y[t]={data:s[t],value:m=c[t],startAngle:l,endAngle:l+=m*p+d,padAngle:h}});return y}o.value=function(e){if(!arguments.length)return t;t=e;return o};o.sort=function(t){if(!arguments.length)return e;e=t;return o};o.startAngle=function(t){if(!arguments.length)return n;n=t;return o};o.endAngle=function(t){if(!arguments.length)return r;r=t;return o};o.padAngle=function(t){if(!arguments.length)return i;i=t;return o};return o};var Po={};a.layout.stack=function(){var t=G,e=Io,n=Ro,r=ko,i=Lo,o=Eo;function s(u,c){if(!(p=u.length))return u;var l=u.map(function(e,n){return t.call(s,e,n)});var f=l.map(function(t){return t.map(function(t,e){return[i.call(s,t,e),o.call(s,t,e)]})});var h=e.call(s,f,c);l=a.permute(l,h);f=a.permute(f,h);var d=n.call(s,f,c);var g=l[0].length,p,v,y,m;for(y=0;y<g;++y){r.call(s,l[0][y],m=d[y],f[0][y][1]);for(v=1;v<p;++v)r.call(s,l[v][y],m+=f[v-1][y][1],f[v][y][1])}return u}s.values=function(e){if(!arguments.length)return t;t=e;return s};s.order=function(t){if(!arguments.length)return e;e="function"===typeof t?t:Vo.get(t)||Io;return s};s.offset=function(t){if(!arguments.length)return n;n="function"===typeof t?t:Oo.get(t)||Ro;return s};s.x=function(t){if(!arguments.length)return i;i=t;return s};s.y=function(t){if(!arguments.length)return o;o=t;return s};s.out=function(t){if(!arguments.length)return r;r=t;return s};return s};function Lo(t){return t.x}function Eo(t){return t.y}function ko(t,e,n){t.y0=e;t.y=n}var Vo=a.map({"inside-out":function(t){var e=t.length,n,r,i=t.map(Go),o=t.map(No),s=a.range(e).sort(function(t,e){return i[t]-i[e]}),u=0,c=0,l=[],f=[];for(n=0;n<e;++n){r=s[n];if(u<c){u+=o[r];l.push(r)}else{c+=o[r];f.push(r)}}return f.reverse().concat(l)},reverse:function(t){return a.range(t.length).reverse()},default:Io});var Oo=a.map({silhouette:function(t){var e=t.length,n=t[0].length,r=[],i=0,a,o,s,u=[];for(o=0;o<n;++o){for(a=0,s=0;a<e;a++)s+=t[a][o][1];if(s>i)i=s;r.push(s)}for(o=0;o<n;++o)u[o]=(i-r[o])/2;return u},wiggle:function(t){var e=t.length,n=t[0],r=n.length,i,a,o,s,u,c,l,f,h,d=[];d[0]=f=h=0;for(a=1;a<r;++a){for(i=0,s=0;i<e;++i)s+=t[i][a][1];for(i=0,u=0,l=n[a][0]-n[a-1][0];i<e;++i){for(o=0,c=(t[i][a][1]-t[i][a-1][1])/(2*l);o<i;++o)c+=(t[o][a][1]-t[o][a-1][1])/l;u+=c*t[i][a][1]}d[a]=f-=s?u/s*l:0;if(f<h)h=f}for(a=0;a<r;++a)d[a]-=h;return d},expand:function(t){var e=t.length,n=t[0].length,r=1/e,i,a,o,s=[];for(a=0;a<n;++a){for(i=0,o=0;i<e;i++)o+=t[i][a][1];if(o)for(i=0;i<e;i++)t[i][a][1]/=o;else for(i=0;i<e;i++)t[i][a][1]=r}for(a=0;a<n;++a)s[a]=0;return s},zero:Ro});function Io(t){return a.range(t.length)}function Ro(t){var e=-1,n=t[0].length,r=[];for(;++e<n;)r[e]=0;return r}function Go(t){var e=1,n=0,r=t[0][1],i,a=t.length;for(;e<a;++e)if((i=t[e][1])>r){n=e;r=i}return n}function No(t){return t.reduce(Do,0)}function Do(t,e){return t+e[1]}a.layout.histogram=function(){var t=true,e=Number,n=jo,r=Fo;function i(i,o){var s=[],u=i.map(e,this),c=n.call(this,u,o),l=r.call(this,c,u,o),f,o=-1,h=u.length,d=l.length-1,g=t?1:1/h,p;for(;++o<d;){(f=s[o]=[]).dx=l[o+1]-(f.x=l[o]);f.y=0}if(d>0){o=-1;for(;++o<h;)if((p=u[o])>=c[0]&&p<=c[1]){(f=s[a.bisect(l,p,1,d)-1]).y+=g;f.push(i[o])}}return s}i.value=function(t){if(!arguments.length)return e;e=t;return i};i.range=function(t){if(!arguments.length)return n;n=Ce(t);return i};i.bins=function(t){if(!arguments.length)return r;r="number"===typeof t?function(e){return zo(e,t)}:Ce(t);return i};i.frequency=function(e){if(!arguments.length)return t;t=!!e;return i};return i};function Fo(t,e){return zo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function zo(t,e){var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];for(;++n<=e;)a[n]=i*n+r;return a}function jo(t){return[a.min(t),a.max(t)]}a.layout.pack=function(){var t=a.layout.hierarchy().sort(Xo),e=0,n=[1,1],r;function i(i,a){var o=t.call(this,i,a),s=o[0],u=n[0],c=n[1],l=null==r?Math.sqrt:"function"===typeof r?r:function(){return r};s.x=s.y=0;bo(s,function(t){t.r=+l(t.value)});bo(s,Uo);if(e){var f=e*(r?1:Math.max(2*s.r/u,2*s.r/c))/2;bo(s,function(t){t.r+=f});bo(s,Uo);bo(s,function(t){t.r-=f})}Qo(s,u/2,c/2,r?1:1/Math.max(2*s.r/u,2*s.r/c));return o}i.size=function(t){if(!arguments.length)return n;n=t;return i};i.radius=function(t){if(!arguments.length)return r;r=null==t||"function"===typeof t?t:+t;return i};i.padding=function(t){if(!arguments.length)return e;e=+t;return i};return wo(i,t)};function Xo(t,e){return t.value-e.value}function Bo(t,e){var n=t._pack_next;t._pack_next=e;e._pack_prev=t;e._pack_next=n;n._pack_prev=e}function Ho(t,e){t._pack_next=e;e._pack_prev=t}function Yo(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Uo(t){if(!(e=t.children)||!(h=e.length))return;var e,n=1/0,r=-1/0,i=1/0,a=-1/0,o,s,u,c,l,f,h;function d(t){n=Math.min(t.x-t.r,n);r=Math.max(t.x+t.r,r);i=Math.min(t.y-t.r,i);a=Math.max(t.y+t.r,a)}e.forEach(Wo);(o=e[0]).x=-o.r;o.y=0;d(o);if(h>1){(s=e[1]).x=s.r;s.y=0;d(s);if(h>2){$o(o,s,u=e[2]);d(u);Bo(o,u);o._pack_prev=u;Bo(u,s);s=o._pack_next;for(c=3;c<h;c++){$o(o,s,u=e[c]);var g=0,p=1,v=1;for(l=s._pack_next;l!==s;l=l._pack_next,p++)if(Yo(l,u)){g=1;break}if(1==g)for(f=o._pack_prev;f!==l._pack_prev&&!Yo(f,u);f=f._pack_prev,v++);if(g){if(p<v||p==v&&s.r<o.r)Ho(o,s=l);else Ho(o=f,s);c--}else{Bo(o,u);s=u;d(u)}}}}var y=(n+r)/2,m=(i+a)/2,x=0;for(c=0;c<h;c++){(u=e[c]).x-=y;u.y-=m;x=Math.max(x,u.r+Math.sqrt(u.x*u.x+u.y*u.y))}t.r=x;e.forEach(qo)}function Wo(t){t._pack_next=t._pack_prev=t}function qo(t){delete t._pack_next;delete t._pack_prev}function Qo(t,e,n,r){var i=t.children;t.x=e+=r*t.x;t.y=n+=r*t.y;t.r*=r;if(i){var a=-1,o=i.length;for(;++a<o;)Qo(i[a],e,n,r)}}function $o(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,s=i*i+a*a;var u=.5+((r*=r)-(o*=o))/(2*s),c=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=t.x+u*i+c*a;n.y=t.y+u*a-c*i}else{n.x=t.x+r;n.y=t.y}}a.layout.tree=function(){var t=a.layout.hierarchy().sort(null).value(null),e=Zo,n=[1,1],r=null;function i(i,a){var c=t.call(this,i,a),f=c[0],h=o(f);bo(h,s),h.parent.m=-h.z;So(h,u);if(r)So(f,l);else{var d=f,g=f,p=f;So(f,function(t){if(t.x<d.x)d=t;if(t.x>g.x)g=t;if(t.depth>p.depth)p=t});var v=e(d,g)/2-d.x,y=n[0]/(g.x+e(g,d)/2+v),m=n[1]/(p.depth||1);So(f,function(t){t.x=(t.x+v)*y;t.y=t.depth*m})}return c}function o(t){var e={A:null,children:[t]},n=[e],r;for(;null!=(r=n.pop());)for(var i=r.children,a,o=0,s=i.length;o<s;++o)n.push((i[o]=a={_:i[o],parent:r,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a);return e.children[0]}function s(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n.length){es(t);var a=(n[0].z+n[n.length-1].z)/2;if(i){t.z=i.z+e(t._,i._);t.m=t.z-a}else t.z=a}else if(i)t.z=i.z+e(t._,i._);t.parent.A=c(t,i,t.parent.A||r[0])}function u(t){t._.x=t.z+t.parent.m;t.m+=t.parent.m}function c(t,n,r){if(n){var i=t,a=t,o=n,s=i.parent.children[0],u=i.m,c=a.m,l=o.m,f=s.m,h;for(;o=Jo(o),i=Ko(i),o&&i;){s=Ko(s);(a=Jo(a)).a=t;if((h=o.z+l-i.z-u+e(o._,i._))>0){ts(ns(o,t,r),t,h);u+=h;c+=h}l+=o.m;u+=i.m;f+=s.m;c+=a.m}if(o&&!Jo(a)){a.t=o;a.m+=l-c}if(i&&!Ko(s)){s.t=i;s.m+=u-f;r=t}}return r}function l(t){t.x*=n[0];t.y=t.depth*n[1]}i.separation=function(t){if(!arguments.length)return e;e=t;return i};i.size=function(t){if(!arguments.length)return r?null:n;r=null==(n=t)?l:null;return i};i.nodeSize=function(t){if(!arguments.length)return r?n:null;r=null==(n=t)?null:l;return i};return wo(i,t)};function Zo(t,e){return t.parent==e.parent?1:2}function Ko(t){var e=t.children;return e.length?e[0]:t.t}function Jo(t){var e=t.children,n;return(n=e.length)?e[n-1]:t.t}function ts(t,e,n){var r=n/(e.i-t.i);e.c-=r;e.s+=n;t.c+=r;e.z+=n;e.m+=n}function es(t){var e=0,n=0,r=t.children,i=r.length,a;for(;--i>=0;){(a=r[i]).z+=e;a.m+=e;e+=a.s+(n+=a.c)}}function ns(t,e,n){return t.a.parent===e.parent?t.a:n}a.layout.cluster=function(){var t=a.layout.hierarchy().sort(null).value(null),e=Zo,n=[1,1],r=false;function i(i,a){var o=t.call(this,i,a),s=o[0],u,c=0;bo(s,function(t){var n=t.children;if(n&&n.length){t.x=is(n);t.y=rs(n)}else{t.x=u?c+=e(t,u):0;t.y=0;u=t}});var l=as(s),f=os(s),h=l.x-e(l,f)/2,d=f.x+e(f,l)/2;bo(s,r?function(t){t.x=(t.x-s.x)*n[0];t.y=(s.y-t.y)*n[1]}:function(t){t.x=(t.x-h)/(d-h)*n[0];t.y=(1-(s.y?t.y/s.y:1))*n[1]});return o}i.separation=function(t){if(!arguments.length)return e;e=t;return i};i.size=function(t){if(!arguments.length)return r?null:n;r=null==(n=t);return i};i.nodeSize=function(t){if(!arguments.length)return r?n:null;r=null!=(n=t);return i};return wo(i,t)};function rs(t){return 1+a.max(t,function(t){return t.y})}function is(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function as(t){var e=t.children;return e&&e.length?as(e[0]):t}function os(t){var e=t.children,n;return e&&(n=e.length)?os(e[n-1]):t}a.layout.treemap=function(){var t=a.layout.hierarchy(),e=Math.round,n=[1,1],r=null,i=ss,o=false,s,u="squarify",c=.5*(1+Math.sqrt(5));function l(t,e){var n=-1,r=t.length,i,a;for(;++n<r;){a=(i=t[n]).value*(e<0?0:e);i.area=isNaN(a)||a<=0?0:a}}function f(t){var e=t.children;if(e&&e.length){var n=i(t),r=[],a=e.slice(),o,s=1/0,c,h="slice"===u?n.dx:"dice"===u?n.dy:"slice-dice"===u?1&t.depth?n.dy:n.dx:Math.min(n.dx,n.dy),p;l(a,n.dx*n.dy/t.value);r.area=0;for(;(p=a.length)>0;){r.push(o=a[p-1]);r.area+=o.area;if("squarify"!==u||(c=d(r,h))<=s){a.pop();s=c}else{r.area-=r.pop().area;g(r,h,n,false);h=Math.min(n.dx,n.dy);r.length=r.area=0;s=1/0}}if(r.length){g(r,h,n,true);r.length=r.area=0}e.forEach(f)}}function h(t){var e=t.children;if(e&&e.length){var n=i(t),r=e.slice(),a,o=[];l(r,n.dx*n.dy/t.value);o.area=0;for(;a=r.pop();){o.push(a);o.area+=a.area;if(null!=a.z){g(o,a.z?n.dx:n.dy,n,!r.length);o.length=o.area=0}}e.forEach(h)}}function d(t,e){var n=t.area,r,i=0,a=1/0,o=-1,s=t.length;for(;++o<s;){if(!(r=t[o].area))continue;if(r<a)a=r;if(r>i)i=r}e*=e;return(n*=n)?Math.max(e*i*c/n,n/(e*a*c)):1/0}function g(t,n,r,i){var a=-1,o=t.length,s=r.x,u=r.y,c=n?e(t.area/n):0,l;if(n==r.dx){if(i||c>r.dy)c=r.dy;for(;++a<o;){(l=t[a]).x=s;l.y=u;l.dy=c;s+=l.dx=Math.min(r.x+r.dx-s,c?e(l.area/c):0)}l.z=true;l.dx+=r.x+r.dx-s;r.y+=c;r.dy-=c}else{if(i||c>r.dx)c=r.dx;for(;++a<o;){(l=t[a]).x=s;l.y=u;l.dx=c;u+=l.dy=Math.min(r.y+r.dy-u,c?e(l.area/c):0)}l.z=false;l.dy+=r.y+r.dy-u;r.x+=c;r.dx-=c}}function p(e){var r=s||t(e),i=r[0];i.x=i.y=0;if(i.value)i.dx=n[0],i.dy=n[1];else i.dx=i.dy=0;if(s)t.revalue(i);l([i],i.dx*i.dy/i.value);(s?h:f)(i);if(o)s=r;return r}p.size=function(t){if(!arguments.length)return n;n=t;return p};p.padding=function(t){if(!arguments.length)return r;function e(e){var n=t.call(p,e,e.depth);return null==n?ss(e):us(e,"number"===typeof n?[n,n,n,n]:n)}function n(e){return us(e,t)}var a;i=null==(r=t)?ss:"function"===(a=typeof t)?e:"number"===a?(t=[t,t,t,t],n):n;return p};p.round=function(t){if(!arguments.length)return e!=Number;e=t?Math.round:Number;return p};p.sticky=function(t){if(!arguments.length)return o;o=t;s=null;return p};p.ratio=function(t){if(!arguments.length)return c;c=t;return p};p.mode=function(t){if(!arguments.length)return u;u=t+"";return p};return wo(p,t)};function ss(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function us(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];if(i<0){n+=i/2;i=0}if(a<0){r+=a/2;a=0}return{x:n,y:r,dx:i,dy:a}}a.random={normal:function(t,e){var n=arguments.length;if(n<2)e=1;if(n<1)t=0;return function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=a.random.normal.apply(a,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=a.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}};a.scale={};function cs(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function ls(t){return t.rangeExtent?t.rangeExtent():cs(t.range())}function fs(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function hs(t,e){var n=0,r=t.length-1,i=t[n],a=t[r],o;if(a<i){o=n,n=r,r=o;o=i,i=a,a=o}t[n]=e.floor(i);t[r]=e.ceil(a);return t}function ds(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:gs}var gs={floor:G,ceil:G};function ps(t,e,n,r){var i=[],o=[],s=0,u=Math.min(t.length,e.length)-1;if(t[u]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}for(;++s<=u;){i.push(n(t[s-1],t[s]));o.push(r(e[s-1],e[s]))}return function(e){var n=a.bisect(t,e,1,u)-1;return o[n](i[n](e))}}a.scale.linear=function(){return vs([0,1],[0,1],Pa,false)};function vs(t,e,n,r){var i,a;function o(){var o=Math.min(t.length,e.length)>2?ps:fs,u=r?uo:so;i=o(t,e,u,n);a=o(e,t,u,Pa);return s}function s(t){return i(t)}s.invert=function(t){return a(t)};s.domain=function(e){if(!arguments.length)return t;t=e.map(Number);return o()};s.range=function(t){if(!arguments.length)return e;e=t;return o()};s.rangeRound=function(t){return s.range(t).interpolate(Qa)};s.clamp=function(t){if(!arguments.length)return r;r=t;return o()};s.interpolate=function(t){if(!arguments.length)return n;n=t;return o()};s.ticks=function(e){return _s(t,e)};s.tickFormat=function(e,n){return ws(t,e,n)};s.nice=function(e){ms(t,e);return o()};s.copy=function(){return vs(t,e,n,r)};return o()}function ys(t,e){return a.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ms(t,e){hs(t,ds(xs(t,e)[2]));hs(t,ds(xs(t,e)[2]));return t}function xs(t,e){if(null==e)e=10;var n=cs(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;if(a<=.15)i*=10;else if(a<=.35)i*=5;else if(a<=.75)i*=2;n[0]=Math.ceil(n[0]/i)*i;n[1]=Math.floor(n[1]/i)*i+.5*i;n[2]=i;return n}function _s(t,e){return a.range.apply(a,xs(t,e))}function ws(t,e,n){var r=xs(t,e);if(n){var i=Ye.exec(n);i.shift();if("s"===i[8]){var o=a.formatPrefix(Math.max(S(r[0]),S(r[1])));if(!i[7])i[7]="."+bs(o.scale(r[2]));i[8]="f";n=a.format(i.join(""));return function(t){return n(o.scale(t))+o.symbol}}if(!i[7])i[7]="."+As(i[8],r);n=i.join("")}else n=",."+bs(r[2])+"f";return a.format(n)}var Ss={s:1,g:1,p:1,r:1,e:1};function bs(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function As(t,e){var n=bs(e[2]);return t in Ss?Math.abs(n-bs(Math.max(S(e[0]),S(e[1]))))+ +("e"!==t):n-2*("%"===t)}a.scale.log=function(){return Ts(a.scale.linear().domain([0,1]),10,true,[1,10])};function Ts(t,e,n,r){function i(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function s(e){return t(i(e))}s.invert=function(e){return o(t.invert(e))};s.domain=function(e){if(!arguments.length)return r;n=e[0]>=0;t.domain((r=e.map(Number)).map(i));return s};s.base=function(n){if(!arguments.length)return e;e=+n;t.domain(r.map(i));return s};s.nice=function(){var e=hs(r.map(i),n?Math:Cs);t.domain(e);r=e.map(o);return s};s.ticks=function(){var t=cs(r),a=[],s=t[0],u=t[1],c=Math.floor(i(s)),l=Math.ceil(i(u)),f=e%1?2:e;if(isFinite(l-c)){if(n){for(;c<l;c++)for(var h=1;h<f;h++)a.push(o(c)*h);a.push(o(c))}else{a.push(o(c));for(;c++<l;)for(var h=f-1;h>0;h--)a.push(o(c)*h)}for(c=0;a[c]<s;c++);for(l=a.length;a[l-1]>u;l--);a=a.slice(c,l)}return a};s.tickFormat=function(t,n){if(!arguments.length)return Ms;if(arguments.length<2)n=Ms;else if("function"!==typeof n)n=a.format(n);var r=Math.max(1,e*t/s.ticks().length);return function(t){var a=t/o(Math.round(i(t)));if(a*e<e-.5)a*=e;return a<=r?n(t):""}};s.copy=function(){return Ts(t.copy(),e,n,r)};return ys(s,t)}var Ms=a.format(".0e"),Cs={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};a.scale.pow=function(){return Ps(a.scale.linear(),1,[0,1])};function Ps(t,e,n){var r=Ls(e),i=Ls(1/e);function a(e){return t(r(e))}a.invert=function(e){return i(t.invert(e))};a.domain=function(e){if(!arguments.length)return n;t.domain((n=e.map(Number)).map(r));return a};a.ticks=function(t){return _s(n,t)};a.tickFormat=function(t,e){return ws(n,t,e)};a.nice=function(t){return a.domain(ms(n,t))};a.exponent=function(o){if(!arguments.length)return e;r=Ls(e=o);i=Ls(1/e);t.domain(n.map(r));return a};a.copy=function(){return Ps(t.copy(),e,n)};return ys(a,t)}function Ls(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}a.scale.sqrt=function(){return a.scale.pow().exponent(.5)};a.scale.ordinal=function(){return Es([],{t:"range",a:[[]]})};function Es(t,e){var n,r,i;function o(i){return r[((n.get(i)||("range"===e.t?n.set(i,t.push(i)):NaN))-1)%r.length]}function s(e,n){return a.range(t.length).map(function(t){return e+n*t})}o.domain=function(r){if(!arguments.length)return t;t=[];n=new T;var i=-1,a=r.length,s;for(;++i<a;)if(!n.has(s=r[i]))n.set(s,t.push(s));return o[e.t].apply(o,e.a)};o.range=function(t){if(!arguments.length)return r;r=t;i=0;e={t:"range",a:arguments};return o};o.rangePoints=function(n,a){if(arguments.length<2)a=0;var u=n[0],c=n[1],l=t.length<2?(u=(u+c)/2,0):(c-u)/(t.length-1+a);r=s(u+l*a/2,l);i=0;e={t:"rangePoints",a:arguments};return o};o.rangeRoundPoints=function(n,a){if(arguments.length<2)a=0;var u=n[0],c=n[1],l=t.length<2?(u=c=Math.round((u+c)/2),0):(c-u)/(t.length-1+a)|0;r=s(u+Math.round(l*a/2+(c-u-(t.length-1+a)*l)/2),l);i=0;e={t:"rangeRoundPoints",a:arguments};return o};o.rangeBands=function(n,a,u){if(arguments.length<2)a=0;if(arguments.length<3)u=a;var c=n[1]<n[0],l=n[c-0],f,h=(n[1-c]-l)/(t.length-a+2*u);r=s(l+h*u,h);if(c)r.reverse();i=h*(1-a);e={t:"rangeBands",a:arguments};return o};o.rangeRoundBands=function(n,a,u){if(arguments.length<2)a=0;if(arguments.length<3)u=a;var c=n[1]<n[0],l=n[c-0],f=n[1-c],h=Math.floor((f-l)/(t.length-a+2*u));r=s(l+Math.round((f-l-(t.length-a)*h)/2),h);if(c)r.reverse();i=Math.round(h*(1-a));e={t:"rangeRoundBands",a:arguments};return o};o.rangeBand=function(){return i};o.rangeExtent=function(){return cs(e.a[0])};o.copy=function(){return Es(t,e)};return o.domain(t)}a.scale.category10=function(){return a.scale.ordinal().range(ks)};a.scale.category20=function(){return a.scale.ordinal().range(Vs)};a.scale.category20b=function(){return a.scale.ordinal().range(Os)};a.scale.category20c=function(){return a.scale.ordinal().range(Is)};var ks=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(me);var Vs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(me);var Os=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(me);var Is=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(me);a.scale.quantile=function(){return Rs([],[])};function Rs(t,e){var n;function r(){var r=0,o=e.length;n=[];for(;++r<o;)n[r-1]=a.quantile(t,r/o);return i}function i(t){if(!isNaN(t=+t))return e[a.bisect(n,t)]}i.domain=function(e){if(!arguments.length)return t;t=e.map(y).filter(m).sort(v);return r()};i.range=function(t){if(!arguments.length)return e;e=t;return r()};i.quantiles=function(){return n};i.invertExtent=function(r){return(r=e.indexOf(r))<0?[NaN,NaN]:[r>0?n[r-1]:t[0],r<n.length?n[r]:t[t.length-1]]};i.copy=function(){return Rs(t,e)};return r()}a.scale.quantize=function(){return Gs(0,1,[0,1])};function Gs(t,e,n){var r,i;function a(e){return n[Math.max(0,Math.min(i,Math.floor(r*(e-t))))]}function o(){r=n.length/(e-t);i=n.length-1;return a}a.domain=function(n){if(!arguments.length)return[t,e];t=+n[0];e=+n[n.length-1];return o()};a.range=function(t){if(!arguments.length)return n;n=t;return o()};a.invertExtent=function(e){return[e=(e=n.indexOf(e))<0?NaN:e/r+t,e+1/r]};a.copy=function(){return Gs(t,e,n)};return o()}a.scale.threshold=function(){return Ns([.5],[0,1])};function Ns(t,e){function n(n){if(n<=n)return e[a.bisect(t,n)]}n.domain=function(e){if(!arguments.length)return t;t=e;return n};n.range=function(t){if(!arguments.length)return e;e=t;return n};n.invertExtent=function(n){n=e.indexOf(n);return[t[n-1],t[n]]};n.copy=function(){return Ns(t,e)};return n}a.scale.identity=function(){return Ds([0,1])};function Ds(t){function e(t){return+t}e.invert=e;e.domain=e.range=function(n){if(!arguments.length)return t;t=n.map(e);return e};e.ticks=function(e){return _s(t,e)};e.tickFormat=function(e,n){return ws(t,e,n)};e.copy=function(){return Ds(t)};return e}a.svg={};function Fs(){return 0}a.svg.arc=function(){var t=js,e=Xs,n=Fs,r=zs,i=Bs,a=Hs,o=Ys;function s(){var s=Math.max(0,+t.apply(this,arguments)),c=Math.max(0,+e.apply(this,arguments)),l=i.apply(this,arguments)-Rt,f=a.apply(this,arguments)-Rt,h=Math.abs(f-l),d=l>f?0:1;if(c<s)g=c,c=s,s=g;if(h>=It)return u(c,d)+(s?u(s,1-d):"")+"Z";var g,p,v,y,m=0,x=0,_,w,S,b,A,T,M,C,P=[];if(y=(+o.apply(this,arguments)||0)/2){v=r===zs?Math.sqrt(s*s+c*c):+r.apply(this,arguments);if(!d)x*=-1;if(c)x=jt(v/c*Math.sin(y));if(s)m=jt(v/s*Math.sin(y))}if(c){_=c*Math.cos(l+x);w=c*Math.sin(l+x);S=c*Math.cos(f-x);b=c*Math.sin(f-x);var L=Math.abs(f-l-2*x)<=Vt?0:1;if(x&&Us(_,w,S,b)===d^L){var E=(l+f)/2;_=c*Math.cos(E);w=c*Math.sin(E);S=b=null}}else _=w=0;if(s){A=s*Math.cos(f-m);T=s*Math.sin(f-m);M=s*Math.cos(l+m);C=s*Math.sin(l+m);var k=Math.abs(l-f+2*m)<=Vt?0:1;if(m&&Us(A,T,M,C)===1-d^k){var V=(l+f)/2;A=s*Math.cos(V);T=s*Math.sin(V);M=C=null}}else A=T=0;if(h>Et&&(g=Math.min(Math.abs(c-s)/2,+n.apply(this,arguments)))>.001){p=s<c^d?0:1;var O=g,I=g;if(h<Vt){var R=null==M?[A,T]:null==S?[_,w]:Oi([_,w],[M,C],[S,b],[A,T]),G=_-R[0],N=w-R[1],D=S-R[0],F=b-R[1],z=1/Math.sin(Math.acos((G*D+N*F)/(Math.sqrt(G*G+N*N)*Math.sqrt(D*D+F*F)))/2),j=Math.sqrt(R[0]*R[0]+R[1]*R[1]);I=Math.min(g,(s-j)/(z-1));O=Math.min(g,(c-j)/(z+1))}if(null!=S){var X=Ws(null==M?[A,T]:[M,C],[_,w],c,O,d),B=Ws([S,b],[A,T],c,O,d);if(g===O)P.push("M",X[0],"A",O,",",O," 0 0,",p," ",X[1],"A",c,",",c," 0 ",1-d^Us(X[1][0],X[1][1],B[1][0],B[1][1]),",",d," ",B[1],"A",O,",",O," 0 0,",p," ",B[0]);else P.push("M",X[0],"A",O,",",O," 0 1,",p," ",B[0])}else P.push("M",_,",",w);if(null!=M){var H=Ws([_,w],[M,C],s,-I,d),Y=Ws([A,T],null==S?[_,w]:[S,b],s,-I,d);if(g===I)P.push("L",Y[0],"A",I,",",I," 0 0,",p," ",Y[1],"A",s,",",s," 0 ",d^Us(Y[1][0],Y[1][1],H[1][0],H[1][1]),",",1-d," ",H[1],"A",I,",",I," 0 0,",p," ",H[0]);else P.push("L",Y[0],"A",I,",",I," 0 0,",p," ",H[0])}else P.push("L",A,",",T)}else{P.push("M",_,",",w);if(null!=S)P.push("A",c,",",c," 0 ",L,",",d," ",S,",",b);P.push("L",A,",",T);if(null!=M)P.push("A",s,",",s," 0 ",k,",",1-d," ",M,",",C)}P.push("Z");return P.join("")}function u(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}s.innerRadius=function(e){if(!arguments.length)return t;t=Ce(e);return s};s.outerRadius=function(t){if(!arguments.length)return e;e=Ce(t);return s};s.cornerRadius=function(t){if(!arguments.length)return n;n=Ce(t);return s};s.padRadius=function(t){if(!arguments.length)return r;r=t==zs?zs:Ce(t);return s};s.startAngle=function(t){if(!arguments.length)return i;i=Ce(t);return s};s.endAngle=function(t){if(!arguments.length)return a;a=Ce(t);return s};s.padAngle=function(t){if(!arguments.length)return o;o=Ce(t);return s};s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Rt;return[Math.cos(r)*n,Math.sin(r)*n]};return s};var zs="auto";function js(t){return t.innerRadius}function Xs(t){return t.outerRadius}function Bs(t){return t.startAngle}function Hs(t){return t.endAngle}function Ys(t){return t&&t.padAngle}function Us(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Ws(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,c=-s*a,l=t[0]+u,f=t[1]+c,h=e[0]+u,d=e[1]+c,g=(l+h)/2,p=(f+d)/2,v=h-l,y=d-f,m=v*v+y*y,x=n-r,_=l*d-h*f,w=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*m-_*_)),S=(_*y-v*w)/m,b=(-_*v-y*w)/m,A=(_*y+v*w)/m,T=(-_*v+y*w)/m,M=S-g,C=b-p,P=A-g,L=T-p;if(M*M+C*C>P*P+L*L)S=A,b=T;return[[S-u,b-c],[S*n/x,b*n/x]]}function qs(t){var e=Ci,n=Pi,r=lr,i=$s,a=i.key,o=.7;function s(a){var s=[],u=[],c=-1,l=a.length,f,h=Ce(e),d=Ce(n);function g(){s.push("M",i(t(u),o))}for(;++c<l;)if(r.call(this,f=a[c],c))u.push([+h.call(this,f,c),+d.call(this,f,c)]);else if(u.length){g();u=[]}if(u.length)g();return s.length?s.join(""):null}s.x=function(t){if(!arguments.length)return e;e=t;return s};s.y=function(t){if(!arguments.length)return n;n=t;return s};s.defined=function(t){if(!arguments.length)return r;r=t;return s};s.interpolate=function(t){if(!arguments.length)return a;if("function"===typeof t)a=i=t;else a=(i=Qs.get(t)||$s).key;return s};s.tension=function(t){if(!arguments.length)return o;o=t;return s};return s}a.svg.line=function(){return qs(G)};var Qs=a.map({linear:$s,"linear-closed":Zs,step:Ks,"step-before":Js,"step-after":tu,basis:ou,"basis-open":su,"basis-closed":uu,bundle:cu,cardinal:ru,"cardinal-open":eu,"cardinal-closed":nu,monotone:mu});Qs.forEach(function(t,e){e.key=t;e.closed=/-closed$/.test(t)});function $s(t){return t.length>1?t.join("L"):t+"Z"}function Zs(t){return t.join("L")+"Z"}function Ks(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];for(;++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);if(n>1)i.push("H",r[0]);return i.join("")}function Js(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];for(;++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function tu(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];for(;++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function eu(t,e){return t.length<4?$s(t):t[1]+iu(t.slice(1,-1),au(t,e))}function nu(t,e){return t.length<3?Zs(t):t[0]+iu((t.push(t[0]),t),au([t[t.length-2]].concat(t,[t[1]]),e))}function ru(t,e){return t.length<3?$s(t):t[0]+iu(t,au(t,e))}function iu(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return $s(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,u=1;if(n){r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1];i=t[1];u=2}if(e.length>1){s=e[1];a=t[u];u++;r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var c=2;c<e.length;c++,u++){a=t[u];s=e[c];r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}}if(n){var l=t[u];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+l[0]+","+l[1]}return r}function au(t,e){var n=[],r=(1-e)/2,i,a=t[0],o=t[1],s=1,u=t.length;for(;++s<u;){i=a;a=o;o=t[s];n.push([r*(o[0]-i[0]),r*(o[1]-i[1])])}return n}function ou(t){if(t.length<3)return $s(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",lu(du,o),",",lu(du,s)];t.push(t[n-1]);for(;++e<=n;){r=t[e];o.shift();o.push(r[0]);s.shift();s.push(r[1]);gu(u,o,s)}t.pop();u.push("L",r);return u.join("")}function su(t){if(t.length<4)return $s(t);var e=[],n=-1,r=t.length,i,a=[0],o=[0];for(;++n<3;){i=t[n];a.push(i[0]);o.push(i[1])}e.push(lu(du,a)+","+lu(du,o));--n;for(;++n<r;){i=t[n];a.shift();a.push(i[0]);o.shift();o.push(i[1]);gu(e,a,o)}return e.join("")}function uu(t){var e,n=-1,r=t.length,i=r+4,a,o=[],s=[];for(;++n<4;){a=t[n%r];o.push(a[0]);s.push(a[1])}e=[lu(du,o),",",lu(du,s)];--n;for(;++n<i;){a=t[n%r];o.shift();o.push(a[0]);s.shift();s.push(a[1]);gu(e,o,s)}return e.join("")}function cu(t,e){var n=t.length-1;if(n){var r=t[0][0],i=t[0][1],a=t[n][0]-r,o=t[n][1]-i,s=-1,u,c;for(;++s<=n;){c=s/n;(u=t[s])[0]=e*u[0]+(1-e)*(r+c*a);u[1]=e*u[1]+(1-e)*(i+c*o)}}return ou(t)}function lu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}var fu=[0,2/3,1/3,0],hu=[0,1/3,2/3,0],du=[0,1/6,2/3,1/6];function gu(t,e,n){t.push("C",lu(fu,e),",",lu(fu,n),",",lu(hu,e),",",lu(hu,n),",",lu(du,e),",",lu(du,n))}function pu(t,e){return(e[1]-t[1])/(e[0]-t[0])}function vu(t){var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=pu(i,a);for(;++e<n;)r[e]=(o+(o=pu(i=a,a=t[e+1])))/2;r[e]=o;return r}function yu(t){var e=[],n,r,i,a,o=vu(t),s=-1,u=t.length-1;for(;++s<u;){n=pu(t[s],t[s+1]);if(S(n)<Et)o[s]=o[s+1]=0;else if((a=(r=o[s]/n)*r+(i=o[s+1]/n)*i)>9){a=3*n/Math.sqrt(a);o[s]=a*r;o[s+1]=a*i}}s=-1;for(;++s<=u;){a=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s]));e.push([a||0,o[s]*a||0])}return e}function mu(t){return t.length<3?$s(t):t[0]+iu(t,yu(t))}a.svg.line.radial=function(){var t=qs(xu);t.radius=t.x,delete t.x;t.angle=t.y,delete t.y;return t};function xu(t){var e,n=-1,r=t.length,i,a;for(;++n<r;){i=(e=t[n])[0];a=e[1]-Rt;e[0]=i*Math.cos(a);e[1]=i*Math.sin(a)}return t}function _u(t){var e=Ci,n=Ci,r=0,i=Pi,a=lr,o=$s,s=o.key,u=o,c="L",l=.7;function f(s){var f=[],h=[],d=[],g=-1,p=s.length,v,y=Ce(e),m=Ce(r),x=e===n?function(){return w}:Ce(n),_=r===i?function(){return S}:Ce(i),w,S;function b(){f.push("M",o(t(d),l),c,u(t(h.reverse()),l),"Z")}for(;++g<p;)if(a.call(this,v=s[g],g)){h.push([w=+y.call(this,v,g),S=+m.call(this,v,g)]);d.push([+x.call(this,v,g),+_.call(this,v,g)])}else if(h.length){b();h=[];d=[]}if(h.length)b();return f.length?f.join(""):null}f.x=function(t){if(!arguments.length)return n;e=n=t;return f};f.x0=function(t){if(!arguments.length)return e;e=t;return f};f.x1=function(t){if(!arguments.length)return n;n=t;return f};f.y=function(t){if(!arguments.length)return i;r=i=t;return f};f.y0=function(t){if(!arguments.length)return r;r=t;return f};f.y1=function(t){if(!arguments.length)return i;i=t;return f};f.defined=function(t){if(!arguments.length)return a;a=t;return f};f.interpolate=function(t){if(!arguments.length)return s;if("function"===typeof t)s=o=t;else s=(o=Qs.get(t)||$s).key;u=o.reverse||o;c=o.closed?"M":"L";return f};f.tension=function(t){if(!arguments.length)return l;l=t;return f};return f}Js.reverse=tu;tu.reverse=Js;a.svg.area=function(){return _u(G)};a.svg.area.radial=function(){var t=_u(xu);t.radius=t.x,delete t.x;t.innerRadius=t.x0,delete t.x0;t.outerRadius=t.x1,delete t.x1;t.angle=t.y,delete t.y;t.startAngle=t.y0,delete t.y0;t.endAngle=t.y1,delete t.y1;return t};a.svg.chord=function(){var t=li,e=fi,n=wu,r=Bs,i=Hs;function a(n,r){var i=o(this,t,n,r),a=o(this,e,n,r);return"M"+i.p0+u(i.r,i.p1,i.a1-i.a0)+(s(i,a)?c(i.r,i.p1,i.r,i.p0):c(i.r,i.p1,a.r,a.p0)+u(a.r,a.p1,a.a1-a.a0)+c(a.r,a.p1,i.r,i.p0))+"Z"}function o(t,e,a,o){var s=e.call(t,a,o),u=n.call(t,s,o),c=r.call(t,s,o)-Rt,l=i.call(t,s,o)-Rt;return{r:u,a0:c,a1:l,p0:[u*Math.cos(c),u*Math.sin(c)],p1:[u*Math.cos(l),u*Math.sin(l)]}}function s(t,e){return t.a0==e.a0&&t.a1==e.a1}function u(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Vt)+",1 "+e}function c(t,e,n,r){return"Q 0,0 "+r}a.radius=function(t){if(!arguments.length)return n;n=Ce(t);return a};a.source=function(e){if(!arguments.length)return t;t=Ce(e);return a};a.target=function(t){if(!arguments.length)return e;e=Ce(t);return a};a.startAngle=function(t){if(!arguments.length)return r;r=Ce(t);return a};a.endAngle=function(t){if(!arguments.length)return i;i=Ce(t);return a};return a};function wu(t){return t.radius}a.svg.diagonal=function(){var t=li,e=fi,n=Su;function r(r,i){var a=t.call(this,r,i),o=e.call(this,r,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}r.source=function(e){if(!arguments.length)return t;t=Ce(e);return r};r.target=function(t){if(!arguments.length)return e;e=Ce(t);return r};r.projection=function(t){if(!arguments.length)return n;n=t;return r};return r};function Su(t){return[t.x,t.y]}a.svg.diagonal.radial=function(){var t=a.svg.diagonal(),e=Su,n=t.projection;t.projection=function(t){return arguments.length?n(bu(e=t)):e};return t};function bu(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Rt;return[n*Math.cos(r),n*Math.sin(r)]}}a.svg.symbol=function(){var t=Tu,e=Au;function n(n,r){return(Cu.get(t.call(this,n,r))||Mu)(e.call(this,n,r))}n.type=function(e){if(!arguments.length)return t;t=Ce(e);return n};n.size=function(t){if(!arguments.length)return e;e=Ce(t);return n};return n};function Au(){return 64}function Tu(){return"circle"}function Mu(t){var e=Math.sqrt(t/Vt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}var Cu=a.map({circle:Mu,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Lu)),n=e*Lu;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Pu),n=e*Pu/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Pu),n=e*Pu/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});a.svg.symbolTypes=Cu.keys();var Pu=Math.sqrt(3),Lu=Math.tan(30*Gt);K.transition=function(t){var e=Ru||++Iu,n=Fu(t),r=[],i,a,o=Gu||{time:Date.now(),ease:Da,delay:0,duration:250};for(var s=-1,u=this.length;++s<u;){r.push(i=[]);for(var c=this[s],l=-1,f=c.length;++l<f;){if(a=c[l])zu(a,l,n,e,o);i.push(a)}}return Vu(r,n,e)};K.interrupt=function(t){return this.each(null==t?Eu:ku(Fu(t)))};var Eu=ku(Fu());function ku(t){return function(){var e,n,r;if((e=this[t])&&(r=e[n=e.active])){r.timer.c=null;r.timer.t=NaN;if(--e.count)delete e[n];else delete this[t];e.active+=.5;r.event&&r.event.interrupt.call(this,this.__data__,r.index)}}}function Vu(t,e,n){W(t,Ou);t.namespace=e;t.id=n;return t}var Ou=[],Iu=0,Ru,Gu;Ou.call=K.call;Ou.empty=K.empty;Ou.node=K.node;Ou.size=K.size;a.transition=function(t,e){return t&&t.transition?Ru?t.transition(e):t:a.selection().transition(t)};a.transition.prototype=Ou;Ou.select=function(t){var e=this.id,n=this.namespace,r=[],i,a,o;t=J(t);for(var s=-1,u=this.length;++s<u;){r.push(i=[]);for(var c=this[s],l=-1,f=c.length;++l<f;)if((o=c[l])&&(a=t.call(o,o.__data__,l,s))){if("__data__"in o)a.__data__=o.__data__;zu(a,l,n,e,o[n][e]);i.push(a)}else i.push(null)}return Vu(r,n,e)};Ou.selectAll=function(t){var e=this.id,n=this.namespace,r=[],i,a,o,s,u;t=tt(t);for(var c=-1,l=this.length;++c<l;)for(var f=this[c],h=-1,d=f.length;++h<d;)if(o=f[h]){u=o[n][e];a=t.call(o,o.__data__,h,c);r.push(i=[]);for(var g=-1,p=a.length;++g<p;){if(s=a[g])zu(s,g,n,e,u);i.push(s)}}return Vu(r,n,e)};Ou.filter=function(t){var e=[],n,r,i;if("function"!==typeof t)t=gt(t);for(var a=0,o=this.length;a<o;a++){e.push(n=[]);for(var r,s=0,u=(r=this[a]).length;s<u;s++)if((i=r[s])&&t.call(i,i.__data__,s,a))n.push(i)}return Vu(e,this.namespace,this.id)};Ou.tween=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2)return this.node()[r][n].tween.get(t);return vt(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})};function Nu(t,e,n,r){var i=t.id,a=t.namespace;return vt(t,"function"===typeof n?function(t,o,s){t[a][i].tween.set(e,r(n.call(t,t.__data__,o,s)))}:(n=r(n),function(t){t[a][i].tween.set(e,n)}))}Ou.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?oo:Pa,r=a.ns.qualify(t);function i(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}function s(t){return null==t?i:(t+="",function(){var e=this.getAttribute(r),i;return e!==t&&(i=n(e,t),function(t){this.setAttribute(r,i(t))})})}function u(t){return null==t?o:(t+="",function(){var e=this.getAttributeNS(r.space,r.local),i;return e!==t&&(i=n(e,t),function(t){this.setAttributeNS(r.space,r.local,i(t))})})}return Nu(this,"attr."+t,e,r.local?u:s)};Ou.attrTween=function(t,e){var n=a.ns.qualify(t);function r(t,r){var i=e.call(this,t,r,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}}function i(t,r){var i=e.call(this,t,r,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}return this.tween("attr."+t,n.local?i:r)};Ou.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){if(r<2)e="";for(n in t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}function a(e){return null==e?i:(e+="",function(){var r=l(this).getComputedStyle(this,null).getPropertyValue(t),i;return r!==e&&(i=Pa(r,e),function(e){this.style.setProperty(t,i(e),n)})})}return Nu(this,"style."+t,e,a)};Ou.styleTween=function(t,e,n){if(arguments.length<3)n="";function r(r,i){var a=e.call(this,r,i,l(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}}return this.tween("style."+t,r)};Ou.text=function(t){return Nu(this,"text",t,Du)};function Du(t){if(null==t)t="";return function(){this.textContent=t}}Ou.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;if(this[t].count<2&&(e=this.parentNode))e.removeChild(this)})};Ou.ease=function(t){var e=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][e].ease;if("function"!==typeof t)t=a.ease.apply(a,arguments);return vt(this,function(r){r[n][e].ease=t})};Ou.delay=function(t){var e=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][e].delay;return vt(this,"function"===typeof t?function(r,i,a){r[n][e].delay=+t.call(r,r.__data__,i,a)}:(t=+t,function(r){r[n][e].delay=t}))};Ou.duration=function(t){var e=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][e].duration;return vt(this,"function"===typeof t?function(r,i,a){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,a))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))};Ou.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Gu,o=Ru;try{Ru=n;vt(this,function(e,i,a){Gu=e[r][n];t.call(e,e.__data__,i,a)})}finally{Gu=i;Ru=o}}else vt(this,function(i){var o=i[r][n];(o.event||(o.event=a.dispatch("start","end","interrupt"))).on(t,e)});return this};Ou.transition=function(){var t=this.id,e=++Iu,n=this.namespace,r=[],i,a,o,s;for(var u=0,c=this.length;u<c;u++){r.push(i=[]);for(var a,l=0,f=(a=this[u]).length;l<f;l++){if(o=a[l])zu(o,l,n,e,{time:(s=o[n][t]).time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration});i.push(o)}}return Vu(r,n,e)};function Fu(t){return null==t?"__transition__":"__transition_"+t+"__"}function zu(t,e,n,r,i){var a=t[n]||(t[n]={active:0,count:0}),o=a[r],s,u,c,l,f;function h(t){var e=o.delay;u.t=e+s;if(e<=t)return d(t-e);u.c=d}function d(n){var i=a.active,h=a[i];if(h){h.timer.c=null;h.timer.t=NaN;--a.count;delete a[i];h.event&&h.event.interrupt.call(t,t.__data__,h.index)}for(var d in a)if(+d<r){var p=a[d];p.timer.c=null;p.timer.t=NaN;--a.count;delete a[d]}u.c=g;Ne(function(){if(u.c&&g(n||1)){u.c=null;u.t=NaN}return 1},0,s);a.active=r;o.event&&o.event.start.call(t,t.__data__,e);f=[];o.tween.forEach(function(n,r){if(r=r.call(t,t.__data__,e))f.push(r)});l=o.ease;c=o.duration}function g(i){var s=i/c,u=l(s),h=f.length;for(;h>0;)f[--h].call(t,u);if(s>=1){o.event&&o.event.end.call(t,t.__data__,e);if(--a.count)delete a[r];else delete t[n];return 1}}if(!o){s=i.time;u=Ne(h,0,s);o=a[r]={tween:new T,time:s,timer:u,delay:i.delay,duration:i.duration,ease:i.ease,index:e};i=null;++a.count}}a.svg.axis=function(){var t=a.scale.linear(),e=ju,n=6,r=6,i=3,o=[10],u=null,c;function l(s){s.each(function(){var s=a.select(this);var l=this.__chart__||t,f=this.__chart__=t.copy();var h=null==u?f.ticks?f.ticks.apply(f,o):f.domain():u,d=null==c?f.tickFormat?f.tickFormat.apply(f,o):G:c,g=s.selectAll(".tick").data(h,f),p=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Et),v=a.transition(g.exit()).style("opacity",Et).remove(),y=a.transition(g.order()).style("opacity",1),m=Math.max(n,0)+i,x;var _=ls(f),w=s.selectAll(".domain").data([0]),S=(w.enter().append("path").attr("class","domain"),a.transition(w));p.append("line");p.append("text");var b=p.select("line"),A=y.select("line"),T=g.select("text").text(d),M=p.select("text"),C=y.select("text"),P="top"===e||"left"===e?-1:1,L,E,k,V;if("bottom"===e||"top"===e){x=Bu,L="x",k="y",E="x2",V="y2";T.attr("dy",P<0?"0em":".71em").style("text-anchor","middle");S.attr("d","M"+_[0]+","+P*r+"V0H"+_[1]+"V"+P*r)}else{x=Hu,L="y",k="x",E="y2",V="x2";T.attr("dy",".32em").style("text-anchor",P<0?"end":"start");S.attr("d","M"+P*r+","+_[0]+"H0V"+_[1]+"H"+P*r)}b.attr(V,P*n);M.attr(k,P*m);A.attr(E,0).attr(V,P*n);C.attr(L,0).attr(k,P*m);if(f.rangeBand){var O=f,I=O.rangeBand()/2;l=f=function(t){return O(t)+I}}else if(l.rangeBand)l=f;else v.call(x,f,l);p.call(x,l,f);y.call(x,f,f)})}l.scale=function(e){if(!arguments.length)return t;t=e;return l};l.orient=function(t){if(!arguments.length)return e;e=t in Xu?t+"":ju;return l};l.ticks=function(){if(!arguments.length)return o;o=s(arguments);return l};l.tickValues=function(t){if(!arguments.length)return u;u=t;return l};l.tickFormat=function(t){if(!arguments.length)return c;c=t;return l};l.tickSize=function(t){var e=arguments.length;if(!e)return n;n=+t;r=+arguments[e-1];return l};l.innerTickSize=function(t){if(!arguments.length)return n;n=+t;return l};l.outerTickSize=function(t){if(!arguments.length)return r;r=+t;return l};l.tickPadding=function(t){if(!arguments.length)return i;i=+t;return l};l.tickSubdivide=function(){return arguments.length&&l};return l};var ju="bottom",Xu={top:1,right:1,bottom:1,left:1};function Bu(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Hu(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}a.svg.brush=function(){var t=Y(h,"brushstart","brush","brushend"),e=null,n=null,r=[0,0],i=[0,0],o,s,u=true,c=true,f=Uu[0];function h(t){t.each(function(){var t=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v);var r=t.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var i=t.selectAll(".resize").data(f,G);i.exit().remove();i.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Yu[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");i.style("display",h.empty()?"none":null);var o=a.transition(t),s=a.transition(r),u;if(e){u=ls(e);s.attr("x",u[0]).attr("width",u[1]-u[0]);g(o)}if(n){u=ls(n);s.attr("y",u[0]).attr("height",u[1]-u[0]);p(o)}d(o)})}h.event=function(e){e.each(function(){var e=t.of(this,arguments),n={x:r,y:i,i:o,j:s},u=this.__chart__||n;this.__chart__=n;if(Ru)a.select(this).transition().each("start.brush",function(){o=u.i;s=u.j;r=u.x;i=u.y;e({type:"brushstart"})}).tween("brush:brush",function(){var t=La(r,n.x),a=La(i,n.y);o=s=null;return function(o){r=n.x=t(o);i=n.y=a(o);e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=n.i;s=n.j;e({type:"brush",mode:"resize"});e({type:"brushend"})});else{e({type:"brushstart"});e({type:"brush",mode:"resize"});e({type:"brushend"})}})};function d(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+r[+/e$/.test(t)]+","+i[+/^s/.test(t)]+")"})}function g(t){t.select(".extent").attr("x",r[0]);t.selectAll(".extent,.n>rect,.s>rect").attr("width",r[1]-r[0])}function p(t){t.select(".extent").attr("y",i[0]);t.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function v(){var f=this,v=a.select(a.event.target),y=t.of(f,arguments),m=a.select(f),x=v.datum(),_=!/^(n|s)$/.test(x)&&e,w=!/^(e|w)$/.test(x)&&n,S=v.classed("extent"),b=Mt(f),A,T=a.mouse(f),M;var C=a.select(l(f)).on("keydown.brush",E).on("keyup.brush",k);if(a.event.changedTouches)C.on("touchmove.brush",V).on("touchend.brush",I);else C.on("mousemove.brush",V).on("mouseup.brush",I);m.interrupt().selectAll("*").interrupt();if(S){T[0]=r[0]-T[0];T[1]=i[0]-T[1]}else if(x){var P=+/w$/.test(x),L=+/^n/.test(x);M=[r[1-P]-T[0],i[1-L]-T[1]];T[0]=r[P];T[1]=i[L]}else if(a.event.altKey)A=T.slice();m.style("pointer-events","none").selectAll(".resize").style("display",null);a.select("body").style("cursor",v.style("cursor"));y({type:"brushstart"});V();function E(){if(32==a.event.keyCode){if(!S){A=null;T[0]-=r[1];T[1]-=i[1];S=2}B()}}function k(){if(32==a.event.keyCode&&2==S){T[0]+=r[1];T[1]+=i[1];S=0;B()}}function V(){var t=a.mouse(f),o=false;if(M){t[0]+=M[0];t[1]+=M[1]}if(!S)if(a.event.altKey){if(!A)A=[(r[0]+r[1])/2,(i[0]+i[1])/2];T[0]=r[+(t[0]<A[0])];T[1]=i[+(t[1]<A[1])]}else A=null;if(_&&O(t,e,0)){g(m);o=true}if(w&&O(t,n,1)){p(m);o=true}if(o){d(m);y({type:"brush",mode:S?"move":"resize"})}}function O(t,e,n){var a=ls(e),l=a[0],f=a[1],h=T[n],d=n?i:r,g=d[1]-d[0],p,v;if(S){l-=h;f-=g+h}p=(n?c:u)?Math.max(l,Math.min(f,t[n])):t[n];if(S)v=(p+=h)+g;else{if(A)h=Math.max(l,Math.min(f,2*A[n]-p));if(h<p){v=p;p=h}else v=h}if(d[0]!=p||d[1]!=v){if(n)s=null;else o=null;d[0]=p;d[1]=v;return true}}function I(){V();m.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null);a.select("body").style("cursor",null);C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);b();y({type:"brushend"})}}h.x=function(t){if(!arguments.length)return e;f=Uu[!(e=t)<<1|!n];return h};h.y=function(t){if(!arguments.length)return n;f=Uu[!e<<1|!(n=t)];return h};h.clamp=function(t){if(!arguments.length)return e&&n?[u,c]:e?u:n?c:null;if(e&&n)u=!!t[0],c=!!t[1];else if(e)u=!!t;else if(n)c=!!t;return h};h.extent=function(t){var a,u,c,l,f;if(!arguments.length){if(e)if(o)a=o[0],u=o[1];else{a=r[0],u=r[1];if(e.invert)a=e.invert(a),u=e.invert(u);if(u<a)f=a,a=u,u=f}if(n)if(s)c=s[0],l=s[1];else{c=i[0],l=i[1];if(n.invert)c=n.invert(c),l=n.invert(l);if(l<c)f=c,c=l,l=f}return e&&n?[[a,c],[u,l]]:e?[a,u]:n&&[c,l]}if(e){a=t[0],u=t[1];if(n)a=a[0],u=u[0];o=[a,u];if(e.invert)a=e(a),u=e(u);if(u<a)f=a,a=u,u=f;if(a!=r[0]||u!=r[1])r=[a,u]}if(n){c=t[0],l=t[1];if(e)c=c[1],l=l[1];s=[c,l];if(n.invert)c=n(c),l=n(l);if(l<c)f=c,c=l,l=f;if(c!=i[0]||l!=i[1])i=[c,l]}return h};h.clear=function(){if(!h.empty()){r=[0,0],i=[0,0];o=s=null}return h};h.empty=function(){return!!e&&r[0]==r[1]||!!n&&i[0]==i[1]};return a.rebind(h,t,"on")};var Yu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Uu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Wu=qe.format=Tn.timeFormat;var qu=Wu.utc;var Qu=qu("%Y-%m-%dT%H:%M:%S.%LZ");Wu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?$u:Qu;function $u(t){return t.toISOString()}$u.parse=function(t){var e=new Date(t);return isNaN(e)?null:e};$u.toString=Qu.toString;qe.second=Ke(function(t){return new Qe(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()});qe.seconds=qe.second.range;qe.seconds.utc=qe.second.utc.range;qe.minute=Ke(function(t){return new Qe(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()});qe.minutes=qe.minute.range;qe.minutes.utc=qe.minute.utc.range;qe.hour=Ke(function(t){var e=t.getTimezoneOffset()/60;return new Qe(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()});qe.hours=qe.hour.range;qe.hours.utc=qe.hour.utc.range;qe.month=Ke(function(t){(t=qe.day(t)).setDate(1);return t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()});qe.months=qe.month.range;qe.months.utc=qe.month.utc.range;function Zu(t,e,n){function r(e){return t(e)}r.invert=function(e){return Ku(t.invert(e))};r.domain=function(e){if(!arguments.length)return t.domain().map(Ku);t.domain(e);return r};function i(t,n){var r,i=(t[1]-t[0])/n,o=a.bisect(Ju,i);return o==Ju.length?[e.year,xs(t.map(function(t){return t/31536e6}),n)[2]]:!o?[nc,xs(t,n)[2]]:e[i/Ju[o-1]<Ju[o]/i?o-1:o]}r.nice=function(t,e){var n=r.domain(),a=cs(n),o=null==t?i(a,10):"number"===typeof t&&i(a,t);if(o)t=o[0],e=o[1];function s(n){return!isNaN(n)&&!t.range(n,Ku(+n+1),e).length}return r.domain(hs(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Ku(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Ku(+e+1);return e}}:t))};r.ticks=function(t,e){var n=cs(r.domain()),a=null==t?i(n,10):"number"===typeof t?i(n,t):!t.range&&[{range:t},e];if(a)t=a[0],e=a[1];return t.range(n[0],Ku(+n[1]+1),e<1?1:e)};r.tickFormat=function(){return n};r.copy=function(){return Zu(t.copy(),e,n)};return ys(r,t)}function Ku(t){return new Date(t)}var Ju=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var tc=[[qe.second,1],[qe.second,5],[qe.second,15],[qe.second,30],[qe.minute,1],[qe.minute,5],[qe.minute,15],[qe.minute,30],[qe.hour,1],[qe.hour,3],[qe.hour,6],[qe.hour,12],[qe.day,1],[qe.day,2],[qe.week,1],[qe.month,1],[qe.month,3],[qe.year,1]];var ec=Wu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",lr]]);var nc={range:function(t,e,n){return a.range(Math.ceil(t/n)*n,+e,n).map(Ku)},floor:G,ceil:G};tc.year=qe.year;qe.scale=function(){return Zu(a.scale.linear(),tc,ec)};var rc=tc.map(function(t){return[t[0].utc,t[1]]});var ic=qu.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",lr]]);rc.year=qe.year.utc;qe.scale.utc=function(){return Zu(a.scale.linear(),rc,ic)};a.text=Pe(function(t){return t.responseText});a.json=function(t,e){return Le(t,"application/json",ac,e)};function ac(t){return JSON.parse(t.responseText)}a.html=function(t,e){return Le(t,"text/html",oc,e)};function oc(t){var e=u.createRange();e.selectNode(u.body);return e.createContextualFragment(t.responseText)}a.xml=Pe(function(t){return t.responseXML});if(true)this.d3=a,void 0!==(i="function"===typeof(r=a)?r.call(e,n,e,t):r)&&(t.exports=i)}()},10074:function(t,e,n){},101:function(t,e,n){"use strict";var r=n(29);var i=n(186).indexOf;var a=n(138);var o=n(90);var s=[].indexOf;var u=!!s&&1/[1].indexOf(1,-0)<0;var c=a("indexOf");var l=o("indexOf",{ACCESSORS:true,1:0});r({target:"Array",proto:true,forced:u||!c||!l},{indexOf:function t(e){return u?s.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},1014:function(t,e,n){!function(n,r){var i={};i.version="0.4.1";i.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var a=Array.prototype.map,o=Array.isArray,s=Object.prototype.toString;function u(t){return!!(""===t||t&&t.charCodeAt&&t.substr)}function c(t){return o?o(t):"[object Array]"===s.call(t)}function l(t){return t&&"[object Object]"===s.call(t)}function f(t,e){var n;t=t||{};e=e||{};for(n in e)if(e.hasOwnProperty(n))if(null==t[n])t[n]=e[n];return t}function h(t,e,n){var r=[],i,o;if(!t)return r;if(a&&t.map===a)return t.map(e,n);for(i=0,o=t.length;i<o;i++)r[i]=e.call(n,t[i],i,t);return r}function d(t,e){t=Math.round(Math.abs(t));return isNaN(t)?e:t}function g(t){var e=i.settings.currency.format;if("function"===typeof t)t=t();if(u(t)&&t.match("%v"))return{pos:t,neg:t.replace("-","").replace("%v","-%v"),zero:t};else if(!t||!t.pos||!t.pos.match("%v"))return!u(e)?e:i.settings.currency.format={pos:e,neg:e.replace("%v","-%v"),zero:e};return t}var p=i.unformat=i.parse=function(t,e){if(c(t))return h(t,function(t){return p(t,e)});if("number"===typeof(t=t||0))return t;e=e||i.settings.number.decimal;var n=new RegExp("[^0-9-"+e+"]",["g"]),r=parseFloat((""+t).replace(/\((.*)\)/,"-$1").replace(n,"").replace(e,"."));return!isNaN(r)?r:0};var v=i.toFixed=function(t,e){e=d(e,i.settings.number.precision);var n=Math.pow(10,e);return(Math.round(i.unformat(t)*n)/n).toFixed(e)};var y=i.formatNumber=i.format=function(t,e,n,r){if(c(t))return h(t,function(t){return y(t,e,n,r)});t=p(t);var a=f(l(e)?e:{precision:e,thousand:n,decimal:r},i.settings.number),o=d(a.precision),s=t<0?"-":"",u=parseInt(v(Math.abs(t||0),o),10)+"",g=u.length>3?u.length%3:0;return s+(g?u.substr(0,g)+a.thousand:"")+u.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+a.thousand)+(o?a.decimal+v(Math.abs(t),o).split(".")[1]:"")};var m=i.formatMoney=function(t,e,n,r,a,o){if(c(t))return h(t,function(t){return m(t,e,n,r,a,o)});t=p(t);var s=f(l(e)?e:{symbol:e,precision:n,thousand:r,decimal:a,format:o},i.settings.currency),u=g(s.format),v;return(t>0?u.pos:t<0?u.neg:u.zero).replace("%s",s.symbol).replace("%v",y(Math.abs(t),d(s.precision),s.thousand,s.decimal))};i.formatColumn=function(t,e,n,r,a,o){if(!t)return[];var s=f(l(e)?e:{symbol:e,precision:n,thousand:r,decimal:a,format:o},i.settings.currency),v=g(s.format),m=v.pos.indexOf("%s")<v.pos.indexOf("%v")?true:false,x=0,_=h(t,function(t,e){if(c(t))return i.formatColumn(t,s);else{var n,r=((t=p(t))>0?v.pos:t<0?v.neg:v.zero).replace("%s",s.symbol).replace("%v",y(Math.abs(t),d(s.precision),s.thousand,s.decimal));if(r.length>x)x=r.length;return r}});return h(_,function(t,e){if(u(t)&&t.length<x)return m?t.replace(s.symbol,s.symbol+new Array(x-t.length+1).join(" ")):new Array(x-t.length+1).join(" ")+t;return t})};if(true){if(t.exports)e=t.exports=i;e.accounting=i}}(this)},1015:function(t,e,n){var r;n(29)({target:"Number",stat:true},{isNaN:function t(e){return e!=e}})},103:function(t,e,n){var r=n(49);var i=n(23);var a=n(159);var o=n(284);var s=n(58).f;var u=n(157).f;var c=n(227);var l=n(191);var f=n(231);var h=n(69);var d=n(27);var g=n(105).set;var p=n(308);var v;var y=n(32)("match");var m=i.RegExp;var x=m.prototype;var _=/a/g;var w=/a/g;var S=new m(_)!==_;var b=f.UNSUPPORTED_Y;var A;if(r&&a("RegExp",!S||b||d(function(){w[y]=false;return m(_)!=_||m(w)==w||"/a/i"!=m(_,"i")}))){var T=function t(e,n){var r=this instanceof T;var i=c(e);var a=void 0===n;var s;if(!r&&i&&e.constructor===T&&a)return e;if(S){if(i&&!a)e=e.source}else if(e instanceof T){if(a)n=l.call(e);e=e.source}if(b)if(s=!!n&&n.indexOf("y")>-1)n=n.replace(/y/g,"");var u=o(S?new m(e,n):m(e,n),r?this:x,T);if(b&&s)g(u,{sticky:s});return u};var M=function(t){t in T||s(T,t,{configurable:true,get:function(){return m[t]},set:function(e){m[t]=e}})};var C=u(m);var P=0;for(;C.length>P;)M(C[P++]);x.constructor=T;T.prototype=x;h(i,"RegExp",T)}p("RegExp")},104:function(t,e){function n(e){if("function"===typeof Symbol&&"symbol"===typeof Symbol.iterator)t.exports=n=function t(e){return typeof e};else t.exports=n=function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return n(e)}t.exports=n},105:function(t,e,n){var r=n(260);var i=n(23);var a=n(37);var o=n(66);var s=n(39);var u=n(161);var c=n(132);var l=i.WeakMap;var f,h,d;var g=function(t){return d(t)?h(t):f(t,{})};var p=function(t){return function(e){var n;if(!a(e)||(n=h(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(r){var v=new l;var y=v.get;var m=v.has;var x=v.set;f=function(t,e){x.call(v,t,e);return e};h=function(t){return y.call(v,t)||{}};d=function(t){return m.call(v,t)}}else{var _=u("state");c[_]=true;f=function(t,e){o(t,_,e);return e};h=function(t){return s(t,_)?t[_]:{}};d=function(t){return s(t,_)}}t.exports={set:f,get:h,has:d,enforce:g,getterFor:p}},106:function(t,e,n){"use strict";var r=n(29);var i=n(205).trim;var a;r({target:"String",proto:true,forced:n(696)("trim")},{trim:function t(){return i(this)}})},107:function(t,e,n){var r=n(241);var i=n(23);var a=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?a(r[t])||a(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},116:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},12:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}function r(t,e,r){if(e)n(t.prototype,e);if(r)n(t,r);return t}t.exports=r},120:function(t,e,n){var r=n(37);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},125:function(t,e,n){var r=n(49);var i=n(196);var a=n(116);var o=n(89);var s=n(120);var u=n(39);var c=n(199);var l=Object.getOwnPropertyDescriptor;e.f=r?l:function t(e,n){e=o(e);n=s(n,true);if(c)try{return l(e,n)}catch(t){}if(u(e,n))return a(!i.f.call(e,n),e[n])}},126:function(t,e,n){var r=n(160);var i=n(135);var a=n(87);var o=n(62);var s=n(194);var u=[].push;var c=function(t){var e=1==t;var n=2==t;var c=3==t;var l=4==t;var f=6==t;var h=5==t||f;return function(d,g,p,v){var y=a(d);var m=i(y);var x=r(g,p,3);var _=o(m.length);var w=0;var S=v||s;var b=e?S(d,_):n?S(d,0):void 0;var A,T;for(;_>w;w++)if(h||w in m){T=x(A=m[w],w,y);if(t)if(e)b[w]=T;else if(T)switch(t){case 3:return true;case 5:return A;case 6:return w;case 2:u.call(b,A)}else if(l)return false}return f?-1:c||l?l:b}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},127:function(t,e,n){"use strict";var r=n(191);var i=n(231);var a=RegExp.prototype.exec;var o=String.prototype.replace;var s=a;var u=function(){var t=/a/;var e=/b*/g;a.call(t,"a");a.call(e,"a");return 0!==t.lastIndex||0!==e.lastIndex}();var c=i.UNSUPPORTED_Y||i.BROKEN_CARET;var l=void 0!==/()??/.exec("")[1];var f;if(u||l||c)s=function t(e){var n=this;var i,s,f,h;var d=c&&n.sticky;var g=r.call(n);var p=n.source;var v=0;var y=e;if(d){if(-1===(g=g.replace("y","")).indexOf("g"))g+="g";y=String(e).slice(n.lastIndex);if(n.lastIndex>0&&(!n.multiline||n.multiline&&"\n"!==e[n.lastIndex-1])){p="(?: "+p+")";y=" "+y;v++}s=new RegExp("^(?:"+p+")",g)}if(l)s=new RegExp("^"+p+"$(?!\\s)",g);if(u)i=n.lastIndex;f=a.call(d?s:n,y);if(d)if(f){f.input=f.input.slice(v);f[0]=f[0].slice(v);f.index=n.lastIndex;n.lastIndex+=f[0].length}else n.lastIndex=0;else if(u&&f)n.lastIndex=n.global?f.index+f[0].length:i;if(l&&f&&f.length>1)o.call(f[0],s,function(){for(h=1;h<arguments.length-2;h++)if(void 0===arguments[h])f[h]=void 0});return f};t.exports=s},128:function(t,e){t.exports=false},13:function(t,e,n){"use strict";var r=n(29);var i=n(127);r({target:"RegExp",proto:true,forced:/./.exec!==i},{exec:i})},132:function(t,e){t.exports={}},133:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},134:function(t,e,n){var r=n(27);var i=n(32);var a=n(190);var o=i("species");t.exports=function(t){return a>=51||!r(function(){var e=[];var n;(e.constructor={})[o]=function(){return{foo:1}};return 1!==e[t](Boolean).foo})}},135:function(t,e,n){var r=n(27);var i=n(84);var a="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?a.call(t,""):Object(t)}:Object},138:function(t,e,n){"use strict";var r=n(27);t.exports=function(t,e){var n=[][t];return!!n&&r(function(){n.call(null,e||function(){throw 1},1)})}},14:function(t,e,n){var r=n(204);var i=n(69);var a=n(374);if(!r)i(Object.prototype,"toString",a,{unsafe:true})},152:function(t,e,n){var r=n(84);t.exports=Array.isArray||function t(e){return"Array"==r(e)}},154:function(t,e,n){var r=n(23);var i=n(66);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},157:function(t,e,n){var r=n(203);var i;var a=n(164).concat("length","prototype");e.f=Object.getOwnPropertyNames||function t(e){return r(e,a)}},159:function(t,e,n){var r=n(27);var i=/#|\.prototype\./;var a=function(t,e){var n=s[o(t)];return n==c?true:n==u?false:"function"==typeof e?r(e):!!e};var o=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()};var s=a.data={};var u=a.NATIVE="N";var c=a.POLYFILL="P";t.exports=a},16:function(t,e,n){"use strict";var r=n(29);var i=n(27);var a=n(152);var o=n(37);var s=n(87);var u=n(62);var c=n(178);var l=n(194);var f=n(134);var h=n(32);var d=n(190);var g=h("isConcatSpreadable");var p=9007199254740991;var v="Maximum allowed index exceeded";var y=d>=51||!i(function(){var t=[];t[g]=false;return t.concat()[0]!==t});var m=f("concat");var x=function(t){if(!o(t))return false;var e=t[g];return void 0!==e?!!e:a(t)};var _;r({target:"Array",proto:true,forced:!y||!m},{concat:function t(e){var n=s(this);var r=l(n,0);var i=0;var a,o,f,h,d;for(a=-1,f=arguments.length;a<f;a++){d=-1===a?n:arguments[a];if(x(d)){if(i+(h=u(d.length))>9007199254740991)throw TypeError(v);for(o=0;o<h;o++,i++)if(o in d)c(r,i,d[o])}else{if(i>=9007199254740991)throw TypeError(v);c(r,i++,d)}}r.length=i;return r}})},160:function(t,e,n){var r=n(133);t.exports=function(t,e,n){r(t);if(void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},161:function(t,e,n){var r=n(183);var i=n(165);var a=r("keys");t.exports=function(t){return a[t]||(a[t]=i(t))}},162:function(t,e,n){var r=n(36);var i=n(289);var a=n(164);var o=n(132);var s=n(276);var u=n(185);var c=n(161);var l=">";var f="<";var h="prototype";var d="script";var g=c("IE_PROTO");var p=function(){};var v=function(t){return"<script>"+t+f+"/"+d+l};var y=function(t){t.write(v(""));t.close();var e=t.parentWindow.Object;t=null;return e};var m=function(){var t=u("iframe");var e="javascript:";var n;t.style.display="none";s.appendChild(t);t.src=String(e);(n=t.contentWindow.document).open();n.write(v("document.F=Object"));n.close();return n.F};var x;var _=function(){try{x=document.domain&&new ActiveXObject("htmlfile")}catch(t){}_=x?y(x):m();var t=a.length;for(;t--;)delete _.prototype[a[t]];return _()};o[g]=true;t.exports=Object.create||function t(e,n){var a;if(null!==e){p.prototype=r(e);a=new p;p.prototype=null;a[g]=e}else a=_();return void 0===n?a:i(a,n)}},164:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},165:function(t,e){var n=0;var r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},169:function(t,e,n){var r=n(100);var i=Math.max;var a=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):a(n,e)}},171:function(t,e,n){"use strict";n(13);var r=n(69);var i=n(27);var a=n(32);var o=n(127);var s=n(66);var u=a("species");var c=!i(function(){var t=/./;t.exec=function(){var t=[];t.groups={a:"7"};return t};return"7"!=="".replace(t,"$<a>")});var l="$0"==="a".replace(/./,"$0");var f=a("replace");var h=function(){if(/./[f])return""===/./[f]("a","$0");return false}();var d=!i(function(){var t=/(?:)/;var e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]});t.exports=function(t,e,n,f){var g=a(t);var p=!i(function(){var e={};e[g]=function(){return 7};return 7!=""[t](e)});var v=p&&!i(function(){var e=false;var n=/a/;if("split"===t){(n={}).constructor={};n.constructor[u]=function(){return n};n.flags="";n[g]=/./[g]}n.exec=function(){e=true;return null};n[g]("");return!e});if(!p||!v||"replace"===t&&!(c&&l&&!h)||"split"===t&&!d){var y=/./[g];var m=n(g,""[t],function(t,e,n,r,i){if(e.exec===o){if(p&&!i)return{done:true,value:y.call(e,n,r)};return{done:true,value:t.call(n,e,r)}}return{done:false}},{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h});var x=m[0];var _=m[1];r(String.prototype,t,x);r(RegExp.prototype,g,2==e?function(t,e){return _.call(t,this,e)}:function(t){return _.call(t,this)})}if(f)s(RegExp.prototype[g],"sham",true)}},172:function(t,e,n){var r=n(84);var i=n(127);t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var a=n.call(t,e);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},177:function(t,e,n){var r=n(200);var i=Function.toString;if("function"!=typeof r.inspectSource)r.inspectSource=function(t){return i.call(t)};t.exports=r.inspectSource},178:function(t,e,n){"use strict";var r=n(120);var i=n(58);var a=n(116);t.exports=function(t,e,n){var o=r(e);if(o in t)i.f(t,o,a(0,n));else t[o]=n}},18:function(t,e){function n(){t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r))t[r]=n[r]}return t};return n.apply(this,arguments)}t.exports=n},182:function(t,e,n){var r=n(203);var i=n(164);t.exports=Object.keys||function t(e){return r(e,i)}},183:function(t,e,n){var r=n(128);var i=n(200);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},184:function(t,e,n){var r=n(27);t.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},185:function(t,e,n){var r=n(23);var i=n(37);var a=r.document;var o=i(a)&&i(a.createElement);t.exports=function(t){return o?a.createElement(t):{}}},186:function(t,e,n){var r=n(89);var i=n(62);var a=n(169);var o=function(t){return function(e,n,o){var s=r(e);var u=i(s.length);var c=a(o,u);var l;if(t&&n!=n){for(;u>c;)if((l=s[c++])!=l)return true}else for(;u>c;c++)if((t||c in s)&&s[c]===n)return t||c||0;return!t&&-1}};t.exports={includes:o(true),indexOf:o(false)}},190:function(t,e,n){var r=n(23);var i=n(238);var a=r.process;var o=a&&a.versions;var s=o&&o.v8;var u,c;if(s)c=(u=s.split("."))[0]+u[1];else if(i)if(!(u=i.match(/Edge\/(\d+)/))||u[1]>=74)if(u=i.match(/Chrome\/(\d+)/))c=u[1];t.exports=c&&+c},191:function(t,e,n){"use strict";var r=n(36);t.exports=function(){var t=r(this);var e="";if(t.global)e+="g";if(t.ignoreCase)e+="i";if(t.multiline)e+="m";if(t.dotAll)e+="s";if(t.unicode)e+="u";if(t.sticky)e+="y";return e}},194:function(t,e,n){var r=n(37);var i=n(152);var a;var o=n(32)("species");t.exports=function(t,e){var n;if(i(t))if("function"==typeof(n=t.constructor)&&(n===Array||i(n.prototype)))n=void 0;else if(r(n))if(null===(n=n[o]))n=void 0;return new(void 0===n?Array:n)(0===e?0:e)}},196:function(t,e,n){"use strict";var r={}.propertyIsEnumerable;var i=Object.getOwnPropertyDescriptor;var a=i&&!r.call({1:2},1);e.f=a?function t(e){var n=i(this,e);return!!n&&n.enumerable}:r},197:function(t,e,n){"use strict";var r=n(211).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},198:function(t,e){t.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},199:function(t,e,n){var r=n(49);var i=n(27);var a=n(185);t.exports=!r&&!i(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},2:function(t,e){function n(e){t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return n(e)}t.exports=n},20:function(t,e,n){"use strict";n.d(e,"a",function(){return p});n.d(e,"b",function(){return v});n.d(e,"c",function(){return y});var r=n(48);var i=n.n(r);var a=n(13);var o=n.n(a);var s=n(28);var u=n.n(s);var c=n(34);var l=n.n(c);var f=n(104);var h=n.n(f);var d=n(3);var g=n.n(d);var p=function(){function t(e,n){g()(this,t);this.element=e;this.props=n||(this.element?this.element.dataset:null)}return t}();function v(t,e,n){document.addEventListener("DOMContentLoaded",function(){var r=[].slice.call(document.querySelectorAll(t));if(r.length>0)r.forEach(function(t){new e(t,n)})})}function y(t,e,n,r){var i=[];if(n&&"object"===h()(n)){t=t.replace(".","");i=n.getElementsByClassName(t)}else i=[].slice.call(document.querySelectorAll(t));return i[0]?new e(i[0],r):false}},200:function(t,e,n){var r=n(23);var i=n(154);var a="__core-js_shared__";var o=r[a]||i(a,{});t.exports=o},203:function(t,e,n){var r=n(39);var i=n(89);var a=n(186).indexOf;var o=n(132);t.exports=function(t,e){var n=i(t);var s=0;var u=[];var c;for(c in n)!r(o,c)&&r(n,c)&&u.push(c);for(;e.length>s;)if(r(n,c=e[s++]))~a(u,c)||u.push(c);return u}},204:function(t,e,n){var r;var i;var a={};a[n(32)("toStringTag")]="z";t.exports="[object z]"===String(a)},205:function(t,e,n){var r=n(68);var i;var a="["+n(198)+"]";var o=RegExp("^"+a+a+"*");var s=RegExp(a+a+"*$");var u=function(t){return function(e){var n=String(r(e));if(1&t)n=n.replace(o,"");if(2&t)n=n.replace(s,"");return n}};t.exports={start:u(1),end:u(2),trim:u(3)}},210:function(t,e){e.f=Object.getOwnPropertySymbols},211:function(t,e,n){var r=n(100);var i=n(68);var a=function(t){return function(e,n){var a=String(i(e));var o=r(n);var s=a.length;var u,c;if(o<0||o>=s)return t?"":void 0;return(u=a.charCodeAt(o))<55296||u>56319||o+1===s||(c=a.charCodeAt(o+1))<56320||c>57343?t?a.charAt(o):u:t?a.slice(o,o+2):c-56320+(u-55296<<10)+65536}};t.exports={codeAt:a(false),charAt:a(true)}},22:function(t,e){function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t.exports=n},227:function(t,e,n){var r=n(37);var i=n(84);var a;var o=n(32)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},23:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(45))},231:function(t,e,n){"use strict";var r=n(27);function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r(function(){var t=i("a","y");t.lastIndex=2;return null!=t.exec("abcd")});e.BROKEN_CARET=r(function(){var t=i("^r","gy");t.lastIndex=2;return null!=t.exec("str")})},237:function(t,e){function n(e,r){t.exports=n=Object.setPrototypeOf||function t(e,n){e.__proto__=n;return e};return n(e,r)}t.exports=n},238:function(t,e,n){var r=n(107);t.exports=r("navigator","userAgent")||""},240:function(t,e,n){var r=n(39);var i=n(292);var a=n(125);var o=n(58);t.exports=function(t,e){var n=i(e);var s=o.f;var u=a.f;for(var c=0;c<n.length;c++){var l=n[c];if(!r(t,l))s(t,l,u(e,l))}}},241:function(t,e,n){var r=n(23);t.exports=r},242:function(t,e,n){var r=n(184);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},243:function(t,e,n){var r=n(204);var i=n(84);var a;var o=n(32)("toStringTag");var s="Arguments"==i(function(){return arguments}());var u=function(t,e){try{return t[e]}catch(t){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),o))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},256:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},260:function(t,e,n){var r=n(23);var i=n(177);var a=r.WeakMap;t.exports="function"===typeof a&&/native code/.test(i(a))},262:function(t,e,n){var r=n(36);var i=n(133);var a;var o=n(32)("species");t.exports=function(t,e){var n=r(t).constructor;var a;return void 0===n||void 0==(a=r(n)[o])?e:i(a)}},27:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return true}}},276:function(t,e,n){var r=n(107);t.exports=r("document","documentElement")},28:function(t,e,n){"use strict";var r=n(171);var i=n(36);var a=n(87);var o=n(62);var s=n(100);var u=n(68);var c=n(197);var l=n(172);var f=Math.max;var h=Math.min;var d=Math.floor;var g=/\$([$&'`]|\d\d?|<[^>]*>)/g;var p=/\$([$&'`]|\d\d?)/g;var v=function(t){return void 0===t?t:String(t)};r("replace",2,function(t,e,n,r){var y=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE;var m=r.REPLACE_KEEPS_$0;var x=y?"$":"$0";return[function n(r,i){var a=u(this);var o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,a,i):e.call(String(a),r,i)},function(t,r){if(!y&&m||"string"===typeof r&&-1===r.indexOf(x)){var a=n(e,t,this,r);if(a.done)return a.value}var u=i(t);var d=String(this);var g="function"===typeof r;if(!g)r=String(r);var p=u.global;if(p){var w=u.unicode;u.lastIndex=0}var S=[];for(;;){var b=l(u,d);if(null===b)break;S.push(b);if(!p)break;var A;if(""===String(b[0]))u.lastIndex=c(d,o(u.lastIndex),w)}var T="";var M=0;for(var C=0;C<S.length;C++){b=S[C];var P=String(b[0]);var L=f(h(s(b.index),d.length),0);var E=[];for(var k=1;k<b.length;k++)E.push(v(b[k]));var V=b.groups;if(g){var O=[P].concat(E,L,d);if(void 0!==V)O.push(V);var I=String(r.apply(void 0,O))}else I=_(P,d,L,E,V,r);if(L>=M){T+=d.slice(M,L)+I;M=L+P.length}}return T+d.slice(M)}];function _(t,n,r,i,o,s){var u=r+t.length;var c=i.length;var l=p;if(void 0!==o){o=a(o);l=g}return e.call(s,l,function(e,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return e;if(l>c){var f=d(l/10);if(0===f)return e;if(f<=c)return void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1);return e}s=i[l-1]}return void 0===s?"":s})}})},284:function(t,e,n){var r=n(37);var i=n(291);t.exports=function(t,e,n){var a,o;if(i&&"function"==typeof(a=e.constructor)&&a!==n&&r(o=a.prototype)&&o!==n.prototype)i(t,o);return t}},289:function(t,e,n){var r=n(49);var i=n(58);var a=n(36);var o=n(182);t.exports=r?Object.defineProperties:function t(e,n){a(e);var r=o(n);var s=r.length;var u=0;var c;for(;s>u;)i.f(e,c=r[u++],n[c]);return e}},29:function(t,e,n){var r=n(23);var i=n(125).f;var a=n(66);var o=n(69);var s=n(154);var u=n(240);var c=n(159);t.exports=function(t,e){var n=t.target;var l=t.global;var f=t.stat;var h,d,g,p,v,y;if(l)d=r;else if(f)d=r[n]||s(n,{});else d=(r[n]||{}).prototype;if(d)for(g in e){v=e[g];if(t.noTargetGet)p=(y=i(d,g))&&y.value;else p=d[g];if(!(h=c(l?g:n+(f?".":"#")+g,t.forced))&&void 0!==p){if(typeof v===typeof p)continue;u(v,p)}if(t.sham||p&&p.sham)a(v,"sham",true);o(d,g,v,t)}}},290:function(t,e,n){"use strict";var r=n(29);var i=n(135);var a=n(89);var o=n(138);var s=[].join;var u=i!=Object;var c=o("join",",");r({target:"Array",proto:true,forced:u||!c},{join:function t(e){return s.call(a(this),void 0===e?",":e)}})},291:function(t,e,n){var r=n(36);var i=n(376);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t=false;var e={};var n;try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]);t=e instanceof Array}catch(t){}return function e(a,o){r(a);i(o);if(t)n.call(a,o);else a.__proto__=o;return a}}():void 0)},292:function(t,e,n){var r=n(107);var i=n(157);var a=n(210);var o=n(36);t.exports=r("Reflect","ownKeys")||function t(e){var n=i.f(o(e));var r=a.f;return r?n.concat(r(e)):n}},3:function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=n},308:function(t,e,n){"use strict";var r=n(107);var i=n(58);var a=n(32);var o=n(49);var s=a("species");t.exports=function(t){var e=r(t);var n=i.f;if(o&&e&&!e[s])n(e,s,{configurable:true,get:function(){return this}})}},315:function(t,e,n){"use strict";var r=n(126).forEach;var i=n(138);var a=n(90);var o=i("forEach");var s=a("forEach");t.exports=!o||!s?function t(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach},32:function(t,e,n){var r=n(23);var i=n(183);var a=n(39);var o=n(165);var s=n(184);var u=n(242);var c=i("wks");var l=r.Symbol;var f=u?l:l&&l.withoutSetter||o;t.exports=function(t){if(!a(c,t))if(s&&a(l,t))c[t]=l[t];else c[t]=f("Symbol."+t);return c[t]}},33:function(t,e,n){var r=n(49);var i=n(58).f;var a=Function.prototype;var o=a.toString;var s=/^\s*function ([^ (]*)/;var u="name";if(r&&!(u in a))i(a,u,{configurable:true,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})},34:function(t,e,n){var r=n(23);var i=n(256);var a=n(315);var o=n(66);for(var s in i){var u=r[s];var c=u&&u.prototype;if(c&&c.forEach!==a)try{o(c,"forEach",a)}catch(t){c.forEach=a}}},351:function(t,e,n){"use strict";var r;var i=function t(){window.bdlf=window.bdlf||{};window.bdlNext=window.bdlNext||{};window.CQ=window.CQ||{};window.$CQ=window.$CQ||{};window.Granite=window.Granite||{};window.Granite.author=window.Granite.author||{};window.Granite.author.edit=window.Granite.author.edit||{};window.barclays=window.barclays||{};window.barclays.bcpublic=window.barclays.bcpublic||{};window.barclays.utils=window.barclays.utils||{};window.barclays.dialogs=window.barclays.dialogs||{};window.barclays.tracking=window.barclays.tracking||{};window.barclays.privacy=window.barclays.privacy||{};window.barclays.componentlibrary=window.barclays.componentlibrary||{};window.barclays.componentlibrary.rte=window.barclays.componentlibrary.rte||{};window.bcpublic=window.bcpublic||{};window.bcpublic.helpandsupport=window.bcpublic.helpandsupport||{};window.bcpublic.helpandsupport.edit=window.bcpublic.helpandsupport.edit||{};window.bcpublic.helpandsupport.global=window.bcpublic.helpandsupport.global||{};window.bcpublic.helpandsupport.contextUI=window.bcpublic.helpandsupport.contextUI||{};window.bcpublic.helpandsupport.i18n=window.bcpublic.helpandsupport.i18n||{};window.NAME=window.NAME||{};window.aemTouchUIValidation=window.aemTouchUIValidation||{};window.aemTouchUIValidation.utils=window.aemTouchUIValidation.utils||{};window.ContextHub=window.ContextHub||{};window.ContextHub.SegmentEngine=window.ContextHub.SegmentEngine||{};window.ContextHub.SegmentEngine.ScriptManager=window.ContextHub.SegmentEngine.ScriptManager||{};window.timeOptions=window.timeOptions||{};window._satellite=window._satellite||{};window._satellite.track=window._satellite.track||function(t){console.log("No tracking library loaded. Would track: ".concat(t))};window.geocoder=window.geocoder||{};window.googleMaps=window.googleMaps||{loaded:false};window.googleClient=window.googleClient||{};window.LazyLoad=window.LazyLoad||{}}()},36:function(t,e,n){var r=n(37);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},37:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},374:function(t,e,n){"use strict";var r=n(204);var i=n(243);t.exports=r?{}.toString:function t(){return"[object "+i(this)+"]"}},376:function(t,e,n){var r=n(37);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},39:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},404:function(t,e,n){var r=n(23);var i=n(205).trim;var a=n(198);var o=r.parseInt;var s=/^[+-]?0[Xx]/;var u=8!==o(a+"08")||22!==o(a+"0x16");t.exports=u?function t(e,n){var r=i(String(e));return o(r,n>>>0||(s.test(r)?16:10))}:o},409:function(t,e,n){"use strict";var r=n(29);var i=n(100);var a=n(694);var o=n(695);var s=n(27);var u=1..toFixed;var c=Math.floor;var l=function(t,e,n){return 0===e?n:e%2===1?l(t,e-1,n*t):l(t*t,e/2,n)};var f=function(t){var e=0;var n=t;for(;n>=4096;){e+=12;n/=4096}for(;n>=2;){e+=1;n/=2}return e};var h;r({target:"Number",proto:true,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s(function(){u.call({})})},{toFixed:function t(e){var n=a(this);var r=i(e);var s=[0,0,0,0,0,0];var u="";var h="0";var d,g,p,v;var y=function(t,e){var n=-1;var r=e;for(;++n<6;){r+=t*s[n];s[n]=r%1e7;r=c(r/1e7)}};var m=function(t){var e=6;var n=0;for(;--e>=0;){n+=s[e];s[e]=c(n/t);n=n%t*1e7}};var x=function(){var t=6;var e="";for(;--t>=0;)if(""!==e||0===t||0!==s[t]){var n=String(s[t]);e=""===e?n:e+o.call("0",7-n.length)+n}return e};if(r<0||r>20)throw RangeError("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return String(n);if(n<0){u="-";n=-n}if(n>1e-21){g=(d=f(n*l(2,69,1))-69)<0?n*l(2,-d,1):n/l(2,d,1);g*=4503599627370496;if((d=52-d)>0){y(0,g);p=r;for(;p>=7;){y(1e7,0);p-=7}y(l(10,p,1),0);p=d-1;for(;p>=23;){m(1<<23);p-=23}m(1<<p);y(1,1);m(2);h=x()}else{y(0,g);y(1<<-d,0);h=x()+o.call("0",r)}}if(r>0)h=u+((v=h.length)<=r?"0."+o.call("0",r-v)+h:h.slice(0,v-r)+"."+h.slice(v-r));else h=u+h;return h}})},42:function(t,e,n){"use strict";var r=n(49);var i=n(23);var a=n(159);var o=n(69);var s=n(39);var u=n(84);var c=n(284);var l=n(120);var f=n(27);var h=n(162);var d=n(157).f;var g=n(125).f;var p=n(58).f;var v=n(205).trim;var y="Number";var m=i.Number;var x=m.prototype;var _=u(h(x))==y;var w=function(t){var e=l(t,false);var n,r,i,a,o,s,u,c;if("string"==typeof e&&e.length>2)if(43===(n=(e=v(e)).charCodeAt(0))||45===n){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===n){switch(e.charCodeAt(1)){case 66:case 98:i=2;a=49;break;case 79:case 111:i=8;a=55;break;default:return+e}s=(o=e.slice(2)).length;for(u=0;u<s;u++)if((c=o.charCodeAt(u))<48||c>a)return NaN;return parseInt(o,i)}return+e};if(a(y,!m(" 0o1")||!m("0b1")||m("+0x1"))){var S=function t(e){var n=arguments.length<1?0:e;var r=this;return r instanceof S&&(_?f(function(){x.valueOf.call(r)}):u(r)!=y)?c(new m(w(n)),r,S):w(n)};for(var b=r?d(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),A=0,T;b.length>A;A++)if(s(m,T=b[A])&&!s(S,T))p(S,T,g(m,T));S.prototype=x;x.constructor=S;o(i,y,S)}},43:function(t,e,n){"use strict";var r=n(171);var i=n(227);var a=n(36);var o=n(68);var s=n(262);var u=n(197);var c=n(62);var l=n(172);var f=n(127);var h=n(27);var d=[].push;var g=Math.min;var p=4294967295;var v=!h(function(){return!RegExp(4294967295,"y")});r("split",2,function(t,e,n){var r;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length)r=function(t,n){var r=String(o(this));var a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,a);var s=[];var u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":"");var c=0;var l=new RegExp(t.source,u+"g");var h,g,p;for(;h=f.call(l,r);){if((g=l.lastIndex)>c){s.push(r.slice(c,h.index));if(h.length>1&&h.index<r.length)d.apply(s,h.slice(1));p=h[0].length;c=g;if(s.length>=a)break}if(l.lastIndex===h.index)l.lastIndex++}if(c===r.length){if(p||!l.test(""))s.push("")}else s.push(r.slice(c));return s.length>a?s.slice(0,a):s};else if("0".split(void 0,0).length)r=function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)};else r=e;return[function e(n,i){var a=o(this);var s=void 0==n?void 0:n[t];return void 0!==s?s.call(n,a,i):r.call(String(a),n,i)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var f=a(t);var h=String(this);var d=s(f,RegExp);var p=f.unicode;var y=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(v?"y":"g");var m=new d(v?f:"^(?:"+f.source+")",y);var x=void 0===i?4294967295:i>>>0;if(0===x)return[];if(0===h.length)return null===l(m,h)?[h]:[];var _=0;var w=0;var S=[];for(;w<h.length;){m.lastIndex=v?w:0;var b=l(m,v?h:h.slice(w));var A;if(null===b||(A=g(c(m.lastIndex+(v?0:w)),h.length))===_)w=u(h,w,p);else{S.push(h.slice(_,w));if(S.length===x)return S;for(var T=1;T<=b.length-1;T++){S.push(b[T]);if(S.length===x)return S}w=_=A}}S.push(h.slice(_));return S}]},!v)},44:function(t,e,n){"use strict";var r=n(69);var i=n(36);var a=n(27);var o=n(191);var s="toString";var u=RegExp.prototype;var c=u.toString;var l=a(function(){return"/a/b"!=c.call({source:"a",flags:"b"})});var f=c.name!=s;if(l||f)r(RegExp.prototype,s,function t(){var e=i(this);var n=String(e.source);var r=e.flags;var a;return"/"+n+"/"+String(void 0===r&&e instanceof RegExp&&!("flags"in u)?o.call(e):r)},{unsafe:true})},45:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){if("object"===typeof window)n=window}t.exports=n},48:function(t,e,n){"use strict";var r=n(29);var i=n(37);var a=n(152);var o=n(169);var s=n(62);var u=n(89);var c=n(178);var l=n(32);var f=n(134);var h=n(90);var d=f("slice");var g=h("slice",{ACCESSORS:true,0:0,1:2});var p=l("species");var v=[].slice;var y=Math.max;r({target:"Array",proto:true,forced:!d||!g},{slice:function t(e,n){var r=u(this);var l=s(r.length);var f=o(e,l);var h=o(void 0===n?l:n,l);var d,g,m;if(a(r)){if("function"==typeof(d=r.constructor)&&(d===Array||a(d.prototype)))d=void 0;else if(i(d))if(null===(d=d[p]))d=void 0;if(d===Array||void 0===d)return v.call(r,f,h)}g=new(void 0===d?Array:d)(y(h-f,0));for(m=0;f<h;f++,m++)if(f in r)c(g,m,r[f]);g.length=m;return g}})},49:function(t,e,n){var r=n(27);t.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},507:function(t,e,n){(function(t,r){var i;(function(){var a;var o="4.17.21";var s=200;var u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",l="Invalid `variable` option passed into `_.template`";var f="__lodash_hash_undefined__";var h=500;var d="__lodash_placeholder__";var g=1,p=2,v=4;var y=1,m=2;var x=1,_=2,w=4,S=8,b=16,A=32,T=64,M=128,C=256,P=512;var L=30,E="...";var k=800,V=16;var O=1,I=2,R=3;var G=1/0,N=9007199254740991,D=1.7976931348623157e308,F=NaN;var z=4294967295,j=z-1,X=z>>>1;var B=[["ary",M],["bind",x],["bindKey",_],["curry",S],["curryRight",b],["flip",P],["partial",A],["partialRight",T],["rearg",C]];var H="[object Arguments]",Y="[object Array]",U="[object AsyncFunction]",W="[object Boolean]",q="[object Date]",Q="[object DOMException]",$="[object Error]",Z="[object Function]",K="[object GeneratorFunction]",J="[object Map]",tt="[object Number]",et="[object Null]",nt="[object Object]",rt="[object Promise]",it="[object Proxy]",at="[object RegExp]",ot="[object Set]",st="[object String]",ut="[object Symbol]",ct="[object Undefined]",lt="[object WeakMap]",ft="[object WeakSet]";var ht="[object ArrayBuffer]",dt="[object DataView]",gt="[object Float32Array]",pt="[object Float64Array]",vt="[object Int8Array]",yt="[object Int16Array]",mt="[object Int32Array]",xt="[object Uint8Array]",_t="[object Uint8ClampedArray]",wt="[object Uint16Array]",St="[object Uint32Array]";var bt=/\b__p \+= '';/g,At=/\b(__p \+=) '' \+/g,Tt=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var Mt=/&(?:amp|lt|gt|quot|#39);/g,Ct=/[&<>"']/g,Pt=RegExp(Mt.source),Lt=RegExp(Ct.source);var Et=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,Vt=/<%=([\s\S]+?)%>/g;var Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,It=/^\w*$/,Rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var Gt=/[\\^$.*+?()[\]{}|]/g,Nt=RegExp(Gt.source);var Dt=/^\s+/;var Ft=/\s/;var zt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jt=/\{\n\/\* \[wrapped with (.+)\] \*/,Xt=/,? & /;var Bt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Ht=/[()=,{}\[\]\/\s]/;var Yt=/\\(\\)?/g;var Ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var Wt=/\w*$/;var qt=/^[-+]0x[0-9a-f]+$/i;var Qt=/^0b[01]+$/i;var $t=/^\[object .+?Constructor\]$/;var Zt=/^0o[0-7]+$/i;var Kt=/^(?:0|[1-9]\d*)$/;var Jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var te=/($^)/;var ee=/['\n\r\u2028\u2029\\]/g;var ne="\\ud800-\\udfff",re="\\u0300-\\u036f",ie="\\ufe20-\\ufe2f",ae="\\u20d0-\\u20ff",oe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",se="\\u2700-\\u27bf",ue="a-z\\xdf-\\xf6\\xf8-\\xff",ce,le,fe="\\u2000-\\u206f",he,de="A-Z\\xc0-\\xd6\\xd8-\\xde",ge="\\ufe0e\\ufe0f",pe="\\xac\\xb1\\xd7\\xf7"+"\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf"+"\\u2000-\\u206f"+" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000";var ve="['\u2019]",ye="[\\ud800-\\udfff]",me="["+pe+"]",xe="["+oe+"]",_e="\\d+",we="[\\u2700-\\u27bf]",Se="["+ue+"]",be="[^"+ne+pe+_e+se+ue+de+"]",Ae="\\ud83c[\\udffb-\\udfff]",Te,Me="[^\\ud800-\\udfff]",Ce="(?:\\ud83c[\\udde6-\\uddff]){2}",Pe="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="["+de+"]",Ee="\\u200d";var ke="(?:"+Se+"|"+be+")",Ve="(?:"+Le+"|"+be+")",Oe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ie="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Re="(?:"+xe+"|"+Ae+")"+"?",Ge="[\\ufe0e\\ufe0f]?",Ne,De="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ze=Ge+Re+("(?:\\u200d(?:"+[Me,Ce,Pe].join("|")+")"+Ge+Re+")*"),je="(?:"+[we,Ce,Pe].join("|")+")"+ze,Xe="(?:"+[Me+xe+"?",xe,Ce,Pe,ye].join("|")+")";var Be=RegExp("['\u2019]","g");var He=RegExp(xe,"g");var Ye=RegExp(Ae+"(?="+Ae+")|"+Xe+ze,"g");var Ue=RegExp([Le+"?"+Se+"+"+Oe+"(?="+[me,Le,"$"].join("|")+")",Ve+"+"+Ie+"(?="+[me,Le+ke,"$"].join("|")+")",Le+"?"+ke+"+"+Oe,Le+"+"+Ie,Fe,De,_e,je].join("|"),"g");var We=RegExp("["+Ee+ne+oe+ge+"]");var qe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Qe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var $e=-1;var Ze={};Ze[gt]=Ze[pt]=Ze[vt]=Ze[yt]=Ze[mt]=Ze[xt]=Ze[_t]=Ze[wt]=Ze[St]=true;Ze[H]=Ze[Y]=Ze[ht]=Ze[W]=Ze[dt]=Ze[q]=Ze[$]=Ze[Z]=Ze[J]=Ze[tt]=Ze[nt]=Ze[at]=Ze[ot]=Ze[st]=Ze[lt]=false;var Ke={};Ke[H]=Ke[Y]=Ke[ht]=Ke[dt]=Ke[W]=Ke[q]=Ke[gt]=Ke[pt]=Ke[vt]=Ke[yt]=Ke[mt]=Ke[J]=Ke[tt]=Ke[nt]=Ke[at]=Ke[ot]=Ke[st]=Ke[ut]=Ke[xt]=Ke[_t]=Ke[wt]=Ke[St]=true;Ke[$]=Ke[Z]=Ke[lt]=false;var Je={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"};var tn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var en={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var nn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var rn=parseFloat,an=parseInt;var on="object"==typeof t&&t&&t.Object===Object&&t;var sn="object"==typeof self&&self&&self.Object===Object&&self;var un=on||sn||Function("return this")();var cn=e&&!e.nodeType&&e;var ln=cn&&"object"==typeof r&&r&&!r.nodeType&&r;var fn=ln&&ln.exports===cn;var hn=fn&&on.process;var dn=function(){try{var t=ln&&ln.require&&ln.require("util").types;if(t)return t;return hn&&hn.binding&&hn.binding("util")}catch(t){}}();var gn=dn&&dn.isArrayBuffer,pn=dn&&dn.isDate,vn=dn&&dn.isMap,yn=dn&&dn.isRegExp,mn=dn&&dn.isSet,xn=dn&&dn.isTypedArray;function _n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function wn(t,e,n,r){var i=-1,a=null==t?0:t.length;for(;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}function Sn(t,e){var n=-1,r=null==t?0:t.length;for(;++n<r&&false!==e(t[n],n,t););return t}function bn(t,e){var n=null==t?0:t.length;for(;n--&&false!==e(t[n],n,t););return t}function An(t,e){var n=-1,r=null==t?0:t.length;for(;++n<r;)if(!e(t[n],n,t))return false;return true}function Tn(t,e){var n=-1,r=null==t?0:t.length,i=0,a=[];for(;++n<r;){var o=t[n];if(e(o,n,t))a[i++]=o}return a}function Mn(t,e){var n;return!!(null==t?0:t.length)&&Dn(t,e,0)>-1}function Cn(t,e,n){var r=-1,i=null==t?0:t.length;for(;++r<i;)if(n(e,t[r]))return true;return false}function Pn(t,e){var n=-1,r=null==t?0:t.length,i=Array(r);for(;++n<r;)i[n]=e(t[n],n,t);return i}function Ln(t,e){var n=-1,r=e.length,i=t.length;for(;++n<r;)t[i+n]=e[n];return t}function En(t,e,n,r){var i=-1,a=null==t?0:t.length;if(r&&a)n=t[++i];for(;++i<a;)n=e(n,t[i],i,t);return n}function kn(t,e,n,r){var i=null==t?0:t.length;if(r&&i)n=t[--i];for(;i--;)n=e(n,t[i],i,t);return n}function Vn(t,e){var n=-1,r=null==t?0:t.length;for(;++n<r;)if(e(t[n],n,t))return true;return false}var On=Xn("length");function In(t){return t.split("")}function Rn(t){return t.match(Bt)||[]}function Gn(t,e,n){var r;n(t,function(t,n,i){if(e(t,n,i)){r=n;return false}});return r}function Nn(t,e,n,r){var i=t.length,a=n+(r?1:-1);for(;r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function Dn(t,e,n){return e===e?gr(t,e,n):Nn(t,zn,n)}function Fn(t,e,n,r){var i=n-1,a=t.length;for(;++i<a;)if(r(t[i],e))return i;return-1}function zn(t){return t!==t}function jn(t,e){var n=null==t?0:t.length;return n?Un(t,e)/n:F}function Xn(t){return function(e){return null==e?a:e[t]}}function Bn(t){return function(e){return null==t?a:t[e]}}function Hn(t,e,n,r,i){i(t,function(t,i,a){n=r?(r=false,t):e(n,t,i,a)});return n}function Yn(t,e){var n=t.length;t.sort(e);for(;n--;)t[n]=t[n].value;return t}function Un(t,e){var n,r=-1,i=t.length;for(;++r<i;){var o=e(t[r]);if(o!==a)n=n===a?o:n+o}return n}function Wn(t,e){var n=-1,r=Array(t);for(;++n<t;)r[n]=e(n);return r}function qn(t,e){return Pn(e,function(e){return[e,t[e]]})}function Qn(t){return t?t.slice(0,mr(t)+1).replace(Dt,""):t}function $n(t){return function(e){return t(e)}}function Zn(t,e){return Pn(e,function(e){return t[e]})}function Kn(t,e){return t.has(e)}function Jn(t,e){var n=-1,r=t.length;for(;++n<r&&Dn(e,t[n],0)>-1;);return n}function tr(t,e){var n=t.length;for(;n--&&Dn(e,t[n],0)>-1;);return n}function er(t,e){var n=t.length,r=0;for(;n--;)if(t[n]===e)++r;return r}var nr=Bn(Je);var rr=Bn(tn);function ir(t){return"\\"+nn[t]}function ar(t,e){return null==t?a:t[e]}function or(t){return We.test(t)}function sr(t){return qe.test(t)}function ur(t){var e,n=[];for(;!(e=t.next()).done;)n.push(e.value);return n}function cr(t){var e=-1,n=Array(t.size);t.forEach(function(t,r){n[++e]=[r,t]});return n}function lr(t,e){return function(n){return t(e(n))}}function fr(t,e){var n=-1,r=t.length,i=0,a=[];for(;++n<r;){var o=t[n];if(o===e||o===d){t[n]=d;a[i++]=n}}return a}function hr(t){var e=-1,n=Array(t.size);t.forEach(function(t){n[++e]=t});return n}function dr(t){var e=-1,n=Array(t.size);t.forEach(function(t){n[++e]=[t,t]});return n}function gr(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}function pr(t,e,n){var r=n+1;for(;r--;)if(t[r]===e)return r;return r}function vr(t){return or(t)?_r(t):On(t)}function yr(t){return or(t)?wr(t):In(t)}function mr(t){var e=t.length;for(;e--&&Ft.test(t.charAt(e)););return e}var xr=Bn(en);function _r(t){var e=Ye.lastIndex=0;for(;Ye.test(t);)++e;return e}function wr(t){return t.match(Ye)||[]}function Sr(t){return t.match(Ue)||[]}var br;var Ar=function t(e){var n=(e=null==e?un:Ar.defaults(un.Object(),e,Ar.pick(un,Qe))).Array,r=e.Date,i=e.Error,R=e.Function,Ft=e.Math,Bt=e.Object,ne=e.RegExp,re=e.String,ie=e.TypeError;var ae=n.prototype,oe=R.prototype,se=Bt.prototype;var ue=e["__core-js_shared__"];var ce=oe.toString;var le=se.hasOwnProperty;var fe=0;var he=(de=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+de:"";var de;var ge=se.toString;var pe=ce.call(Bt);var ve=un._;var ye=ne("^"+ce.call(le).replace(Gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var me=fn?e.Buffer:a,xe=e.Symbol,_e=e.Uint8Array,we=me?me.allocUnsafe:a,Se=lr(Bt.getPrototypeOf,Bt),be=Bt.create,Ae=se.propertyIsEnumerable,Te=ae.splice,Me=xe?xe.isConcatSpreadable:a,Ce=xe?xe.iterator:a,Pe=xe?xe.toStringTag:a;var Le=function(){try{var t=Wo(Bt,"defineProperty");t({},"",{});return t}catch(t){}}();var Ee=e.clearTimeout!==un.clearTimeout&&e.clearTimeout,ke=r&&r.now!==un.Date.now&&r.now,Ve=e.setTimeout!==un.setTimeout&&e.setTimeout;var Oe=Ft.ceil,Ie=Ft.floor,Re=Bt.getOwnPropertySymbols,Ge=me?me.isBuffer:a,Ne=e.isFinite,De=ae.join,Fe=lr(Bt.keys,Bt),ze=Ft.max,je=Ft.min,Xe=r.now,Ye=e.parseInt,Ue=Ft.random,We=ae.reverse;var qe=Wo(e,"DataView"),Je=Wo(e,"Map"),tn=Wo(e,"Promise"),en=Wo(e,"Set"),nn=Wo(e,"WeakMap"),on=Wo(Bt,"create");var sn=nn&&new nn;var cn={};var ln=Vs(qe),hn=Vs(Je),dn=Vs(tn),On=Vs(en),In=Vs(nn);var Bn=xe?xe.prototype:a,gr=Bn?Bn.valueOf:a,_r=Bn?Bn.toString:a;function wr(t){if(Tl(t)&&!ul(t)&&!(t instanceof Cr)){if(t instanceof Mr)return t;if(le.call(t,"__wrapped__"))return Is(t)}return new Mr(t)}var br=function(){function t(){}return function(e){if(!Al(e))return{};if(be)return be(e);t.prototype=e;var n=new t;t.prototype=a;return n}}();function Tr(){}function Mr(t,e){this.__wrapped__=t;this.__actions__=[];this.__chain__=!!e;this.__index__=0;this.__values__=a}wr.templateSettings={escape:Et,evaluate:kt,interpolate:Vt,variable:"",imports:{_:wr}};wr.prototype=Tr.prototype;wr.prototype.constructor=wr;Mr.prototype=br(Tr.prototype);Mr.prototype.constructor=Mr;function Cr(t){this.__wrapped__=t;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=z;this.__views__=[]}function Pr(){var t=new Cr(this.__wrapped__);t.__actions__=ro(this.__actions__);t.__dir__=this.__dir__;t.__filtered__=this.__filtered__;t.__iteratees__=ro(this.__iteratees__);t.__takeCount__=this.__takeCount__;t.__views__=ro(this.__views__);return t}function Lr(){if(this.__filtered__){var t=new Cr(this);t.__dir__=-1;t.__filtered__=true}else(t=this.clone()).__dir__*=-1;return t}function Er(){var t=this.__wrapped__.value(),e=this.__dir__,n=ul(t),r=e<0,i=n?t.length:0,a=Ko(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=r?s:o-1,l=this.__iteratees__,f=l.length,h=0,d=je(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return Da(t,this.__actions__);var g=[];t:for(;u--&&h<d;){var p=-1,v=t[c+=e];for(;++p<f;){var y=l[p],m=y.iteratee,x=y.type,_=m(v);if(x==I)v=_;else if(!_)if(x==O)continue t;else break t}g[h++]=v}return g}Cr.prototype=br(Tr.prototype);Cr.prototype.constructor=Cr;function kr(t){var e=-1,n=null==t?0:t.length;this.clear();for(;++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vr(){this.__data__=on?on(null):{};this.size=0}function Or(t){var e=this.has(t)&&delete this.__data__[t];this.size-=e?1:0;return e}function Ir(t){var e=this.__data__;if(on){var n=e[t];return n===f?a:n}return le.call(e,t)?e[t]:a}function Rr(t){var e=this.__data__;return on?e[t]!==a:le.call(e,t)}function Gr(t,e){var n=this.__data__;this.size+=this.has(t)?0:1;n[t]=on&&e===a?f:e;return this}kr.prototype.clear=Vr;kr.prototype.delete=Or;kr.prototype.get=Ir;kr.prototype.has=Rr;kr.prototype.set=Gr;function Nr(t){var e=-1,n=null==t?0:t.length;this.clear();for(;++e<n;){var r=t[e];this.set(r[0],r[1])}}function Dr(){this.__data__=[];this.size=0}function Fr(t){var e=this.__data__,n=li(e,t);if(n<0)return false;var r;if(n==e.length-1)e.pop();else Te.call(e,n,1);--this.size;return true}function zr(t){var e=this.__data__,n=li(e,t);return n<0?a:e[n][1]}function jr(t){return li(this.__data__,t)>-1}function Xr(t,e){var n=this.__data__,r=li(n,t);if(r<0){++this.size;n.push([t,e])}else n[r][1]=e;return this}Nr.prototype.clear=Dr;Nr.prototype.delete=Fr;Nr.prototype.get=zr;Nr.prototype.has=jr;Nr.prototype.set=Xr;function Br(t){var e=-1,n=null==t?0:t.length;this.clear();for(;++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hr(){this.size=0;this.__data__={hash:new kr,map:new(Je||Nr),string:new kr}}function Yr(t){var e=Yo(this,t).delete(t);this.size-=e?1:0;return e}function Ur(t){return Yo(this,t).get(t)}function Wr(t){return Yo(this,t).has(t)}function qr(t,e){var n=Yo(this,t),r=n.size;n.set(t,e);this.size+=n.size==r?0:1;return this}Br.prototype.clear=Hr;Br.prototype.delete=Yr;Br.prototype.get=Ur;Br.prototype.has=Wr;Br.prototype.set=qr;function Qr(t){var e=-1,n=null==t?0:t.length;this.__data__=new Br;for(;++e<n;)this.add(t[e])}function $r(t){this.__data__.set(t,f);return this}function Zr(t){return this.__data__.has(t)}Qr.prototype.add=Qr.prototype.push=$r;Qr.prototype.has=Zr;function Kr(t){var e=this.__data__=new Nr(t);this.size=e.size}function Jr(){this.__data__=new Nr;this.size=0}function ti(t){var e=this.__data__,n=e.delete(t);this.size=e.size;return n}function ei(t){return this.__data__.get(t)}function ni(t){return this.__data__.has(t)}function ri(t,e){var n=this.__data__;if(n instanceof Nr){var r=n.__data__;if(!Je||r.length<s-1){r.push([t,e]);this.size=++n.size;return this}n=this.__data__=new Br(r)}n.set(t,e);this.size=n.size;return this}Kr.prototype.clear=Jr;Kr.prototype.delete=ti;Kr.prototype.get=ei;Kr.prototype.has=ni;Kr.prototype.set=ri;function ii(t,e){var n=ul(t),r=!n&&sl(t),i=!n&&!r&&dl(t),a=!n&&!r&&!i&&zl(t),o=n||r||i||a,s=o?Wn(t.length,re):[],u=s.length;for(var c in t)if((e||le.call(t,c))&&!(o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||os(c,u))))s.push(c);return s}function ai(t){var e=t.length;return e?t[ya(0,e-1)]:a}function oi(t,e){return Ls(ro(t),vi(e,0,t.length))}function si(t){return Ls(ro(t))}function ui(t,e,n){if(n!==a&&!il(t[e],n)||n===a&&!(e in t))gi(t,e,n)}function ci(t,e,n){var r=t[e];if(!(le.call(t,e)&&il(r,n))||n===a&&!(e in t))gi(t,e,n)}function li(t,e){var n=t.length;for(;n--;)if(il(t[n][0],e))return n;return-1}function fi(t,e,n,r){Si(t,function(t,i,a){e(r,t,n(t),a)});return r}function hi(t,e){return t&&io(e,bf(e),t)}function di(t,e){return t&&io(e,Af(e),t)}function gi(t,e,n){if("__proto__"==e&&Le)Le(t,e,{configurable:true,enumerable:true,value:n,writable:true});else t[e]=n}function pi(t,e){var r=-1,i=e.length,o=n(i),s=null==t;for(;++r<i;)o[r]=s?a:yf(t,e[r]);return o}function vi(t,e,n){if(t===t){if(n!==a)t=t<=n?t:n;if(e!==a)t=t>=e?t:e}return t}function yi(t,e,n,r,i,o){var s,u=e&g,c=e&p,l=e&v;if(n)s=i?n(t,r,i,o):n(t);if(s!==a)return s;if(!Al(t))return t;var f=ul(t);if(f){s=es(t);if(!u)return ro(t,s)}else{var h=Zo(t),d=h==Z||h==K;if(dl(t))return Wa(t,u);if(h==nt||h==H||d&&!i){s=c||d?{}:ns(t);if(!u)return c?oo(t,di(s,t)):ao(t,hi(s,t))}else{if(!Ke[h])return i?t:{};s=rs(t,h,u)}}o||(o=new Kr);var y=o.get(t);if(y)return y;o.set(t,s);if(Nl(t))t.forEach(function(r){s.add(yi(r,e,n,r,t,o))});else if(Ml(t))t.forEach(function(r,i){s.set(i,yi(r,e,n,i,t,o))});var m;var x=f?a:(l?c?zo:Fo:c?Af:bf)(t);Sn(x||t,function(r,i){if(x)r=t[i=r];ci(s,i,yi(r,e,n,i,t,o))});return s}function mi(t){var e=bf(t);return function(n){return xi(n,t,e)}}function xi(t,e,n){var r=n.length;if(null==t)return!r;t=Bt(t);for(;r--;){var i=n[r],o=e[i],s=t[i];if(s===a&&!(i in t)||!o(s))return false}return true}function _i(t,e,n){if("function"!=typeof t)throw new ie(c);return Ts(function(){t.apply(a,n)},e)}function wi(t,e,n,r){var i=-1,a=Mn,o=true,u=t.length,c=[],l=e.length;if(!u)return c;if(n)e=Pn(e,$n(n));if(r){a=Cn;o=false}else if(e.length>=s){a=Kn;o=false;e=new Qr(e)}t:for(;++i<u;){var f=t[i],h=null==n?f:n(f);f=r||0!==f?f:0;if(o&&h===h){var d=l;for(;d--;)if(e[d]===h)continue t;c.push(f)}else if(!a(e,h,r))c.push(f)}return c}var Si=co(ki);var bi=co(Vi,true);function Ai(t,e){var n=true;Si(t,function(t,r,i){return n=!!e(t,r,i)});return n}function Ti(t,e,n){var r=-1,i=t.length;for(;++r<i;){var o=t[r],s=e(o);if(null!=s&&(u===a?s===s&&!Fl(s):n(s,u)))var u=s,c=o}return c}function Mi(t,e,n,r){var i=t.length;if((n=ql(n))<0)n=-n>i?0:i+n;if((r=r===a||r>i?i:ql(r))<0)r+=i;r=n>r?0:Ql(r);for(;n<r;)t[n++]=e;return t}function Ci(t,e){var n=[];Si(t,function(t,r,i){if(e(t,r,i))n.push(t)});return n}function Pi(t,e,n,r,i){var a=-1,o=t.length;n||(n=as);i||(i=[]);for(;++a<o;){var s=t[a];if(e>0&&n(s))if(e>1)Pi(s,e-1,n,r,i);else Ln(i,s);else if(!r)i[i.length]=s}return i}var Li=lo();var Ei=lo(true);function ki(t,e){return t&&Li(t,e,bf)}function Vi(t,e){return t&&Ei(t,e,bf)}function Oi(t,e){return Tn(e,function(e){return wl(t[e])})}function Ii(t,e){var n=0,r=(e=Ba(e,t)).length;for(;null!=t&&n<r;)t=t[ks(e[n++])];return n&&n==r?t:a}function Ri(t,e,n){var r=e(t);return ul(t)?r:Ln(r,n(t))}function Gi(t){if(null==t)return t===a?ct:et;return Pe&&Pe in Bt(t)?qo(t):xs(t)}function Ni(t,e){return t>e}function Di(t,e){return null!=t&&le.call(t,e)}function Fi(t,e){return null!=t&&e in Bt(t)}function zi(t,e,n){return t>=je(e,n)&&t<ze(e,n)}function ji(t,e,r){var i=r?Cn:Mn,o=t[0].length,s=t.length,u=s,c=n(s),l=1/0,f=[];for(;u--;){var h=t[u];if(u&&e)h=Pn(h,$n(e));l=je(h.length,l);c[u]=!r&&(e||o>=120&&h.length>=120)?new Qr(u&&h):a}h=t[0];var d=-1,g=c[0];t:for(;++d<o&&f.length<l;){var p=h[d],v=e?e(p):p;p=r||0!==p?p:0;if(!(g?Kn(g,v):i(f,v,r))){u=s;for(;--u;){var y=c[u];if(!(y?Kn(y,v):i(t[u],v,r)))continue t}if(g)g.push(v);f.push(p)}}return f}function Xi(t,e,n,r){ki(t,function(t,i,a){e(r,n(t),i,a)});return r}function Bi(t,e,n){var r=null==(t=ws(t,e=Ba(e,t)))?t:t[ks(au(e))];return null==r?a:_n(r,t,n)}function Hi(t){return Tl(t)&&Gi(t)==H}function Yi(t){return Tl(t)&&Gi(t)==ht}function Ui(t){return Tl(t)&&Gi(t)==q}function Wi(t,e,n,r,i){if(t===e)return true;if(null==t||null==e||!Tl(t)&&!Tl(e))return t!==t&&e!==e;return qi(t,e,n,r,Wi,i)}function qi(t,e,n,r,i,a){var o=ul(t),s=ul(e),u=o?Y:Zo(t),c=s?Y:Zo(e);var l=(u=u==H?nt:u)==nt,f=(c=c==H?nt:c)==nt,h=u==c;if(h&&dl(t)){if(!dl(e))return false;o=true;l=false}if(h&&!l){a||(a=new Kr);return o||zl(t)?Ro(t,e,n,r,i,a):Go(t,e,u,n,r,i,a)}if(!(n&y)){var d=l&&le.call(t,"__wrapped__"),g=f&&le.call(e,"__wrapped__");if(d||g){var p=d?t.value():t,v=g?e.value():e;a||(a=new Kr);return i(p,v,n,r,a)}}if(!h)return false;a||(a=new Kr);return No(t,e,n,r,i,a)}function Qi(t){return Tl(t)&&Zo(t)==J}function $i(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;t=Bt(t);for(;i--;){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return false}for(;++i<o;){var c=(u=n[i])[0],l=t[c],f=u[1];if(s&&u[2]){if(l===a&&!(c in t))return false}else{var h=new Kr;if(r)var d=r(l,f,c,t,e,h);if(!(d===a?Wi(f,l,y|m,r,h):d))return false}}return true}function Zi(t){if(!Al(t)||fs(t))return false;var e;return(wl(t)?ye:$t).test(Vs(t))}function Ki(t){return Tl(t)&&Gi(t)==at}function Ji(t){return Tl(t)&&Zo(t)==ot}function ta(t){return Tl(t)&&bl(t.length)&&!!Ze[Gi(t)]}function ea(t){if("function"==typeof t)return t;if(null==t)return kh;if("object"==typeof t)return ul(t)?sa(t[0],t[1]):oa(t);return Hh(t)}function na(t){if(!ds(t))return Fe(t);var e=[];for(var n in Bt(t))if(le.call(t,n)&&"constructor"!=n)e.push(n);return e}function ra(t){if(!Al(t))return ms(t);var e=ds(t),n=[];for(var r in t)if(!("constructor"==r&&(e||!le.call(t,r))))n.push(r);return n}function ia(t,e){return t<e}function aa(t,e){var r=-1,i=ll(t)?n(t.length):[];Si(t,function(t,n,a){i[++r]=e(t,n,a)});return i}function oa(t){var e=Uo(t);if(1==e.length&&e[0][2])return ps(e[0][0],e[0][1]);return function(n){return n===t||$i(n,t,e)}}function sa(t,e){if(us(t)&&gs(e))return ps(ks(t),e);return function(n){var r=yf(n,t);return r===a&&r===e?xf(n,t):Wi(e,r,y|m)}}function ua(t,e,n,r,i){if(t===e)return;Li(e,function(o,s){i||(i=new Kr);if(Al(o))ca(t,e,s,n,ua,r,i);else{var u=r?r(bs(t,s),o,s+"",t,e,i):a;if(u===a)u=o;ui(t,s,u)}},Af)}function ca(t,e,n,r,i,o,s){var u=bs(t,n),c=bs(e,n),l=s.get(c);if(l){ui(t,n,l);return}var f=o?o(u,c,n+"",t,e,s):a;var h=f===a;if(h){var d=ul(c),g=!d&&dl(c),p=!d&&!g&&zl(c);f=c;if(d||g||p)if(ul(u))f=u;else if(fl(u))f=ro(u);else if(g){h=false;f=Wa(c,true)}else if(p){h=false;f=Ka(c,true)}else f=[];else if(Il(c)||sl(c)){f=u;if(sl(u))f=Zl(u);else if(!Al(u)||wl(u))f=ns(c)}else h=false}if(h){s.set(c,f);i(f,c,r,o,s);s.delete(c)}ui(t,n,f)}function la(t,e){var n=t.length;if(!n)return;return os(e+=e<0?n:0,n)?t[e]:a}function fa(t,e,n){if(e.length)e=Pn(e,function(t){if(ul(t))return function(e){return Ii(e,1===t.length?t[0]:t)};return t});else e=[kh];var r=-1;e=Pn(e,$n(Ho()));var i;return Yn(aa(t,function(t,n,i){var a;return{criteria:Pn(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return to(t,e,n)})}function ha(t,e){return da(t,e,function(e,n){return xf(t,n)})}function da(t,e,n){var r=-1,i=e.length,a={};for(;++r<i;){var o=e[r],s=Ii(t,o);if(n(s,o))ba(a,Ba(o,t),s)}return a}function ga(t){return function(e){return Ii(e,t)}}function pa(t,e,n,r){var i=r?Fn:Dn,a=-1,o=e.length,s=t;if(t===e)e=ro(e);if(n)s=Pn(t,$n(n));for(;++a<o;){var u=0,c=e[a],l=n?n(c):c;for(;(u=i(s,l,u,r))>-1;){if(s!==t)Te.call(s,u,1);Te.call(t,u,1)}}return t}function va(t,e){var n=t?e.length:0,r=n-1;for(;n--;){var i=e[n];if(n==r||i!==a){var a=i;if(os(i))Te.call(t,i,1);else Ra(t,i)}}return t}function ya(t,e){return t+Ie(Ue()*(e-t+1))}function ma(t,e,r,i){var a=-1,o=ze(Oe((e-t)/(r||1)),0),s=n(o);for(;o--;){s[i?o:++a]=t;t+=r}return s}function xa(t,e){var n="";if(!t||e<1||e>N)return n;do{if(e%2)n+=t;if(e=Ie(e/2))t+=t}while(e);return n}function _a(t,e){return Ms(_s(t,e,kh),t+"")}function wa(t){return ai(Xf(t))}function Sa(t,e){var n=Xf(t);return Ls(n,vi(e,0,n.length))}function ba(t,e,n,r){if(!Al(t))return t;var i=-1,o=(e=Ba(e,t)).length,s=o-1,u=t;for(;null!=u&&++i<o;){var c=ks(e[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(i!=s){var f=u[c];if((l=r?r(f,c,u):a)===a)l=Al(f)?f:os(e[i+1])?[]:{}}ci(u,c,l);u=u[c]}return t}var Aa=!sn?kh:function(t,e){sn.set(t,e);return t};var Ta=!Le?kh:function(t,e){return Le(t,"toString",{configurable:true,enumerable:false,value:Ch(e),writable:true})};function Ma(t){return Ls(Xf(t))}function Ca(t,e,r){var i=-1,a=t.length;if(e<0)e=-e>a?0:a+e;if((r=r>a?a:r)<0)r+=a;a=e>r?0:r-e>>>0;e>>>=0;var o=n(a);for(;++i<a;)o[i]=t[i+e];return o}function Pa(t,e){var n;Si(t,function(t,r,i){return!(n=e(t,r,i))});return!!n}function La(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=X){for(;r<i;){var a=r+i>>>1,o=t[a];if(null!==o&&!Fl(o)&&(n?o<=e:o<e))r=a+1;else i=a}return i}return Ea(t,e,kh,n)}function Ea(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;var s=(e=n(e))!==e,u=null===e,c=Fl(e),l=e===a;for(;i<o;){var f=Ie((i+o)/2),h=n(t[f]),d=h!==a,g=null===h,p=h===h,v=Fl(h);if(s)var y=r||p;else if(l)y=p&&(r||d);else if(u)y=p&&d&&(r||!g);else if(c)y=p&&d&&!g&&(r||!v);else if(g||v)y=false;else y=r?h<=e:h<e;if(y)i=f+1;else o=f}return je(o,j)}function ka(t,e){var n=-1,r=t.length,i=0,a=[];for(;++n<r;){var o=t[n],s=e?e(o):o;if(!n||!il(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function Va(t){if("number"==typeof t)return t;if(Fl(t))return F;return+t}function Oa(t){if("string"==typeof t)return t;if(ul(t))return Pn(t,Oa)+"";if(Fl(t))return _r?_r.call(t):"";var e=t+"";return"0"==e&&1/t==-G?"-0":e}function Ia(t,e,n){var r=-1,i=Mn,a=t.length,o=true,u=[],c=u;if(n){o=false;i=Cn}else if(a>=s){var l=e?null:Lo(t);if(l)return hr(l);o=false;i=Kn;c=new Qr}else c=e?[]:u;t:for(;++r<a;){var f=t[r],h=e?e(f):f;f=n||0!==f?f:0;if(o&&h===h){var d=c.length;for(;d--;)if(c[d]===h)continue t;if(e)c.push(h);u.push(f)}else if(!i(c,h,n)){if(c!==u)c.push(h);u.push(f)}}return u}function Ra(t,e){return null==(t=ws(t,e=Ba(e,t)))||delete t[ks(au(e))]}function Ga(t,e,n,r){return ba(t,e,n(Ii(t,e)),r)}function Na(t,e,n,r){var i=t.length,a=r?i:-1;for(;(r?a--:++a<i)&&e(t[a],a,t););return n?Ca(t,r?0:a,r?a+1:i):Ca(t,r?a+1:0,r?i:a)}function Da(t,e){var n=t;if(n instanceof Cr)n=n.value();return En(e,function(t,e){return e.func.apply(e.thisArg,Ln([t],e.args))},n)}function Fa(t,e,r){var i=t.length;if(i<2)return i?Ia(t[0]):[];var a=-1,o=n(i);for(;++a<i;){var s=t[a],u=-1;for(;++u<i;)if(u!=a)o[a]=wi(o[a]||s,t[u],e,r)}return Ia(Pi(o,1),e,r)}function za(t,e,n){var r=-1,i=t.length,o=e.length,s={};for(;++r<i;){var u=r<o?e[r]:a;n(s,t[r],u)}return s}function ja(t){return fl(t)?t:[]}function Xa(t){return"function"==typeof t?t:kh}function Ba(t,e){if(ul(t))return t;return us(t,e)?[t]:Es(Jl(t))}var Ha=_a;function Ya(t,e,n){var r=t.length;n=n===a?r:n;return!e&&n>=r?t:Ca(t,e,n)}var Ua=Ee||function(t){return un.clearTimeout(t)};function Wa(t,e){if(e)return t.slice();var n=t.length,r=we?we(n):new t.constructor(n);t.copy(r);return r}function qa(t){var e=new t.constructor(t.byteLength);new _e(e).set(new _e(t));return e}function Qa(t,e){var n=e?qa(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function $a(t){var e=new t.constructor(t.source,Wt.exec(t));e.lastIndex=t.lastIndex;return e}function Za(t){return gr?Bt(gr.call(t)):{}}function Ka(t,e){var n=e?qa(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ja(t,e){if(t!==e){var n=t!==a,r=null===t,i=t===t,o=Fl(t);var s=e!==a,u=null===e,c=e===e,l=Fl(e);if(!u&&!l&&!o&&t>e||o&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||u&&n&&i||!s&&i||!c)return-1}return 0}function to(t,e,n){var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;for(;++r<o;){var u=Ja(i[r],a[r]);if(u){if(r>=s)return u;var c;return u*("desc"==n[r]?-1:1)}}return t.index-e.index}function eo(t,e,r,i){var a=-1,o=t.length,s=r.length,u=-1,c=e.length,l=ze(o-s,0),f=n(c+l),h=!i;for(;++u<c;)f[u]=e[u];for(;++a<s;)if(h||a<o)f[r[a]]=t[a];for(;l--;)f[u++]=t[a++];return f}function no(t,e,r,i){var a=-1,o=t.length,s=-1,u=r.length,c=-1,l=e.length,f=ze(o-u,0),h=n(f+l),d=!i;for(;++a<f;)h[a]=t[a];var g=a;for(;++c<l;)h[g+c]=e[c];for(;++s<u;)if(d||a<o)h[g+r[s]]=t[a++];return h}function ro(t,e){var r=-1,i=t.length;e||(e=n(i));for(;++r<i;)e[r]=t[r];return e}function io(t,e,n,r){var i=!n;n||(n={});var o=-1,s=e.length;for(;++o<s;){var u=e[o];var c=r?r(n[u],t[u],u,n,t):a;if(c===a)c=t[u];if(i)gi(n,u,c);else ci(n,u,c)}return n}function ao(t,e){return io(t,Qo(t),e)}function oo(t,e){return io(t,$o(t),e)}function so(t,e){return function(n,r){var i=ul(n)?wn:fi,a=e?e():{};return i(n,t,Ho(r,2),a)}}function uo(t){return _a(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;o=t.length>3&&"function"==typeof o?(i--,o):a;if(s&&ss(n[0],n[1],s)){o=i<3?a:o;i=1}e=Bt(e);for(;++r<i;){var u=n[r];if(u)t(e,u,r,o)}return e})}function co(t,e){return function(n,r){if(null==n)return n;if(!ll(n))return t(n,r);var i=n.length,a=e?i:-1,o=Bt(n);for(;(e?a--:++a<i)&&false!==r(o[a],a,o););return n}}function lo(t){return function(e,n,r){var i=-1,a=Bt(e),o=r(e),s=o.length;for(;s--;){var u=o[t?s:++i];if(false===n(a[u],u,a))break}return e}}function fo(t,e,n){var r=e&x,i=po(t);function a(){var e;return(this&&this!==un&&this instanceof a?i:t).apply(r?n:this,arguments)}return a}function ho(t){return function(e){var n=or(e=Jl(e))?yr(e):a;var r=n?n[0]:e.charAt(0);var i=n?Ya(n,1).join(""):e.slice(1);return r[t]()+i}}function go(t){return function(e){return En(Sh(Qf(e).replace(Be,"")),t,"")}}function po(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=br(t.prototype),r=t.apply(n,e);return Al(r)?r:n}}function vo(t,e,r){var i=po(t);function o(){var s=arguments.length,u=n(s),c=s,l=Bo(o);for(;c--;)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:fr(u,l);if((s-=f.length)<r)return Co(t,e,xo,o.placeholder,a,u,f,a,a,r-s);var h;return _n(this&&this!==un&&this instanceof o?i:t,this,u)}return o}function yo(t){return function(e,n,r){var i=Bt(e);if(!ll(e)){var o=Ho(n,3);e=bf(e);n=function(t){return o(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:a}}function mo(t){return Do(function(e){var n=e.length,r=n,i=Mr.prototype.thru;if(t)e.reverse();for(;r--;){var o=e[r];if("function"!=typeof o)throw new ie(c);if(i&&!s&&"wrapper"==Xo(o))var s=new Mr([],true)}r=s?r:n;for(;++r<n;){var u=Xo(o=e[r]),l="wrapper"==u?jo(o):a;if(l&&ls(l[0])&&l[1]==(M|S|A|C)&&!l[4].length&&1==l[9])s=s[Xo(l[0])].apply(s,l[3]);else s=1==o.length&&ls(o)?s[u]():s.thru(o)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&ul(r))return s.plant(r).value();var i=0,a=n?e[i].apply(this,t):r;for(;++i<n;)a=e[i].call(this,a);return a}})}function xo(t,e,r,i,o,s,u,c,l,f){var h=e&M,d=e&x,g=e&_,p=e&(S|b),v=e&P,y=g?a:po(t);function m(){var a=arguments.length,x=n(a),_=a;for(;_--;)x[_]=arguments[_];if(p)var w=Bo(m),S=er(x,w);if(i)x=eo(x,i,o,p);if(s)x=no(x,s,u,p);a-=S;if(p&&a<f){var b=fr(x,w);return Co(t,e,xo,m.placeholder,r,x,b,c,l,f-a)}var A=d?r:this,T=g?A[t]:t;a=x.length;if(c)x=Ss(x,c);else if(v&&a>1)x.reverse();if(h&&l<a)x.length=l;if(this&&this!==un&&this instanceof m)T=y||po(T);return T.apply(A,x)}return m}function _o(t,e){return function(n,r){return Xi(n,t,e(r),{})}}function wo(t,e){return function(n,r){var i;if(n===a&&r===a)return e;if(n!==a)i=n;if(r!==a){if(i===a)return r;if("string"==typeof n||"string"==typeof r){n=Oa(n);r=Oa(r)}else{n=Va(n);r=Va(r)}i=t(n,r)}return i}}function So(t){return Do(function(e){e=Pn(e,$n(Ho()));return _a(function(n){var r=this;return t(e,function(t){return _n(t,r,n)})})})}function bo(t,e){var n=(e=e===a?" ":Oa(e)).length;if(n<2)return n?xa(e,t):e;var r=xa(e,Oe(t/vr(e)));return or(e)?Ya(yr(r),0,t).join(""):r.slice(0,t)}function Ao(t,e,r,i){var a=e&x,o=po(t);function s(){var e=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),h=this&&this!==un&&this instanceof s?o:t;for(;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++e];return _n(h,a?r:this,f)}return s}function To(t){return function(e,n,r){if(r&&"number"!=typeof r&&ss(e,n,r))n=r=a;e=Wl(e);if(n===a){n=e;e=0}else n=Wl(n);return ma(e,n,r=r===a?e<n?1:-1:Wl(r),t)}}function Mo(t){return function(e,n){if(!("string"==typeof e&&"string"==typeof n)){e=$l(e);n=$l(n)}return t(e,n)}}function Co(t,e,n,r,i,o,s,u,c,l){var f=e&S,h,d,g,p;e|=f?A:T;if(!((e&=~(f?T:A))&w))e&=~(x|_);var v=[t,e,i,f?o:a,f?s:a,f?a:o,f?a:s,u,c,l];var y=n.apply(a,v);if(ls(t))As(y,v);y.placeholder=r;return Cs(y,t,e)}function Po(t){var e=Ft[t];return function(t,n){t=$l(t);if((n=null==n?0:je(ql(n),292))&&Ne(t)){var r=(Jl(t)+"e").split("e"),i;return+((r=(Jl(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Lo=!(en&&1/hr(new en([,-0]))[1]==G)?Fh:function(t){return new en(t)};function Eo(t){return function(e){var n=Zo(e);if(n==J)return cr(e);if(n==ot)return dr(e);return qn(e,t(e))}}function ko(t,e,n,r,i,o,s,u){var l=e&_;if(!l&&"function"!=typeof t)throw new ie(c);var f=r?r.length:0;if(!f){e&=~(A|T);r=i=a}s=s===a?s:ze(ql(s),0);u=u===a?u:ql(u);f-=i?i.length:0;if(e&T){var h=r,d=i;r=i=a}var g=l?a:jo(t);var p=[t,e,n,r,i,h,d,o,s,u];if(g)ys(p,g);t=p[0];e=p[1];n=p[2];r=p[3];i=p[4];if(!(u=p[9]=p[9]===a?l?0:t.length:ze(p[9]-f,0))&&e&(S|b))e&=~(S|b);if(!e||e==x)var v=fo(t,e,n);else if(e==S||e==b)v=vo(t,e,u);else if((e==A||e==(x|A))&&!i.length)v=Ao(t,e,n,r);else v=xo.apply(a,p);var y;return Cs((g?Aa:As)(v,p),t,e)}function Vo(t,e,n,r){if(t===a||il(t,se[n])&&!le.call(r,n))return e;return t}function Oo(t,e,n,r,i,o){if(Al(t)&&Al(e)){o.set(e,t);ua(t,e,a,Oo,o);o.delete(e)}return t}function Io(t){return Il(t)?a:t}function Ro(t,e,n,r,i,o){var s=n&y,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return false;var l=o.get(t);var f=o.get(e);if(l&&f)return l==e&&f==t;var h=-1,d=true,g=n&m?new Qr:a;o.set(t,e);o.set(e,t);for(;++h<u;){var p=t[h],v=e[h];if(r)var x=s?r(v,p,h,e,t,o):r(p,v,h,t,e,o);if(x!==a){if(x)continue;d=false;break}if(g){if(!Vn(e,function(t,e){if(!Kn(g,e)&&(p===t||i(p,t,n,r,o)))return g.push(e)})){d=false;break}}else if(!(p===v||i(p,v,n,r,o))){d=false;break}}o.delete(t);o.delete(e);return d}function Go(t,e,n,r,i,a,o){switch(n){case dt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return false;t=t.buffer;e=e.buffer;case ht:if(t.byteLength!=e.byteLength||!a(new _e(t),new _e(e)))return false;return true;case W:case q:case tt:return il(+t,+e);case $:return t.name==e.name&&t.message==e.message;case at:case st:return t==e+"";case J:var s=cr;case ot:var u=r&y;s||(s=hr);if(t.size!=e.size&&!u)return false;var c=o.get(t);if(c)return c==e;r|=m;o.set(t,e);var l=Ro(s(t),s(e),r,i,a,o);o.delete(t);return l;case ut:if(gr)return gr.call(t)==gr.call(e)}return false}function No(t,e,n,r,i,o){var s=n&y,u=Fo(t),c=u.length,l,f;if(c!=Fo(e).length&&!s)return false;var h=c;for(;h--;){var d=u[h];if(!(s?d in e:le.call(e,d)))return false}var g=o.get(t);var p=o.get(e);if(g&&p)return g==e&&p==t;var v=true;o.set(t,e);o.set(e,t);var m=s;for(;++h<c;){var x=t[d=u[h]],_=e[d];if(r)var w=s?r(_,x,d,e,t,o):r(x,_,d,t,e,o);if(!(w===a?x===_||i(x,_,n,r,o):w)){v=false;break}m||(m="constructor"==d)}if(v&&!m){var S=t.constructor,b=e.constructor;if(S!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof S&&S instanceof S&&"function"==typeof b&&b instanceof b))v=false}o.delete(t);o.delete(e);return v}function Do(t){return Ms(_s(t,a,qs),t+"")}function Fo(t){return Ri(t,bf,Qo)}function zo(t){return Ri(t,Af,$o)}var jo=!sn?Fh:function(t){return sn.get(t)};function Xo(t){var e=t.name+"",n=cn[e],r=le.call(cn,e)?n.length:0;for(;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function Bo(t){var e;return(le.call(wr,"placeholder")?wr:t).placeholder}function Ho(){var t=wr.iteratee||Vh;t=t===Vh?ea:t;return arguments.length?t(arguments[0],arguments[1]):t}function Yo(t,e){var n=t.__data__;return cs(e)?n["string"==typeof e?"string":"hash"]:n.map}function Uo(t){var e=bf(t),n=e.length;for(;n--;){var r=e[n],i=t[r];e[n]=[r,i,gs(i)]}return e}function Wo(t,e){var n=ar(t,e);return Zi(n)?n:a}function qo(t){var e=le.call(t,Pe),n=t[Pe];try{t[Pe]=a;var r=true}catch(t){}var i=ge.call(t);if(r)if(e)t[Pe]=n;else delete t[Pe];return i}var Qo=!Re?qh:function(t){if(null==t)return[];t=Bt(t);return Tn(Re(t),function(e){return Ae.call(t,e)})};var $o=!Re?qh:function(t){var e=[];for(;t;){Ln(e,Qo(t));t=Se(t)}return e};var Zo=Gi;if(qe&&Zo(new qe(new ArrayBuffer(1)))!=dt||Je&&Zo(new Je)!=J||tn&&Zo(tn.resolve())!=rt||en&&Zo(new en)!=ot||nn&&Zo(new nn)!=lt)Zo=function(t){var e=Gi(t),n=e==nt?t.constructor:a,r=n?Vs(n):"";if(r)switch(r){case ln:return dt;case hn:return J;case dn:return rt;case On:return ot;case In:return lt}return e};function Ko(t,e,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=je(e,t+o);break;case"takeRight":t=ze(t,e-o);break}}return{start:t,end:e}}function Jo(t){var e=t.match(jt);return e?e[1].split(Xt):[]}function ts(t,e,n){var r=-1,i=(e=Ba(e,t)).length,a=false;for(;++r<i;){var o=ks(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}if(a||++r!=i)return a;return!!(i=null==t?0:t.length)&&bl(i)&&os(o,i)&&(ul(t)||sl(t))}function es(t){var e=t.length,n=new t.constructor(e);if(e&&"string"==typeof t[0]&&le.call(t,"index")){n.index=t.index;n.input=t.input}return n}function ns(t){return"function"==typeof t.constructor&&!ds(t)?br(Se(t)):{}}function rs(t,e,n){var r=t.constructor;switch(e){case ht:return qa(t);case W:case q:return new r(+t);case dt:return Qa(t,n);case gt:case pt:case vt:case yt:case mt:case xt:case _t:case wt:case St:return Ka(t,n);case J:return new r;case tt:case st:return new r(t);case at:return $a(t);case ot:return new r;case ut:return Za(t)}}function is(t,e){var n=e.length;if(!n)return t;var r=n-1;e[r]=(n>1?"& ":"")+e[r];e=e.join(n>2?", ":" ");return t.replace(zt,"{\n/* [wrapped with "+e+"] */\n")}function as(t){return ul(t)||sl(t)||!!(Me&&t&&t[Me])}function os(t,e){var n=typeof t;return!!(e=null==e?N:e)&&("number"==n||"symbol"!=n&&Kt.test(t))&&t>-1&&t%1==0&&t<e}function ss(t,e,n){if(!Al(n))return false;var r=typeof e;if("number"==r?ll(n)&&os(e,n.length):"string"==r&&e in n)return il(n[e],t);return false}function us(t,e){if(ul(t))return false;var n=typeof t;if("number"==n||"symbol"==n||"boolean"==n||null==t||Fl(t))return true;return It.test(t)||!Ot.test(t)||null!=e&&t in Bt(e)}function cs(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function ls(t){var e=Xo(t),n=wr[e];if("function"!=typeof n||!(e in Cr.prototype))return false;if(t===n)return true;var r=jo(n);return!!r&&t===r[0]}function fs(t){return!!he&&he in t}var hs=ue?wl:Qh;function ds(t){var e=t&&t.constructor,n;return t===("function"==typeof e&&e.prototype||se)}function gs(t){return t===t&&!Al(t)}function ps(t,e){return function(n){if(null==n)return false;return n[t]===e&&(e!==a||t in Bt(n))}}function vs(t){var e=zc(t,function(t){if(n.size===h)n.clear();return t});var n=e.cache;return e}function ys(t,e){var n=t[1],r=e[1],i=n|r,a=i<(x|_|M);var o=r==M&&n==S||r==M&&n==C&&t[7].length<=e[8]||r==(M|C)&&e[7].length<=e[8]&&n==S;if(!(a||o))return t;if(r&x){t[2]=e[2];i|=n&x?0:w}var s=e[3];if(s){var u=t[3];t[3]=u?eo(u,s,e[4]):s;t[4]=u?fr(t[3],d):e[4]}if(s=e[5]){u=t[5];t[5]=u?no(u,s,e[6]):s;t[6]=u?fr(t[5],d):e[6]}if(s=e[7])t[7]=s;if(r&M)t[8]=null==t[8]?e[8]:je(t[8],e[8]);if(null==t[9])t[9]=e[9];t[0]=e[0];t[1]=i;return t}function ms(t){var e=[];if(null!=t)for(var n in Bt(t))e.push(n);return e}function xs(t){return ge.call(t)}function _s(t,e,r){e=ze(e===a?t.length-1:e,0);return function(){var i=arguments,a=-1,o=ze(i.length-e,0),s=n(o);for(;++a<o;)s[a]=i[e+a];a=-1;var u=n(e+1);for(;++a<e;)u[a]=i[a];u[e]=r(s);return _n(t,this,u)}}function ws(t,e){return e.length<2?t:Ii(t,Ca(e,0,-1))}function Ss(t,e){var n=t.length,r=je(e.length,n),i=ro(t);for(;r--;){var o=e[r];t[r]=os(o,n)?i[o]:a}return t}function bs(t,e){if("constructor"===e&&"function"===typeof t[e])return;if("__proto__"==e)return;return t[e]}var As=Ps(Aa);var Ts=Ve||function(t,e){return un.setTimeout(t,e)};var Ms=Ps(Ta);function Cs(t,e,n){var r=e+"";return Ms(t,is(r,Os(Jo(r),n)))}function Ps(t){var e=0,n=0;return function(){var r=Xe(),i=V-(r-n);n=r;if(i>0){if(++e>=k)return arguments[0]}else e=0;return t.apply(a,arguments)}}function Ls(t,e){var n=-1,r=t.length,i=r-1;e=e===a?r:e;for(;++n<e;){var o=ya(n,i),s=t[o];t[o]=t[n];t[n]=s}t.length=e;return t}var Es=vs(function(t){var e=[];if(46===t.charCodeAt(0))e.push("");t.replace(Rt,function(t,n,r,i){e.push(r?i.replace(Yt,"$1"):n||t)});return e});function ks(t){if("string"==typeof t||Fl(t))return t;var e=t+"";return"0"==e&&1/t==-G?"-0":e}function Vs(t){if(null!=t){try{return ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Os(t,e){Sn(B,function(n){var r="_."+n[0];if(e&n[1]&&!Mn(t,r))t.push(r)});return t.sort()}function Is(t){if(t instanceof Cr)return t.clone();var e=new Mr(t.__wrapped__,t.__chain__);e.__actions__=ro(t.__actions__);e.__index__=t.__index__;e.__values__=t.__values__;return e}function Rs(t,e,r){if(r?ss(t,e,r):e===a)e=1;else e=ze(ql(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];var o=0,s=0,u=n(Oe(i/e));for(;o<i;)u[s++]=Ca(t,o,o+=e);return u}function Gs(t){var e=-1,n=null==t?0:t.length,r=0,i=[];for(;++e<n;){var a=t[e];if(a)i[r++]=a}return i}function Ns(){var t=arguments.length;if(!t)return[];var e=n(t-1),r=arguments[0],i=t;for(;i--;)e[i-1]=arguments[i];return Ln(ul(r)?ro(r):[r],Pi(e,1))}var Ds=_a(function(t,e){return fl(t)?wi(t,Pi(e,1,fl,true)):[]});var Fs=_a(function(t,e){var n=au(e);if(fl(n))n=a;return fl(t)?wi(t,Pi(e,1,fl,true),Ho(n,2)):[]});var zs=_a(function(t,e){var n=au(e);if(fl(n))n=a;return fl(t)?wi(t,Pi(e,1,fl,true),a,n):[]});function js(t,e,n){var r=null==t?0:t.length;if(!r)return[];return Ca(t,(e=n||e===a?1:ql(e))<0?0:e,r)}function Xs(t,e,n){var r=null==t?0:t.length;if(!r)return[];return Ca(t,0,(e=r-(e=n||e===a?1:ql(e)))<0?0:e)}function Bs(t,e){return t&&t.length?Na(t,Ho(e,3),true,true):[]}function Hs(t,e){return t&&t.length?Na(t,Ho(e,3),true):[]}function Ys(t,e,n,r){var i=null==t?0:t.length;if(!i)return[];if(n&&"number"!=typeof n&&ss(t,e,n)){n=0;r=i}return Mi(t,e,n,r)}function Us(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ql(n);if(i<0)i=ze(r+i,0);return Nn(t,Ho(e,3),i)}function Ws(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;if(n!==a){i=ql(n);i=n<0?ze(r+i,0):je(i,r-1)}return Nn(t,Ho(e,3),i,true)}function qs(t){var e;return(null==t?0:t.length)?Pi(t,1):[]}function Qs(t){var e;return(null==t?0:t.length)?Pi(t,G):[]}function $s(t,e){var n;if(!(null==t?0:t.length))return[];return Pi(t,e=e===a?1:ql(e))}function Zs(t){var e=-1,n=null==t?0:t.length,r={};for(;++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function Ks(t){return t&&t.length?t[0]:a}function Js(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ql(n);if(i<0)i=ze(r+i,0);return Dn(t,e,i)}function tu(t){var e;return(null==t?0:t.length)?Ca(t,0,-1):[]}var eu=_a(function(t){var e=Pn(t,ja);return e.length&&e[0]===t[0]?ji(e):[]});var nu=_a(function(t){var e=au(t),n=Pn(t,ja);if(e===au(n))e=a;else n.pop();return n.length&&n[0]===t[0]?ji(n,Ho(e,2)):[]});var ru=_a(function(t){var e=au(t),n=Pn(t,ja);if(e="function"==typeof e?e:a)n.pop();return n.length&&n[0]===t[0]?ji(n,a,e):[]});function iu(t,e){return null==t?"":De.call(t,e)}function au(t){var e=null==t?0:t.length;return e?t[e-1]:a}function ou(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;if(n!==a)i=(i=ql(n))<0?ze(r+i,0):je(i,r-1);return e===e?pr(t,e,i):Nn(t,zn,i,true)}function su(t,e){return t&&t.length?la(t,ql(e)):a}var uu=_a(cu);function cu(t,e){return t&&t.length&&e&&e.length?pa(t,e):t}function lu(t,e,n){return t&&t.length&&e&&e.length?pa(t,e,Ho(n,2)):t}function fu(t,e,n){return t&&t.length&&e&&e.length?pa(t,e,a,n):t}var hu=Do(function(t,e){var n=null==t?0:t.length,r=pi(t,e);va(t,Pn(e,function(t){return os(t,n)?+t:t}).sort(Ja));return r});function du(t,e){var n=[];if(!(t&&t.length))return n;var r=-1,i=[],a=t.length;e=Ho(e,3);for(;++r<a;){var o=t[r];if(e(o,r,t)){n.push(o);i.push(r)}}va(t,i);return n}function gu(t){return null==t?t:We.call(t)}function pu(t,e,n){var r=null==t?0:t.length;if(!r)return[];if(n&&"number"!=typeof n&&ss(t,e,n)){e=0;n=r}else{e=null==e?0:ql(e);n=n===a?r:ql(n)}return Ca(t,e,n)}function vu(t,e){return La(t,e)}function yu(t,e,n){return Ea(t,e,Ho(n,2))}function mu(t,e){var n=null==t?0:t.length;if(n){var r=La(t,e);if(r<n&&il(t[r],e))return r}return-1}function xu(t,e){return La(t,e,true)}function _u(t,e,n){return Ea(t,e,Ho(n,2),true)}function wu(t,e){var n;if(null==t?0:t.length){var r=La(t,e,true)-1;if(il(t[r],e))return r}return-1}function Su(t){return t&&t.length?ka(t):[]}function bu(t,e){return t&&t.length?ka(t,Ho(e,2)):[]}function Au(t){var e=null==t?0:t.length;return e?Ca(t,1,e):[]}function Tu(t,e,n){if(!(t&&t.length))return[];return Ca(t,0,(e=n||e===a?1:ql(e))<0?0:e)}function Mu(t,e,n){var r=null==t?0:t.length;if(!r)return[];return Ca(t,(e=r-(e=n||e===a?1:ql(e)))<0?0:e,r)}function Cu(t,e){return t&&t.length?Na(t,Ho(e,3),false,true):[]}function Pu(t,e){return t&&t.length?Na(t,Ho(e,3)):[]}var Lu=_a(function(t){return Ia(Pi(t,1,fl,true))});var Eu=_a(function(t){var e=au(t);if(fl(e))e=a;return Ia(Pi(t,1,fl,true),Ho(e,2))});var ku=_a(function(t){var e=au(t);e="function"==typeof e?e:a;return Ia(Pi(t,1,fl,true),a,e)});function Vu(t){return t&&t.length?Ia(t):[]}function Ou(t,e){return t&&t.length?Ia(t,Ho(e,2)):[]}function Iu(t,e){e="function"==typeof e?e:a;return t&&t.length?Ia(t,a,e):[]}function Ru(t){if(!(t&&t.length))return[];var e=0;t=Tn(t,function(t){if(fl(t)){e=ze(t.length,e);return true}});return Wn(e,function(e){return Pn(t,Xn(e))})}function Gu(t,e){if(!(t&&t.length))return[];var n=Ru(t);if(null==e)return n;return Pn(n,function(t){return _n(e,a,t)})}var Nu=_a(function(t,e){return fl(t)?wi(t,e):[]});var Du=_a(function(t){return Fa(Tn(t,fl))});var Fu=_a(function(t){var e=au(t);if(fl(e))e=a;return Fa(Tn(t,fl),Ho(e,2))});var zu=_a(function(t){var e=au(t);e="function"==typeof e?e:a;return Fa(Tn(t,fl),a,e)});var ju=_a(Ru);function Xu(t,e){return za(t||[],e||[],ci)}function Bu(t,e){return za(t||[],e||[],ba)}var Hu=_a(function(t){var e=t.length,n=e>1?t[e-1]:a;n="function"==typeof n?(t.pop(),n):a;return Gu(t,n)});function Yu(t){var e=wr(t);e.__chain__=true;return e}function Uu(t,e){e(t);return t}function Wu(t,e){return e(t)}var qu=Do(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return pi(e,t)};if(e>1||this.__actions__.length||!(r instanceof Cr)||!os(n))return this.thru(i);(r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Wu,args:[i],thisArg:a});return new Mr(r,this.__chain__).thru(function(t){if(e&&!t.length)t.push(a);return t})});function Qu(){return Yu(this)}function $u(){return new Mr(this.value(),this.__chain__)}function Zu(){if(this.__values__===a)this.__values__=Ul(this.value());var t=this.__index__>=this.__values__.length,e;return{done:t,value:t?a:this.__values__[this.__index__++]}}function Ku(){return this}function Ju(t){var e,n=this;for(;n instanceof Tr;){var r=Is(n);r.__index__=0;r.__values__=a;if(e)i.__wrapped__=r;else e=r;var i=r;n=n.__wrapped__}i.__wrapped__=t;return e}function tc(){var t=this.__wrapped__;if(t instanceof Cr){var e=t;if(this.__actions__.length)e=new Cr(this);(e=e.reverse()).__actions__.push({func:Wu,args:[gu],thisArg:a});return new Mr(e,this.__chain__)}return this.thru(gu)}function ec(){return Da(this.__wrapped__,this.__actions__)}var nc=so(function(t,e,n){if(le.call(t,n))++t[n];else gi(t,n,1)});function rc(t,e,n){var r=ul(t)?An:Ai;if(n&&ss(t,e,n))e=a;return r(t,Ho(e,3))}function ic(t,e){var n;return(ul(t)?Tn:Ci)(t,Ho(e,3))}var ac=yo(Us);var oc=yo(Ws);function sc(t,e){return Pi(vc(t,e),1)}function uc(t,e){return Pi(vc(t,e),G)}function cc(t,e,n){n=n===a?1:ql(n);return Pi(vc(t,e),n)}function lc(t,e){var n;return(ul(t)?Sn:Si)(t,Ho(e,3))}function fc(t,e){var n;return(ul(t)?bn:bi)(t,Ho(e,3))}var hc=so(function(t,e,n){if(le.call(t,n))t[n].push(e);else gi(t,n,[e])});function dc(t,e,n,r){t=ll(t)?t:Xf(t);n=n&&!r?ql(n):0;var i=t.length;if(n<0)n=ze(i+n,0);return Dl(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Dn(t,e,n)>-1}var gc=_a(function(t,e,r){var i=-1,a="function"==typeof e,o=ll(t)?n(t.length):[];Si(t,function(t){o[++i]=a?_n(e,t,r):Bi(t,e,r)});return o});var pc=so(function(t,e,n){gi(t,n,e)});function vc(t,e){var n;return(ul(t)?Pn:aa)(t,Ho(e,3))}function yc(t,e,n,r){if(null==t)return[];if(!ul(e))e=null==e?[]:[e];if(!ul(n=r?a:n))n=null==n?[]:[n];return fa(t,e,n)}var mc=so(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});function xc(t,e,n){var r=ul(t)?En:Hn,i=arguments.length<3;return r(t,Ho(e,4),n,i,Si)}function _c(t,e,n){var r=ul(t)?kn:Hn,i=arguments.length<3;return r(t,Ho(e,4),n,i,bi)}function wc(t,e){var n;return(ul(t)?Tn:Ci)(t,jc(Ho(e,3)))}function Sc(t){var e;return(ul(t)?ai:wa)(t)}function bc(t,e,n){if(n?ss(t,e,n):e===a)e=1;else e=ql(e);var r;return(ul(t)?oi:Sa)(t,e)}function Ac(t){var e;return(ul(t)?si:Ma)(t)}function Tc(t){if(null==t)return 0;if(ll(t))return Dl(t)?vr(t):t.length;var e=Zo(t);if(e==J||e==ot)return t.size;return na(t).length}function Mc(t,e,n){var r=ul(t)?Vn:Pa;if(n&&ss(t,e,n))e=a;return r(t,Ho(e,3))}var Cc=_a(function(t,e){if(null==t)return[];var n=e.length;if(n>1&&ss(t,e[0],e[1]))e=[];else if(n>2&&ss(e[0],e[1],e[2]))e=[e[0]];return fa(t,Pi(e,1),[])});var Pc=ke||function(){return un.Date.now()};function Lc(t,e){if("function"!=typeof e)throw new ie(c);t=ql(t);return function(){if(--t<1)return e.apply(this,arguments)}}function Ec(t,e,n){e=n?a:e;e=t&&null==e?t.length:e;return ko(t,M,a,a,a,a,e)}function kc(t,e){var n;if("function"!=typeof e)throw new ie(c);t=ql(t);return function(){if(--t>0)n=e.apply(this,arguments);if(t<=1)e=a;return n}}var Vc=_a(function(t,e,n){var r=x;if(n.length){var i=fr(n,Bo(Vc));r|=A}return ko(t,r,e,n,i)});var Oc=_a(function(t,e,n){var r=x|_;if(n.length){var i=fr(n,Bo(Oc));r|=A}return ko(e,r,t,n,i)});function Ic(t,e,n){var r=ko(t,S,a,a,a,a,a,e=n?a:e);r.placeholder=Ic.placeholder;return r}function Rc(t,e,n){var r=ko(t,b,a,a,a,a,a,e=n?a:e);r.placeholder=Rc.placeholder;return r}function Gc(t,e,n){var r,i,o,s,u,l,f=0,h=false,d=false,g=true;if("function"!=typeof t)throw new ie(c);e=$l(e)||0;if(Al(n)){h=!!n.leading;o=(d="maxWait"in n)?ze($l(n.maxWait)||0,e):o;g="trailing"in n?!!n.trailing:g}function p(e){var n=r,o=i;r=i=a;f=e;return s=t.apply(o,n)}function v(t){f=t;u=Ts(x,e);return h?p(t):s}function y(t){var n,r,i=e-(t-l);return d?je(i,o-(t-f)):i}function m(t){var n=t-l,r;return l===a||n>=e||n<0||d&&t-f>=o}function x(){var t=Pc();if(m(t))return _(t);u=Ts(x,y(t))}function _(t){u=a;if(g&&r)return p(t);r=i=a;return s}function w(){if(u!==a)Ua(u);f=0;r=l=i=u=a}function S(){return u===a?s:_(Pc())}function b(){var t=Pc(),n=m(t);r=arguments;i=this;l=t;if(n){if(u===a)return v(l);if(d){Ua(u);u=Ts(x,e);return p(l)}}if(u===a)u=Ts(x,e);return s}b.cancel=w;b.flush=S;return b}var Nc=_a(function(t,e){return _i(t,1,e)});var Dc=_a(function(t,e,n){return _i(t,$l(e)||0,n)});function Fc(t){return ko(t,P)}function zc(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(c);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);n.cache=a.set(i,o)||a;return o};n.cache=new(zc.Cache||Br);return n}zc.Cache=Br;function jc(t){if("function"!=typeof t)throw new ie(c);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Xc(t){return kc(2,t)}var Bc=Ha(function(t,e){var n=(e=1==e.length&&ul(e[0])?Pn(e[0],$n(Ho())):Pn(Pi(e,1),$n(Ho()))).length;return _a(function(r){var i=-1,a=je(r.length,n);for(;++i<a;)r[i]=e[i].call(this,r[i]);return _n(t,this,r)})});var Hc=_a(function(t,e){var n=fr(e,Bo(Hc));return ko(t,A,a,e,n)});var Yc=_a(function(t,e){var n=fr(e,Bo(Yc));return ko(t,T,a,e,n)});var Uc=Do(function(t,e){return ko(t,C,a,a,a,e)});function Wc(t,e){if("function"!=typeof t)throw new ie(c);return _a(t,e=e===a?e:ql(e))}function qc(t,e){if("function"!=typeof t)throw new ie(c);e=null==e?0:ze(ql(e),0);return _a(function(n){var r=n[e],i=Ya(n,0,e);if(r)Ln(i,r);return _n(t,this,i)})}function Qc(t,e,n){var r=true,i=true;if("function"!=typeof t)throw new ie(c);if(Al(n)){r="leading"in n?!!n.leading:r;i="trailing"in n?!!n.trailing:i}return Gc(t,e,{leading:r,maxWait:e,trailing:i})}function $c(t){return Ec(t,1)}function Zc(t,e){return Hc(Xa(e),t)}function Kc(){if(!arguments.length)return[];var t=arguments[0];return ul(t)?t:[t]}function Jc(t){return yi(t,v)}function tl(t,e){return yi(t,v,e="function"==typeof e?e:a)}function el(t){return yi(t,g|v)}function nl(t,e){return yi(t,g|v,e="function"==typeof e?e:a)}function rl(t,e){return null==e||xi(t,e,bf(e))}function il(t,e){return t===e||t!==t&&e!==e}var al=Mo(Ni);var ol=Mo(function(t,e){return t>=e});var sl=Hi(function(){return arguments}())?Hi:function(t){return Tl(t)&&le.call(t,"callee")&&!Ae.call(t,"callee")};var ul=n.isArray;var cl=gn?$n(gn):Yi;function ll(t){return null!=t&&bl(t.length)&&!wl(t)}function fl(t){return Tl(t)&&ll(t)}function hl(t){return true===t||false===t||Tl(t)&&Gi(t)==W}var dl=Ge||Qh;var gl=pn?$n(pn):Ui;function pl(t){return Tl(t)&&1===t.nodeType&&!Il(t)}function vl(t){if(null==t)return true;if(ll(t)&&(ul(t)||"string"==typeof t||"function"==typeof t.splice||dl(t)||zl(t)||sl(t)))return!t.length;var e=Zo(t);if(e==J||e==ot)return!t.size;if(ds(t))return!na(t).length;for(var n in t)if(le.call(t,n))return false;return true}function yl(t,e){return Wi(t,e)}function ml(t,e,n){var r=(n="function"==typeof n?n:a)?n(t,e):a;return r===a?Wi(t,e,a,n):!!r}function xl(t){if(!Tl(t))return false;var e=Gi(t);return e==$||e==Q||"string"==typeof t.message&&"string"==typeof t.name&&!Il(t)}function _l(t){return"number"==typeof t&&Ne(t)}function wl(t){if(!Al(t))return false;var e=Gi(t);return e==Z||e==K||e==U||e==it}function Sl(t){return"number"==typeof t&&t==ql(t)}function bl(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=N}function Al(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Tl(t){return null!=t&&"object"==typeof t}var Ml=vn?$n(vn):Qi;function Cl(t,e){return t===e||$i(t,e,Uo(e))}function Pl(t,e,n){n="function"==typeof n?n:a;return $i(t,e,Uo(e),n)}function Ll(t){return Ol(t)&&t!=+t}function El(t){if(hs(t))throw new i(u);return Zi(t)}function kl(t){return null===t}function Vl(t){return null==t}function Ol(t){return"number"==typeof t||Tl(t)&&Gi(t)==tt}function Il(t){if(!Tl(t)||Gi(t)!=nt)return false;var e=Se(t);if(null===e)return true;var n=le.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ce.call(n)==pe}var Rl=yn?$n(yn):Ki;function Gl(t){return Sl(t)&&t>=-N&&t<=N}var Nl=mn?$n(mn):Ji;function Dl(t){return"string"==typeof t||!ul(t)&&Tl(t)&&Gi(t)==st}function Fl(t){return"symbol"==typeof t||Tl(t)&&Gi(t)==ut}var zl=xn?$n(xn):ta;function jl(t){return t===a}function Xl(t){return Tl(t)&&Zo(t)==lt}function Bl(t){return Tl(t)&&Gi(t)==ft}var Hl=Mo(ia);var Yl=Mo(function(t,e){return t<=e});function Ul(t){if(!t)return[];if(ll(t))return Dl(t)?yr(t):ro(t);if(Ce&&t[Ce])return ur(t[Ce]());var e=Zo(t),n;return(e==J?cr:e==ot?hr:Xf)(t)}function Wl(t){if(!t)return 0===t?t:0;if((t=$l(t))===G||t===-G){var e;return(t<0?-1:1)*D}return t===t?t:0}function ql(t){var e=Wl(t),n=e%1;return e===e?n?e-n:e:0}function Ql(t){return t?vi(ql(t),0,z):0}function $l(t){if("number"==typeof t)return t;if(Fl(t))return F;if(Al(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Al(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Qn(t);var n=Qt.test(t);return n||Zt.test(t)?an(t.slice(2),n?2:8):qt.test(t)?F:+t}function Zl(t){return io(t,Af(t))}function Kl(t){return t?vi(ql(t),-N,N):0===t?t:0}function Jl(t){return null==t?"":Oa(t)}var tf=uo(function(t,e){if(ds(e)||ll(e)){io(e,bf(e),t);return}for(var n in e)if(le.call(e,n))ci(t,n,e[n])});var ef=uo(function(t,e){io(e,Af(e),t)});var nf=uo(function(t,e,n,r){io(e,Af(e),t,r)});var rf=uo(function(t,e,n,r){io(e,bf(e),t,r)});var af=Do(pi);function of(t,e){var n=br(t);return null==e?n:hi(n,e)}var sf=_a(function(t,e){t=Bt(t);var n=-1;var r=e.length;var i=r>2?e[2]:a;if(i&&ss(e[0],e[1],i))r=1;for(;++n<r;){var o=e[n];var s=Af(o);var u=-1;var c=s.length;for(;++u<c;){var l=s[u];var f=t[l];if(f===a||il(f,se[l])&&!le.call(t,l))t[l]=o[l]}}return t});var uf=_a(function(t){t.push(a,Oo);return _n(Pf,a,t)});function cf(t,e){return Gn(t,Ho(e,3),ki)}function lf(t,e){return Gn(t,Ho(e,3),Vi)}function ff(t,e){return null==t?t:Li(t,Ho(e,3),Af)}function hf(t,e){return null==t?t:Ei(t,Ho(e,3),Af)}function df(t,e){return t&&ki(t,Ho(e,3))}function gf(t,e){return t&&Vi(t,Ho(e,3))}function pf(t){return null==t?[]:Oi(t,bf(t))}function vf(t){return null==t?[]:Oi(t,Af(t))}function yf(t,e,n){var r=null==t?a:Ii(t,e);return r===a?n:r}function mf(t,e){return null!=t&&ts(t,e,Di)}function xf(t,e){return null!=t&&ts(t,e,Fi)}var _f=_o(function(t,e,n){if(null!=e&&"function"!=typeof e.toString)e=ge.call(e);t[e]=n},Ch(kh));var wf=_o(function(t,e,n){if(null!=e&&"function"!=typeof e.toString)e=ge.call(e);if(le.call(t,e))t[e].push(n);else t[e]=[n]},Ho);var Sf=_a(Bi);function bf(t){return ll(t)?ii(t):na(t)}function Af(t){return ll(t)?ii(t,true):ra(t)}function Tf(t,e){var n={};e=Ho(e,3);ki(t,function(t,r,i){gi(n,e(t,r,i),t)});return n}function Mf(t,e){var n={};e=Ho(e,3);ki(t,function(t,r,i){gi(n,r,e(t,r,i))});return n}var Cf=uo(function(t,e,n){ua(t,e,n)});var Pf=uo(function(t,e,n,r){ua(t,e,n,r)});var Lf=Do(function(t,e){var n={};if(null==t)return n;var r=false;e=Pn(e,function(e){e=Ba(e,t);r||(r=e.length>1);return e});io(t,zo(t),n);if(r)n=yi(n,g|p|v,Io);var i=e.length;for(;i--;)Ra(n,e[i]);return n});function Ef(t,e){return Vf(t,jc(Ho(e)))}var kf=Do(function(t,e){return null==t?{}:ha(t,e)});function Vf(t,e){if(null==t)return{};var n=Pn(zo(t),function(t){return[t]});e=Ho(e);return da(t,n,function(t,n){return e(t,n[0])})}function Of(t,e,n){var r=-1,i=(e=Ba(e,t)).length;if(!i){i=1;t=a}for(;++r<i;){var o=null==t?a:t[ks(e[r])];if(o===a){r=i;o=n}t=wl(o)?o.call(t):o}return t}function If(t,e,n){return null==t?t:ba(t,e,n)}function Rf(t,e,n,r){r="function"==typeof r?r:a;return null==t?t:ba(t,e,n,r)}var Gf=Eo(bf);var Nf=Eo(Af);function Df(t,e,n){var r=ul(t),i=r||dl(t)||zl(t);e=Ho(e,4);if(null==n){var a=t&&t.constructor;if(i)n=r?new a:[];else if(Al(t))n=wl(a)?br(Se(t)):{};else n={}}(i?Sn:ki)(t,function(t,r,i){return e(n,t,r,i)});return n}function Ff(t,e){return null==t?true:Ra(t,e)}function zf(t,e,n){return null==t?t:Ga(t,e,Xa(n))}function jf(t,e,n,r){r="function"==typeof r?r:a;return null==t?t:Ga(t,e,Xa(n),r)}function Xf(t){return null==t?[]:Zn(t,bf(t))}function Bf(t){return null==t?[]:Zn(t,Af(t))}function Hf(t,e,n){if(n===a){n=e;e=a}if(n!==a)n=(n=$l(n))===n?n:0;if(e!==a)e=(e=$l(e))===e?e:0;return vi($l(t),e,n)}function Yf(t,e,n){e=Wl(e);if(n===a){n=e;e=0}else n=Wl(n);return zi(t=$l(t),e,n)}function Uf(t,e,n){if(n&&"boolean"!=typeof n&&ss(t,e,n))e=n=a;if(n===a)if("boolean"==typeof e){n=e;e=a}else if("boolean"==typeof t){n=t;t=a}if(t===a&&e===a){t=0;e=1}else{t=Wl(t);if(e===a){e=t;t=0}else e=Wl(e)}if(t>e){var r=t;t=e;e=r}if(n||t%1||e%1){var i=Ue();return je(t+i*(e-t+rn("1e-"+((i+"").length-1))),e)}return ya(t,e)}var Wf=go(function(t,e,n){e=e.toLowerCase();return t+(n?qf(e):e)});function qf(t){return wh(Jl(t).toLowerCase())}function Qf(t){return(t=Jl(t))&&t.replace(Jt,nr).replace(He,"")}function $f(t,e,n){t=Jl(t);e=Oa(e);var r=t.length;var i=n=n===a?r:vi(ql(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e}function Zf(t){return(t=Jl(t))&&Lt.test(t)?t.replace(Ct,rr):t}function Kf(t){return(t=Jl(t))&&Nt.test(t)?t.replace(Gt,"\\$&"):t}var Jf=go(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});var th=go(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()});var eh=ho("toLowerCase");function nh(t,e,n){t=Jl(t);var r=(e=ql(e))?vr(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return bo(Ie(i),n)+t+bo(Oe(i),n)}function rh(t,e,n){t=Jl(t);var r=(e=ql(e))?vr(t):0;return e&&r<e?t+bo(e-r,n):t}function ih(t,e,n){t=Jl(t);var r=(e=ql(e))?vr(t):0;return e&&r<e?bo(e-r,n)+t:t}function ah(t,e,n){if(n||null==e)e=0;else if(e)e=+e;return Ye(Jl(t).replace(Dt,""),e||0)}function oh(t,e,n){if(n?ss(t,e,n):e===a)e=1;else e=ql(e);return xa(Jl(t),e)}function sh(){var t=arguments,e=Jl(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var uh=go(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});function ch(t,e,n){if(n&&"number"!=typeof n&&ss(t,e,n))e=n=a;if(!(n=n===a?z:n>>>0))return[];if((t=Jl(t))&&("string"==typeof e||null!=e&&!Rl(e)))if(!(e=Oa(e))&&or(t))return Ya(yr(t),0,n);return t.split(e,n)}var lh=go(function(t,e,n){return t+(n?" ":"")+wh(e)});function fh(t,e,n){t=Jl(t);n=null==n?0:vi(ql(n),0,t.length);e=Oa(e);return t.slice(n,n+e.length)==e}function hh(t,e,n){var r=wr.templateSettings;if(n&&ss(t,e,n))e=a;t=Jl(t);e=nf({},e,r,Vo);var o=nf({},e.imports,r.imports,Vo),s=bf(o),u=Zn(o,s);var c,f,h=0,d=e.interpolate||te,g="__p += '";var p=ne((e.escape||te).source+"|"+d.source+"|"+(d===Vt?Ut:te).source+"|"+(e.evaluate||te).source+"|$","g");var v="//# sourceURL="+(le.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$e+"]")+"\n";t.replace(p,function(e,n,r,i,a,o){r||(r=i);g+=t.slice(h,o).replace(ee,ir);if(n){c=true;g+="' +\n__e("+n+") +\n'"}if(a){f=true;g+="';\n"+a+";\n__p += '"}if(r)g+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'";h=o+e.length;return e});g+="';\n";var y=le.call(e,"variable")&&e.variable;if(!y)g="with (obj) {\n"+g+"\n}\n";else if(Ht.test(y))throw new i(l);g=(f?g.replace(bt,""):g).replace(At,"$1").replace(Tt,"$1;");g="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(c?", __e = _.escape":"")+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+g+"return __p\n}";var m=bh(function(){return R(s,v+"return "+g).apply(a,u)});m.source=g;if(xl(m))throw m;return m}function dh(t){return Jl(t).toLowerCase()}function gh(t){return Jl(t).toUpperCase()}function ph(t,e,n){if((t=Jl(t))&&(n||e===a))return Qn(t);if(!t||!(e=Oa(e)))return t;var r=yr(t),i=yr(e),o,s;return Ya(r,Jn(r,i),tr(r,i)+1).join("")}function vh(t,e,n){if((t=Jl(t))&&(n||e===a))return t.slice(0,mr(t)+1);if(!t||!(e=Oa(e)))return t;var r=yr(t),i;return Ya(r,0,tr(r,yr(e))+1).join("")}function yh(t,e,n){if((t=Jl(t))&&(n||e===a))return t.replace(Dt,"");if(!t||!(e=Oa(e)))return t;var r=yr(t),i;return Ya(r,Jn(r,yr(e))).join("")}function mh(t,e){var n=L,r=E;if(Al(e)){var i="separator"in e?e.separator:i;n="length"in e?ql(e.length):n;r="omission"in e?Oa(e.omission):r}var o=(t=Jl(t)).length;if(or(t)){var s=yr(t);o=s.length}if(n>=o)return t;var u=n-vr(r);if(u<1)return r;var c=s?Ya(s,0,u).join(""):t.slice(0,u);if(i===a)return c+r;if(s)u+=c.length-u;if(Rl(i)){if(t.slice(u).search(i)){var l,f=c;if(!i.global)i=ne(i.source,Jl(Wt.exec(i))+"g");i.lastIndex=0;for(;l=i.exec(f);)var h=l.index;c=c.slice(0,h===a?u:h)}}else if(t.indexOf(Oa(i),u)!=u){var d=c.lastIndexOf(i);if(d>-1)c=c.slice(0,d)}return c+r}function xh(t){return(t=Jl(t))&&Pt.test(t)?t.replace(Mt,xr):t}var _h=go(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()});var wh=ho("toUpperCase");function Sh(t,e,n){t=Jl(t);if((e=n?a:e)===a)return sr(t)?Sr(t):Rn(t);return t.match(e)||[]}var bh=_a(function(t,e){try{return _n(t,a,e)}catch(t){return xl(t)?t:new i(t)}});var Ah=Do(function(t,e){Sn(e,function(e){e=ks(e);gi(t,e,Vc(t[e],t))});return t});function Th(t){var e=null==t?0:t.length,n=Ho();t=!e?[]:Pn(t,function(t){if("function"!=typeof t[1])throw new ie(c);return[n(t[0]),t[1]]});return _a(function(n){var r=-1;for(;++r<e;){var i=t[r];if(_n(i[0],this,n))return _n(i[1],this,n)}})}function Mh(t){return mi(yi(t,g))}function Ch(t){return function(){return t}}function Ph(t,e){return null==t||t!==t?e:t}var Lh=mo();var Eh=mo(true);function kh(t){return t}function Vh(t){return ea("function"==typeof t?t:yi(t,g))}function Oh(t){return oa(yi(t,g))}function Ih(t,e){return sa(t,yi(e,g))}var Rh=_a(function(t,e){return function(n){return Bi(n,t,e)}});var Gh=_a(function(t,e){return function(n){return Bi(t,n,e)}});function Nh(t,e,n){var r=bf(e),i=Oi(e,r);if(null==n&&!(Al(e)&&(i.length||!r.length))){n=e;e=t;t=this;i=Oi(e,bf(e))}var a=!(Al(n)&&"chain"in n)||!!n.chain,o=wl(t);Sn(i,function(n){var r=e[n];t[n]=r;if(o)t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),i;(n.__actions__=ro(this.__actions__)).push({func:r,args:arguments,thisArg:t});n.__chain__=e;return n}return r.apply(t,Ln([this.value()],arguments))}});return t}function Dh(){if(un._===this)un._=ve;return this}function Fh(){}function zh(t){t=ql(t);return _a(function(e){return la(e,t)})}var jh=So(Pn);var Xh=So(An);var Bh=So(Vn);function Hh(t){return us(t)?Xn(ks(t)):ga(t)}function Yh(t){return function(e){return null==t?a:Ii(t,e)}}var Uh=To();var Wh=To(true);function qh(){return[]}function Qh(){return false}function $h(){return{}}function Zh(){return""}function Kh(){return true}function Jh(t,e){if((t=ql(t))<1||t>N)return[];var n=z,r=je(t,z);e=Ho(e);t-=z;var i=Wn(r,e);for(;++n<t;)e(n);return i}function td(t){if(ul(t))return Pn(t,ks);return Fl(t)?[t]:ro(Es(Jl(t)))}function ed(t){var e=++fe;return Jl(t)+e}var nd=wo(function(t,e){return t+e},0);var rd=Po("ceil");var id=wo(function(t,e){return t/e},1);var ad=Po("floor");function od(t){return t&&t.length?Ti(t,kh,Ni):a}function sd(t,e){return t&&t.length?Ti(t,Ho(e,2),Ni):a}function ud(t){return jn(t,kh)}function cd(t,e){return jn(t,Ho(e,2))}function ld(t){return t&&t.length?Ti(t,kh,ia):a}function fd(t,e){return t&&t.length?Ti(t,Ho(e,2),ia):a}var hd=wo(function(t,e){return t*e},1);var dd=Po("round");var gd=wo(function(t,e){return t-e},0);function pd(t){return t&&t.length?Un(t,kh):0}function vd(t,e){return t&&t.length?Un(t,Ho(e,2)):0}wr.after=Lc;wr.ary=Ec;wr.assign=tf;wr.assignIn=ef;wr.assignInWith=nf;wr.assignWith=rf;wr.at=af;wr.before=kc;wr.bind=Vc;wr.bindAll=Ah;wr.bindKey=Oc;wr.castArray=Kc;wr.chain=Yu;wr.chunk=Rs;wr.compact=Gs;wr.concat=Ns;wr.cond=Th;wr.conforms=Mh;wr.constant=Ch;wr.countBy=nc;wr.create=of;wr.curry=Ic;wr.curryRight=Rc;wr.debounce=Gc;wr.defaults=sf;wr.defaultsDeep=uf;wr.defer=Nc;wr.delay=Dc;wr.difference=Ds;wr.differenceBy=Fs;wr.differenceWith=zs;wr.drop=js;wr.dropRight=Xs;wr.dropRightWhile=Bs;wr.dropWhile=Hs;wr.fill=Ys;wr.filter=ic;wr.flatMap=sc;wr.flatMapDeep=uc;wr.flatMapDepth=cc;wr.flatten=qs;wr.flattenDeep=Qs;wr.flattenDepth=$s;wr.flip=Fc;wr.flow=Lh;wr.flowRight=Eh;wr.fromPairs=Zs;wr.functions=pf;wr.functionsIn=vf;wr.groupBy=hc;wr.initial=tu;wr.intersection=eu;wr.intersectionBy=nu;wr.intersectionWith=ru;wr.invert=_f;wr.invertBy=wf;wr.invokeMap=gc;wr.iteratee=Vh;wr.keyBy=pc;wr.keys=bf;wr.keysIn=Af;wr.map=vc;wr.mapKeys=Tf;wr.mapValues=Mf;wr.matches=Oh;wr.matchesProperty=Ih;wr.memoize=zc;wr.merge=Cf;wr.mergeWith=Pf;wr.method=Rh;wr.methodOf=Gh;wr.mixin=Nh;wr.negate=jc;wr.nthArg=zh;wr.omit=Lf;wr.omitBy=Ef;wr.once=Xc;wr.orderBy=yc;wr.over=jh;wr.overArgs=Bc;wr.overEvery=Xh;wr.overSome=Bh;wr.partial=Hc;wr.partialRight=Yc;wr.partition=mc;wr.pick=kf;wr.pickBy=Vf;wr.property=Hh;wr.propertyOf=Yh;wr.pull=uu;wr.pullAll=cu;wr.pullAllBy=lu;wr.pullAllWith=fu;wr.pullAt=hu;wr.range=Uh;wr.rangeRight=Wh;wr.rearg=Uc;wr.reject=wc;wr.remove=du;wr.rest=Wc;wr.reverse=gu;wr.sampleSize=bc;wr.set=If;wr.setWith=Rf;wr.shuffle=Ac;wr.slice=pu;wr.sortBy=Cc;wr.sortedUniq=Su;wr.sortedUniqBy=bu;wr.split=ch;wr.spread=qc;wr.tail=Au;wr.take=Tu;wr.takeRight=Mu;wr.takeRightWhile=Cu;wr.takeWhile=Pu;wr.tap=Uu;wr.throttle=Qc;wr.thru=Wu;wr.toArray=Ul;wr.toPairs=Gf;wr.toPairsIn=Nf;wr.toPath=td;wr.toPlainObject=Zl;wr.transform=Df;wr.unary=$c;wr.union=Lu;wr.unionBy=Eu;wr.unionWith=ku;wr.uniq=Vu;wr.uniqBy=Ou;wr.uniqWith=Iu;wr.unset=Ff;wr.unzip=Ru;wr.unzipWith=Gu;wr.update=zf;wr.updateWith=jf;wr.values=Xf;wr.valuesIn=Bf;wr.without=Nu;wr.words=Sh;wr.wrap=Zc;wr.xor=Du;wr.xorBy=Fu;wr.xorWith=zu;wr.zip=ju;wr.zipObject=Xu;wr.zipObjectDeep=Bu;wr.zipWith=Hu;wr.entries=Gf;wr.entriesIn=Nf;wr.extend=ef;wr.extendWith=nf;Nh(wr,wr);wr.add=nd;wr.attempt=bh;wr.camelCase=Wf;wr.capitalize=qf;wr.ceil=rd;wr.clamp=Hf;wr.clone=Jc;wr.cloneDeep=el;wr.cloneDeepWith=nl;wr.cloneWith=tl;wr.conformsTo=rl;wr.deburr=Qf;wr.defaultTo=Ph;wr.divide=id;wr.endsWith=$f;wr.eq=il;wr.escape=Zf;wr.escapeRegExp=Kf;wr.every=rc;wr.find=ac;wr.findIndex=Us;wr.findKey=cf;wr.findLast=oc;wr.findLastIndex=Ws;wr.findLastKey=lf;wr.floor=ad;wr.forEach=lc;wr.forEachRight=fc;wr.forIn=ff;wr.forInRight=hf;wr.forOwn=df;wr.forOwnRight=gf;wr.get=yf;wr.gt=al;wr.gte=ol;wr.has=mf;wr.hasIn=xf;wr.head=Ks;wr.identity=kh;wr.includes=dc;wr.indexOf=Js;wr.inRange=Yf;wr.invoke=Sf;wr.isArguments=sl;wr.isArray=ul;wr.isArrayBuffer=cl;wr.isArrayLike=ll;wr.isArrayLikeObject=fl;wr.isBoolean=hl;wr.isBuffer=dl;wr.isDate=gl;wr.isElement=pl;wr.isEmpty=vl;wr.isEqual=yl;wr.isEqualWith=ml;wr.isError=xl;wr.isFinite=_l;wr.isFunction=wl;wr.isInteger=Sl;wr.isLength=bl;wr.isMap=Ml;wr.isMatch=Cl;wr.isMatchWith=Pl;wr.isNaN=Ll;wr.isNative=El;wr.isNil=Vl;wr.isNull=kl;wr.isNumber=Ol;wr.isObject=Al;wr.isObjectLike=Tl;wr.isPlainObject=Il;wr.isRegExp=Rl;wr.isSafeInteger=Gl;wr.isSet=Nl;wr.isString=Dl;wr.isSymbol=Fl;wr.isTypedArray=zl;wr.isUndefined=jl;wr.isWeakMap=Xl;wr.isWeakSet=Bl;wr.join=iu;wr.kebabCase=Jf;wr.last=au;wr.lastIndexOf=ou;wr.lowerCase=th;wr.lowerFirst=eh;wr.lt=Hl;wr.lte=Yl;wr.max=od;wr.maxBy=sd;wr.mean=ud;wr.meanBy=cd;wr.min=ld;wr.minBy=fd;wr.stubArray=qh;wr.stubFalse=Qh;wr.stubObject=$h;wr.stubString=Zh;wr.stubTrue=Kh;wr.multiply=hd;wr.nth=su;wr.noConflict=Dh;wr.noop=Fh;wr.now=Pc;wr.pad=nh;wr.padEnd=rh;wr.padStart=ih;wr.parseInt=ah;wr.random=Uf;wr.reduce=xc;wr.reduceRight=_c;wr.repeat=oh;wr.replace=sh;wr.result=Of;wr.round=dd;wr.runInContext=t;wr.sample=Sc;wr.size=Tc;wr.snakeCase=uh;wr.some=Mc;wr.sortedIndex=vu;wr.sortedIndexBy=yu;wr.sortedIndexOf=mu;wr.sortedLastIndex=xu;wr.sortedLastIndexBy=_u;wr.sortedLastIndexOf=wu;wr.startCase=lh;wr.startsWith=fh;wr.subtract=gd;wr.sum=pd;wr.sumBy=vd;wr.template=hh;wr.times=Jh;wr.toFinite=Wl;wr.toInteger=ql;wr.toLength=Ql;wr.toLower=dh;wr.toNumber=$l;wr.toSafeInteger=Kl;wr.toString=Jl;wr.toUpper=gh;wr.trim=ph;wr.trimEnd=vh;wr.trimStart=yh;wr.truncate=mh;wr.unescape=xh;wr.uniqueId=ed;wr.upperCase=_h;wr.upperFirst=wh;wr.each=lc;wr.eachRight=fc;wr.first=Ks;Nh(wr,function(){var t={};ki(wr,function(e,n){if(!le.call(wr.prototype,n))t[n]=e});return t}(),{chain:false});wr.VERSION=o;Sn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){wr[t].placeholder=wr});Sn(["drop","take"],function(t,e){Cr.prototype[t]=function(n){n=n===a?1:ze(ql(n),0);var r=this.__filtered__&&!e?new Cr(this):this.clone();if(r.__filtered__)r.__takeCount__=je(n,r.__takeCount__);else r.__views__.push({size:je(n,z),type:t+(r.__dir__<0?"Right":"")});return r};Cr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}});Sn(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==O||3==n;Cr.prototype[t]=function(t){var e=this.clone();e.__iteratees__.push({iteratee:Ho(t,3),type:n});e.__filtered__=e.__filtered__||r;return e}});Sn(["head","last"],function(t,e){var n="take"+(e?"Right":"");Cr.prototype[t]=function(){return this[n](1).value()[0]}});Sn(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Cr.prototype[t]=function(){return this.__filtered__?new Cr(this):this[n](1)}});Cr.prototype.compact=function(){return this.filter(kh)};Cr.prototype.find=function(t){return this.filter(t).head()};Cr.prototype.findLast=function(t){return this.reverse().find(t)};Cr.prototype.invokeMap=_a(function(t,e){if("function"==typeof t)return new Cr(this);return this.map(function(n){return Bi(n,t,e)})});Cr.prototype.reject=function(t){return this.filter(jc(Ho(t)))};Cr.prototype.slice=function(t,e){t=ql(t);var n=this;if(n.__filtered__&&(t>0||e<0))return new Cr(n);if(t<0)n=n.takeRight(-t);else if(t)n=n.drop(t);if(e!==a)n=(e=ql(e))<0?n.dropRight(-e):n.take(e-t);return n};Cr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()};Cr.prototype.toArray=function(){return this.take(z)};ki(Cr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=wr[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);if(!i)return;wr.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Cr,c=s[0],l=u||ul(e);var f=function(t){var e=i.apply(wr,Ln([t],s));return r&&h?e[0]:e};if(l&&n&&"function"==typeof c&&1!=c.length)u=l=false;var h=this.__chain__,d=!!this.__actions__.length,g=o&&!h,p=u&&!d;if(!o&&l){e=p?e:new Cr(this);var v=t.apply(e,s);v.__actions__.push({func:Wu,args:[f],thisArg:a});return new Mr(v,h)}if(g&&p)return t.apply(this,s);v=this.thru(f);return g?r?v.value()[0]:v.value():v}});Sn(["pop","push","shift","sort","splice","unshift"],function(t){var e=ae[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);wr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(ul(i)?i:[],t)}return this[n](function(n){return e.apply(ul(n)?n:[],t)})}});ki(Cr.prototype,function(t,e){var n=wr[e];if(n){var r=n.name+"";if(!le.call(cn,r))cn[r]=[];cn[r].push({name:e,func:n})}});cn[xo(a,_).name]=[{name:"wrapper",func:a}];Cr.prototype.clone=Pr;Cr.prototype.reverse=Lr;Cr.prototype.value=Er;wr.prototype.at=qu;wr.prototype.chain=Qu;wr.prototype.commit=$u;wr.prototype.next=Zu;wr.prototype.plant=Ju;wr.prototype.reverse=tc;wr.prototype.toJSON=wr.prototype.valueOf=wr.prototype.value=ec;wr.prototype.first=wr.prototype.head;if(Ce)wr.prototype[Ce]=Ku;return wr}();if(true){un._=Ar;(i=function(){return Ar}.call(e,n,e,r))!==a&&(r.exports=i)}}).call(this)}).call(this,n(45),n(60)(t))},57:function(t,e){t.exports=window.jQuery},58:function(t,e,n){var r=n(49);var i=n(199);var a=n(36);var o=n(120);var s=Object.defineProperty;e.f=r?s:function t(e,n,r){a(e);n=o(n,true);a(r);if(i)try{return s(e,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");if("value"in r)e[n]=r.value;return e}},60:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){t.deprecate=function(){};t.paths=[];if(!t.children)t.children=[];Object.defineProperty(t,"loaded",{enumerable:true,get:function(){return t.l}});Object.defineProperty(t,"id",{enumerable:true,get:function(){return t.i}});t.webpackPolyfill=1}return t}},606:function(t,e,n){var r=n(23);var i=n(205).trim;var a=n(198);var o=r.parseFloat;var s=1/o(a+"-0")!==-1/0;t.exports=s?function t(e){var n=i(String(e));var r=o(n);return 0===r&&"-"==n.charAt(0)?-0:r}:o},616:function(t,e,n){"use strict";var r=n(29);var i=n(133);var a=n(87);var o=n(27);var s=n(138);var u=[];var c=u.sort;var l=o(function(){u.sort(void 0)});var f=o(function(){u.sort(null)});var h=s("sort");var d;r({target:"Array",proto:true,forced:l||!f||!h},{sort:function t(e){return void 0===e?c.call(a(this)):c.call(a(this),i(e))}})},62:function(t,e,n){var r=n(100);var i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},66:function(t,e,n){var r=n(49);var i=n(58);var a=n(116);t.exports=r?function(t,e,n){return i.f(t,e,a(1,n))}:function(t,e,n){t[e]=n;return t}},68:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},69:function(t,e,n){var r=n(23);var i=n(66);var a=n(39);var o=n(154);var s=n(177);var u=n(105);var c=u.get;var l=u.enforce;var f=String(String).split("String");(t.exports=function(t,e,n,s){var u=s?!!s.unsafe:false;var c=s?!!s.enumerable:false;var h=s?!!s.noTargetGet:false;if("function"==typeof n){if("string"==typeof e&&!a(n,"name"))i(n,"name",e);l(n).source=f.join("string"==typeof e?e:"")}if(t===r){if(c)t[e]=n;else o(e,n);return}else if(!u)delete t[e];else if(!h&&t[e])c=true;if(c)t[e]=n;else i(t,e,n)})(Function.prototype,"toString",function t(){return"function"==typeof this&&c(this).source||s(this)})},694:function(t,e,n){var r=n(84);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},695:function(t,e,n){"use strict";var r=n(100);var i=n(68);t.exports="".repeat||function t(e){var n=String(i(this));var a="";var o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(n+=n))if(1&o)a+=n;return a}},696:function(t,e,n){var r=n(27);var i=n(198);var a="\u200b\x85\u180e";t.exports=function(t){return r(function(){return!!i[t]()||a[t]()!=a||i[t].name!==t})}},698:function(t,e,n){"use strict";(function(t){var r=n(16);var i=n.n(r);var a=n(101);var o=n.n(a);var s=n(290);var u=n.n(s);var c=n(42);var l=n.n(c);var f=n(1015);var h=n.n(f);var d=n(409);var g=n.n(d);var p=n(14);var v=n.n(p);var y=n(88);var m=n.n(y);var x=n(99);var _=n.n(x);var w=n(103);var S=n.n(w);var b=n(13);var A=n.n(b);var T=n(44);var M=n.n(T);var C=n(28);var P=n.n(C);var L=n(43);var E=n.n(L);var k=n(106);var V=n.n(k);var O=n(3);var I=n.n(O);var R=n(12);var G=n.n(R);var N=n(0);var D=n.n(N);var F=n(9707);var z=n(507);var j=n.n(z);var X=function(){function e(){var n=this;I()(this,e);D()(this,"init",function(){n.addEventListeners()});D()(this,"resizeWin",function(){this.setValue("span","result",this.pleaseWait);this.displayFields();this.getRates()});D()(this,"setValue",function(t,n,r){switch(t){case"div":case"span":if(e.getObject(n))e.getObject(n).innerHTML=String(r);break;case"form":e.setFormElementValue(n,e.formatCurrency(r));break;default:if(e.getObject(n))e.getObject(n).value=String(r);break}});D()(this,"createLSControls",function(e,n,r){var i=["Month","January","February","March","April","May","June","July","August","September","October","November","December"];var a=["One-off","Quarterly","Annually"];var o;var s=(new Date).getFullYear();var u=t("#mortgagetermyrs option").last().attr("value");var c;var l=s+parseInt(u,10)+1;var f="";switch(e){case"lsamount":f='<input type="text" placeholder="1,000"  maxlength="10" id="lsamount'.concat(n,'" name="lsamount').concat(n,'" value="').concat(r,'" />');break;case"lsmonth":f='<select class="select-date" id="lsmonth'.concat(n,'" name="lsmonth').concat(n,'">');for(var h=0;h<i.length;h++){f+='<option value="'.concat(h,'" ');if(h===r)f+='selected="selected" ';f+=">".concat(i[h],"</option>")}f+="</select><span></span>";break;case"lsyear":f='<select class="select-date" id="lsyear'.concat(n,'" name="lsyear').concat(n,'">');f+='<option value="">YYYY</option>';for(var d=s;d<=l;d++){f+='<option value="'.concat(d,'" ');if(d===r)f+='selected="selected" ';f+=">".concat(d,"</option>")}f+="</select><span></span>";break;case"lsfrequency":f='<select class="select-date" id="lsfrequency'.concat(n,'" name="lsfrequency').concat(n,'">');for(var g=0;g<a.length;g++){f+='<option value="'.concat(a[g],'" ');if(a[g]===r)f+='selected="selected" ';f+=">".concat(a[g],"</option>")}f+="</select><span></span>";break;default:}return f});this.valid=false;this.ioa="";this.pap="";this.ownRate="";this.mortgageTermOptions={"max-years":0,"min-years":0,default:0};this.pleaseWait=t(".pleaseWait").text();this.lscurrent=1;this.lumpSums=[];this.lTVRateArray=[];this.maxls=10;this.repayment=0;this.step=1;this.calculations=new F.a;this.init()}G()(e,[{key:"addEventListeners",value:function(){function n(){var n=this;t("#continue").on("click",function(t){t.preventDefault();n.step1()});t("#calculateResult").on("click",function(t){t.preventDefault();n.step2()});t("#mortgagetermyrs").on("change",function(){n.maxTerm()});t('.currency INPUT[type="text"]').on("blur",function(n){var r=e.formatCurrency(t(n.currentTarget).val().replace(/,/g,""));t(n.currentTarget).val(r)});t("a.tooltip").on("click",function(){return false});var r;document.getElementById("propertyvalue").addEventListener("blur",function(){n.validatePrptAmt()});var i;document.getElementById("mortgageamount").addEventListener("blur",function(t){t.preventDefault();n.valMortgage()});var a;document.getElementById("interestonlyamt").addEventListener("blur",function(){n.valMortgageIO()});var o;document.getElementById("repaymentamount").addEventListener("blur",function(){n.valMortgageR()});var s;document.getElementById("ownRateAmt").addEventListener("blur",function(){n.valIntRateAmount()});t(".addLSButton").on("click",function(t){t.stopImmediatePropagation();n.lumpSumShow(1)});t(".lsAdd").on("click",function(t){t.stopImmediatePropagation();n.lumpSumNewRow()});t(".deleteLs").on("click",function(t){t.stopImmediatePropagation();var e=t.currentTarget.id;var r=parseInt(e.substr(7),10);n.lumpSumRemove(r)});t("#repaymentType").on("change",function(t){t.preventDefault();n.showHideAmnt()});t("#priority1, #priority2").on("click",function(e){e.stopImmediatePropagation();t(".offset-calc-result").css("opacity","0");n.setValue("span","result",n.pleaseWait);n.displayFields();n.getRates()});t(".backToStep1").on("click",function(t){t.preventDefault();e.backToStep1()});t(".backToStep2").on("click",function(t){t.preventDefault();e.backToStep2()});t(window).resize(Object(z.debounce)(function(){var e;if(!t("#resultsStep").hasClass("close")){t(".offset-calc-result").css("opacity","0");n.resizeWin()}},250))}return n}()},{key:"maxTerm",value:function(){function e(){var e;var n;if(t("#mortgagetermyrs").val()===this.mortgageTermOptions["max-years"].toString()){t('#mortgagetermmts option[value != "0"]').attr("disabled","disabled");t('#mortgagetermmts option[value = "0"]').attr("selected","selected").prop("selected","selected")}else t("#mortgagetermmts option").removeAttr("disabled")}return e}()},{key:"formatValues",value:function(){function t(t){var n=["propertyvalue","mortgageamount","mortgagetermyrs","mortgagetermmts","repaymentType","interestonlyamt","repaymentamount","ownRateAmt","cursavings","regsavings","avgsavingrate","avgcuraccbal","curtaxband"];for(var r=0;r<n.length;r++){var i=t+n[r];var a=String(e.getValue(i));if(a.indexOf(",")>=0)a=a.replace(/,/g,"");if(""!==(a=parseFloat(a))&&!Number.isNaN(a))this.setValue("form",i,1*a)}}return t}()},{key:"step1Validation",value:function(){function e(){this.formatValues("");this.validatePrptAmt();this.validateMortAmt();this.valIntRateAmount();if("partAndPart"===t("#repaymentType").val()){this.validateIntnly();this.validatePayment()}this.valid=false;if(true===this.validatePrptAmt()&&true===this.validateMortAmt()&&true===this.valIntRateAmount()){this.valid=true;if("partAndPart"===t("#repaymentType").val())if(true===this.validateIntnly()&&true===this.validatePayment())this.valid=true;else this.valid=false}return this.valid}return e}()},{key:"step1",value:function(){function n(){if(true===this.step1Validation()){e.setClass("products","steps");e.hideError("mainerror1");this.getRates();if("partAndPart"===t("#repaymentType").val()){this.ioa=t("#interestonlyamt").val().replace(/,/g,"");this.pap=t("#repaymentamount").val().replace(/,/g,"")}if(t("#ownRateAmt").val>0)this.ownRate=t("#ownRateAmt").val();t(t(e.CONSTANTS.Step1)).addClass("close");t(t(e.CONSTANTS.Step2)).removeClass("close");t(t(e.CONSTANTS.ResultsStep)).addClass("close");e.scrollToElement(t(e.CONSTANTS.Step2))}else this.showError("mainerror1")}return n}()},{key:"step2Validation",value:function(){function n(){this.formatValues("");this.valid=true;var n=t(".ecursavingsChars").html();var r=t(".eregsavingsChars").html();var i=t(".eavgsavingrateEmpty").html();var a=t(".eavgsavingrateChars").html();var o=t(".eavgsavingrateRange").html();var s=t(".savratewarn").html();var u=t(".eavgcuraccbalEmpty").html();var c=t(".eavgcuraccbalChars").html();var l=t("eavgcuraccbalCharNumber").html();var f=t(".eavgcuraccbalMin").html();if(!e.checkPattern(t("#cursavings").val().replace(/,/g,""),"^[0-9]{0,10}$"))this.setErrorMessage("ecursavings",n);else e.hideError("ecursavings");if(!e.checkPattern(t("#regsavings").val().replace(/,/g,""),"^[0-9]{0,10}$"))this.setErrorMessage("eregsavings",r);else e.hideError("eregsavings");if(e.checkEmpty(t("#avgsavingrate").val()))this.setErrorMessage("eavgsavingrate",i);else if(!e.checkPattern(t("#avgsavingrate").val(),"(^[0-9]{1,2}.[0-9]{0,2}$)|^[0-9]{1,2}$"))this.setErrorMessage("eavgsavingrate",a);else if(!e.checkValue(t("#avgsavingrate").val(),.01,99.99))this.setErrorMessage("eavgsavingrate",o);else if(!e.checkValue(t("#avgsavingrate").val(),.01,10)){if(""===t("#savratewarn").val()){this.setErrorMessage("eavgsavingrate",s);this.setValue("form","savratewarn","1")}}else e.hideError("eavgsavingrate");if(e.checkEmpty(t("#avgcuraccbal").val()))this.setErrorMessage("eavgcuraccbal",u);else if(e.checkPattern(t("#avgcuraccbal").val().replace(/,/g,""),"[^0-9]"))this.setErrorMessage("eavgcuraccbal",c);else if(!e.checkPattern(t("#avgcuraccbal").val().replace(/,/g,""),"^[0-9]{1,9}$"))this.setErrorMessage("eavgcuraccbal",l);else if(!e.checkValue(t("#avgcuraccbal").val(),0))this.setErrorMessage("eavgcuraccbal",f);else e.hideError("eavgcuraccbal");for(var h=0;h<this.lumpSums.length;h++)if(""!==t("#lsamount".concat(h)).val()||"0"!==t("#lsmonth".concat(h)).val()||""!==t("#lsyear".concat(h)).val()){var d=t(".elsamountEmpty").html();var g=t(".elsamountChars").html();var p=t(".elsamountHigh").html();var v=t(".elsamountNotValid").html();var y=t(".elsDateBoth").html();var m=t(".elsDateYear").html();var x=t(".elsDateMonth").html();var _=t(".elsDateBefore").html();if(e.checkEmpty(t("#lsamount".concat(h)).val()))this.setErrorMessage("elsamount".concat(h),d);else if(e.checkPattern(t("#lsamount".concat(h)).val().replace(/,/g,""),"[^0-9]"))this.setErrorMessage("elsamount".concat(h),g);else if(!e.checkPattern(t("#lsamount".concat(h)).val().replace(/,/g,""),"^[0-9,]{1,10}"))this.setErrorMessage("elsamount".concat(h),p);else if(!e.checkValue(t("#lsamount".concat(h)).val().replace(/,/g,""),1))this.setErrorMessage("elsamount".concat(h),v);else e.hideError("elsamount".concat(h));if(""===t("#lsyear".concat(h)).val()&&"0"===t("#lsmonth".concat(h)).val())this.setErrorMessage("elsDate".concat(h),y);else if(""===t("#lsyear".concat(h)).val())this.setErrorMessage("elsDate".concat(h),m);else if("0"===t("#lsmonth".concat(h)).val())this.setErrorMessage("elsDate".concat(h),x);else if("undefined"!==t("#lsyear".concat(h)).val()&&"0"!==t("#lsmonth".concat(h)).val())if(!e.isInsideTerm(t("#lsyear".concat(h)).val(),t("#lsmonth".concat(h)).val(),t("#mortgagetermyrs").val(),t("#mortgagetermmts").val()))this.setErrorMessage("elsDate".concat(h),_);else e.hideError("elsDate".concat(h));else e.hideError("elsDate".concat(h))}else{e.hideError("elsamount".concat(h));e.hideError("elsDate".concat(h))}return this.valid}return n}()},{key:"step2",value:function(){function n(){if(true===this.step2Validation()){this.setValue("form","savratewarn","");e.hideError("eravgsavingrate");e.hideError("mainerror2");this.displayFields();this.setStep(3," showfields");this.setValue("span","result",this.pleaseWait);if("partAndPart"===t("#repaymentType").val())e.setClass("eamendPartAndPart","rowcontainer srepay");this.getRates();this.calculations.showGraph();e.scrollToElement(t(e.CONSTANTS.ResultsStep))}else{this.showError("mainerror2");return false}return true}return n}()},{key:"lumpSumShow",value:function(){function e(e){var n=e;n="undefined"===typeof n?null:n;this.createLumpSumTable(n);this.setValue("span","lumpsumHead","Add a lump sum");this.setValue("div","lumpsumClose","close");t("#lumpsumLink1").addClass("close");t(".lumpsum").removeClass("close")}return e}()},{key:"lumpSumCreation",value:function(){function t(){var t=this.lumpSums.length;if(t<this.lscurrent)for(var e=t;e<this.lscurrent;e++)this.lumpSumAddRow(e)}return t}()},{key:"createLumpSumTable",value:function(){function e(){this.lumpSumCreation();t(".lsAdd").addClass("close");t("#lsSections").empty();for(var e=0;e<this.lumpSums.length;e++){t("#lumpsumEmpty").clone().appendTo("#lsSections").attr("id","lumpsum".concat(e));t("#lumpsum".concat(e," .lumpSumSAmount .amountWrapper")).append(this.createLSControls("lsamount",e,this.lumpSums[e][0]));t("#lumpsum".concat(e," .lumpSumSAmount")).attr("id","elsamount".concat(e));t("#lumpsum".concat(e," .lumpSumSAmount label")).attr("for","lsamount".concat(e));t("#lumpsum".concat(e," .dateWrapper")).attr("id","elsDate".concat(e));t("#lumpsum".concat(e," .monthWrapper")).attr("id","elsmonth".concat(e)).append(this.createLSControls("lsmonth",e,parseInt(this.lumpSums[e][1],10)));t("#lumpsum".concat(e," .monthLabel")).attr("for","lsmonth".concat(e));t("#lumpsum".concat(e," .yearWrapper")).attr("id","elsyear".concat(e)).append(this.createLSControls("lsyear",e,parseInt(this.lumpSums[e][2],10)));t("#lumpsum".concat(e," .yearLabel")).attr("for","lsyear".concat(e));t("#lumpsum".concat(e," .frequencyWrapper")).append(this.createLSControls("lsfrequency",e,this.lumpSums[e][3]));t("#lumpsum".concat(e," .lsFreuency")).attr("id","elsfrequency".concat(e));t("#lumpsum".concat(e," .lsFreuency label")).attr("for","lsfrequency".concat(e));if(e>0){t("#lumpsum".concat(e," h3")).text("Add another lump sum");t(".deleteLs").text("Remove last")}else t(".deleteLs").text("Remove")}if(this.lumpSums.length<this.maxls)t(".lsAdd").removeClass("close");t(".deleteLs").attr("id","lsSetNo".concat(this.lumpSums.length-1))}return e}()},{key:"createMortgageTermYearOptions",value:function(){function e(e){var n=t("#mortgagetermyrs");var r=t("#mortgageterm-tooltip");var i=e["min-years"]?e["min-years"]:5;var a=e["max-years"]?e["max-years"]:35;var o=e.default?e.default:25;for(var s=i;s<=a;s++)n.append('<option value="'.concat(s,'">').concat(s," years</option>"));n.val(o.toString());var u=r.attr("title");if(u.indexOf("%min%")>=0||u.indexOf("%max%")>=0){var c=u.replace(/%min%/gi,i).replace(/%max%/gi,a);r.attr("title",c)}else r.attr("title","This is the period over which you would like to repay your mortgage, in years and months. Minimum ".concat(i," years. Maximum ").concat(a," years."));this.mortgageTermOptions=e}return e}()},{key:"lumpSumAddRow",value:function(){function t(t,e,n,r,i){var a="undefined"===typeof e?"":e;var o="undefined"===typeof n?0:n;var s="undefined"===typeof i?0:r;var u="undefined"===typeof i?"":i;this.lumpSums[t]=[a,o,s,u];this.calculations.setLumpSums(this.lumpSums)}return t}()},{key:"lumpSumNewRow",value:function(){function t(){this.saveLumpSumRows();if(this.lscurrent<this.maxls){this.lumpSumAddRow(this.lscurrent);this.lscurrent+=1}this.createLumpSumTable()}return t}()},{key:"lumpSumRemove",value:function(){function n(n){var r=n;var i=[];var a=[];if(r<1){t("#lsSections").empty();e.lumpSumClose();t("#lumpsumLink1").removeClass("close");this.lumpSums=[];this.calculations.setLumpSums(this.lumpSums)}else{for(var o=0;o<this.lumpSums.length;o++)if(o!==r)i.push(this.lumpSums[o]);for(var s=0;s<i.length;s++)a.push(i[s]);if(this.lscurrent>0)this.lscurrent-=1;this.lumpSums=a;this.calculations.setLumpSums(this.lumpSums);this.createLumpSumTable()}}return n}()},{key:"saveLumpSumRows",value:function(){function e(){for(var e=0;e<this.lscurrent;e++){var n=t("#lsamount".concat(e)).val();if(""!==n&&!Number.isNaN(n)&&void 0!==n){n.replace(/,/g,"");this.setValue("form","lsamount".concat(e),n)}var r=t("#lsamount".concat(e)).val();var i=t("#lsmonth".concat(e)).val();var a=t("#lsyear".concat(e)).val();var o=t("#lsfrequency".concat(e)).val();this.lumpSumAddRow(e,r,i,a,o)}}return e}()},{key:"getRates",value:function(){function e(){if(t("#ownRateAmt").val()>0)this.repayment=t("#ownRateAmt").val();else if(""!==t("#rate").val())this.repayment=t("#ate").val();else this.repayment=t("#lowRate").val();this.setValue("form","rate",this.repayment);if(""===t("#avgsavingrate").val())this.setValue("form","avgsavingrate",t("#saverate").val());else this.setValue("form","avgsavingrate",t("#avgsavingrate").val());this.calculations.getRepayment(this.repayment);this.displayResults()}return e}()},{key:"displayResults",value:function(){function t(){switch(this.step){case 3:this.calculations.calculate(this.ioa,this.pap,this.ownRate);break;case 1:this.displayFields();this.setStep(2);if(this.repayment<0)e.setClass("products","cstep no");break;default:}}return t}()},{key:"setStep",value:function(){function t(t,n){var r="undefined"===typeof n?"":n;e.setClass("startagain","steps");switch(t){case 1:break;case 2:e.setClass("startagain","cstep");break;case 3:e.setClass("startagain","cstep");break;default:break}e.swapStep("step".concat(this.step),"step".concat(t),r);this.step=t}return t}()},{key:"displayFields",value:function(){function t(){var t=parseFloat(e.getValue("propertyvalue"));var n;var r=parseFloat(e.getValue("mortgageamount"))/t*100;var i=e.getValue("repaymentType");var a=e.getValue("ownRateAmt");this.setValue("span","lblLoanToValue1","".concat(Math.round(r),"%"));if(a>0)this.setValue("span","lblRate1",e.formatValue(e.getValue("rate"),"percent"));else this.setValue("span","lblRate1","Woolwich ".concat(e.formatValue(e.getValue("rate"),"percent")));this.setValue("span","lblPropertyValue1",e.formatValue(e.getValue("propertyvalue"),"amount"));this.setValue("span","lblMortgageAmount1",e.formatValue(e.getValue("mortgageamount"),"amount"));this.setValue("span","lblTerm1","".concat(e.getValue("mortgagetermyrs")," y ").concat(e.getValue("mortgagetermmts")," m"));if("repayment"===i)this.setValue("span","lblRepaymentType1","Repayment");else if("intOnly"===i)this.setValue("span","lblRepaymentType1","Interest only");else if("partAndPart"===i)this.setValue("span","lblRepaymentType1","Part and Part");this.setValue("span","lblLoanToValue2","".concat(Math.round(r),"%"));if(this.ownRate>0)this.setValue("span","lblRate2",e.formatValue(this.ownRate,"percent"));else if(e.getValue("lowRate")!==e.getValue("rate"))this.setValue("span","lblRate2",e.formatValue(e.getValue("rate"),"percent"));else this.setValue("span","lblRate2","Woolwich ".concat(e.formatValue(e.getValue("rate"),"percent")));this.setValue("span","lblPropertyValue2",e.formatValue(e.getValue("propertyvalue"),"amount"));this.setValue("span","lblMortgageAmount2",e.formatValue(e.getValue("mortgageamount"),"amount"));this.setValue("span","lblTerm2","".concat(e.getValue("mortgagetermyrs")," y ").concat(e.getValue("mortgagetermmts")," m"));this.setValue("span","lblRepaymentType2","Repayment");this.setValue("span","lblCurSavings2",e.formatValue(e.getValue("cursavings"),"amount"));this.setValue("span","lblRegSavings2",e.formatValue(e.getValue("regsavings"),"amount"));this.setValue("span","lblAvgSavingRate2",e.formatValue(e.getValue("avgsavingrate"),"percent"));this.setValue("span","lblAvgCurAccBal2",e.formatValue(e.getValue("avgcuraccbal"),"amount"));this.setValue("span","lblTaxRate2",e.formatValue(e.getValue("curtaxband"),"nodecpercent"))}return t}()},{key:"showError",value:function(){function e(e){var n=e;this.valid=false;t("#".concat(n)).addClass("showError notification-error")}return e}()},{key:"setErrorMessage",value:function(){function e(e,n,r,i){var a=t("#".concat(e," .message"));var o=n;for(var s=0;s<a.length;s++){var u;if(true===a.hasClass("error")){a[s].innerHTML="<em>".concat(t(".error-prefix").html(),"</em>").concat(o);this.showError(e)}t("#".concat(e)).removeClass(r).addClass(i)}}return e}()},{key:"showHideAmnt",value:function(){function n(){var n;if("partAndPart"===e.getValue("repaymentType"))t("#einterestonlyamt,#erepaymentamount").removeClass("hrepay");else{this.setValue("form","interestonlyamt","");this.setValue("form","repaymentamount","");this.ioa="";this.pap="";t("#einterestonlyamt,#erepaymentamount").addClass("hrepay")}}return n}()},{key:"validatePrptAmt",value:function(){function n(){var n=t("#propertyvalue").val().replace(/,/g,"");var r="epropertyvalue";var i=t(".epropertyvalueEmpty").html();var a=t(".epropertyvalueChars").html();var o=t(".fieldHighLowMsg").html();this.valid=true;t("#propertyvalue").val(e.formatCurrency(n));if(e.checkEmpty(n))this.setErrorMessage(r,i);else if(e.checkPattern(n,"[^0-9]"))this.setErrorMessage(r,a);else if(!e.checkValue(n,1e3,99999999))this.setErrorMessage(r,o);else e.hideError(r);return this.valid}return n}()},{key:"validateMortAmt",value:function(){function n(){var n=t("#mortgageamount").val().replace(/,/g,"");var r="emortgageamount";var i=t(".emortgageamountEmpty").html();var a=t(".emortgageamountChars").html();var o=t(".fieldHighLowMsg").html();var s=1e7;this.valid=true;t("#mortgageamount").val(e.formatCurrency(n));if(e.checkEmpty(n))this.setErrorMessage(r,i);else if(e.checkPattern(n,"[^0-9]"))this.setErrorMessage(r,a);else if(!e.checkValue(n,5e3,1e7))this.setErrorMessage(r,o);else e.hideError(r);return this.valid}return n}()},{key:"validateIntnly",value:function(){function n(){var n=t("#propertyvalue").val().replace(/,/g,"");var r=t("#mortgageamount").val().replace(/,/g,"");var i="einterestonlyamt";var a=t("#interestonlyamt").val().replace(/,/g,"");var o=t(".fieldCharsMsg").html();var s=t(".fieldHighLowMsg").html();var u=t(".lessMortMsg").html();var c=t(".ppinterestonlyamtEmpty").html();this.valid=true;t("#propertyvalue").val(e.formatCurrency(n));t("#mortgageamount").val(e.formatCurrency(r));t("#interestonlyamt").val(e.formatCurrency(a));if(e.checkEmpty(a)){this.setErrorMessage(i,c,"alert");e.resetRepaymentMsg()}else if(e.checkPattern(a,"[^0-9]")){this.setErrorMessage(i,o,"alert");e.resetRepaymentMsg()}else if(!e.checkPattern(a,"^[0-9]{4,10}$")){this.setErrorMessage(i,s,"alert");e.resetRepaymentMsg()}else if(a>Math.abs(r)){this.setErrorMessage(i,u,"alert");e.resetRepaymentMsg()}else e.hideError(i);return this.valid}return n}()},{key:"validatePayment",value:function(){function n(){var n=t("#propertyvalue").val().replace(/,/g,"");var r=t("#mortgageamount").val().replace(/,/g,"");var i=t("#interestonlyamt").val().replace(/,/g,"");var a=t("#repaymentamount").val().replace(/,/g,"");var o="erepaymentamount";var s=t(".fieldCharsMsg").html();var u=t(".fieldHighLowMsg").html();var c=t(".lessMortMsg").html();var l=t(".pperepaymentamountEmpty").html();this.valid=true;t("#propertyvalue").val(e.formatCurrency(n));t("#mortgageamount").val(e.formatCurrency(r));t("#interestonlyamt").val(e.formatCurrency(i));t("#repaymentamount").val(e.formatCurrency(a));if(e.checkEmpty(a)){this.setErrorMessage(o,l,"alert");e.resetRepaymentMsg()}else if(e.checkPattern(a,"[^0-9]")){this.setErrorMessage(o,s,"alert");e.resetRepaymentMsg()}else if(!e.checkPattern(a,"^[0-9]{4,10}$")){this.setErrorMessage(o,u,"alert");e.resetRepaymentMsg()}else if(a>Math.abs(r)){this.setErrorMessage(o,c,"alert");e.resetRepaymentMsg()}else e.hideError(o);return this.valid}return n}()},{key:"valMortgageIO",value:function(){function n(){this.formatValues("");var n=t("#propertyvalue").val().replace(/,/g,"");var r=t("#mortgageamount").val().replace(/,/g,"");var i=t("#interestonlyamt").val().replace(/,/g,"");var a=t("#repaymentamount").val().replace(/,/g,"");var o=0;var s=t(".ppIntdontAddUpMsg").html();t("#propertyvalue").val(e.formatCurrency(n));t("#mortgageamount").val(e.formatCurrency(r));t("#interestonlyamt").val(e.formatCurrency(i));t("#repaymentamount").val(e.formatCurrency(a));this.validateIntnly();if(this.validateMortAmt()&&this.validateIntnly()){e.hideError("mainerror1");if(a>0){o=r-i-a;if(Math.abs(o)>0){t("#einterestonlyamt").addClass("alert").attr("role","alert");t("#einterestonlyamt.alert .message").html("");t("#einterestonlyamt.alert .message2").removeClass("error").html(s)}}e.hideError("erepaymentamount");this.setValue("form","repaymentamount",r-i);t("#erepaymentamount .message2").html("");t("#erepaymentamount").removeClass("alert").attr("role","")}else this.showError("mainerror1")}return n}()},{key:"valMortgageR",value:function(){function n(){var n=t("#propertyvalue").val().replace(/,/g,"");var r=t("#mortgageamount").val().replace(/,/g,"");var i=t("#interestonlyamt").val().replace(/,/g,"");var a=t("#repaymentamount").val().replace(/,/g,"");var o=t(".ppRepaydontAddUpMsg").html();var s=0;this.formatValues("");t("#propertyvalue").val(e.formatCurrency(n));t("#mortgageamount").val(e.formatCurrency(r));t("#interestonlyamt").val(e.formatCurrency(i));t("#repaymentamount").val(e.formatCurrency(a));this.validatePayment();if(this.validateMortAmt()&&this.validatePayment()){e.hideError("mainerror1");if(r-a>0){s=r-i-a;this.setValue("form","interestonlyamt",r-a)}else{s=0;this.setValue("form","interestonlyamt",i)}if(Math.abs(s)>0){t("#erepaymentamount").addClass("alert").attr("role","alert");t("#erepaymentamount.alert .message").html("");t("#erepaymentamount.alert .message2").removeClass("error").html(o)}e.hideError("einterestonlyamt");t("#einterestonlyamt .message2").html("");t("#einterestonlyamt").removeClass("alert").attr("role","");return false}this.showError("mainerror1")}return n}()},{key:"valMortgage",value:function(){function n(){this.formatValues("");var n=t("#propertyvalue").val().replace(/,/g,"");var r=t("#mortgageamount").val().replace(/,/g,"");var i=t("#interestonlyamt").val().replace(/,/g,"");var a=t("#repaymentamount").val().replace(/,/g,"");var o=0;var s=t(".ppIntdontAddUpMsg").html();t("#propertyvalue").val(e.formatCurrency(n));t("#mortgageamount").val(e.formatCurrency(r));t("#interestonlyamt").val(e.formatCurrency(i));t("#repaymentamount").val(e.formatCurrency(a));if(this.validateMortAmt()){t("#einterestyourratediv input").addClass("notIntRateField");this.valLoanToVal()}if(!e.checkEmpty(i)&&!e.checkEmpty(a)){o=r-i-a;this.setValue("form","repaymentamount",r-i);if(Math.abs(o)>0){t("#einterestonlyamt").addClass("alert").attr("role","alert");t("#einterestonlyamt.alert .message").html("");t("#einterestonlyamt.alert .message2").removeClass("error").html(s)}}}return n}()},{key:"valIntRateAmount",value:function(){function n(){var n=t("#ownRateAmt").val();var r="einterestyourratediv";var i=t(".einterestyourrateEmpty").html();var a=t(".einterestyourrateChars").html();var o=t(".einterestyourrateFormat").html();var s=t(".einterestyourrateRange").html();this.valid=true;t("#".concat(r)).removeClass("valError");if(e.checkEmpty(n))this.setErrorMessage(r,i,"alert alert-warning","valError");else if(e.checkPattern(n,"[^0-9.]"))this.setErrorMessage(r,a,"alert alert-warning","valError");else if(!e.checkPattern(n,"(^[0-9]{1,2}.[0-9]{0,2}$)|^[0-9]{1,2}$"))this.setErrorMessage(r,o,"alert alert-warning","valError");else if(!e.checkValue(n,.01,99.99))this.setErrorMessage(r,s,"alert alert-warning","valError");else{e.hideError("einterestyourratediv");t("#einterestyourratediv input").removeClass("notIntRateField");this.valLoanToVal()}return this.valid}return n}()},{key:"getLTVRateArray",value:function(){function t(t){this.lTVRateArray=t}return t}()},{key:"valLoanToVal",value:function(){function n(){this.formatValues("");var n=t("#propertyvalue").val().replace(/,/g,"");var r=t("#mortgageamount").val().replace(/,/g,"");var i=0;var a=null;var o=t(".lowestRateMsg").html();var s=t(".dontOfferRate").html();var u=this.lTVRateArray;t("#propertyvalue").val(e.formatCurrency(n));t("#mortgageamount").val(e.formatCurrency(r));if(this.validatePrptAmt()){e.hideError("mainerror1");i=r/n*100;this.setValue("form","maxltv",u[u.length-1][0]);for(var c=0;c<u.length;c++)if(i<=u[c][0]){a=u[c][1];break}t("#einterestyourratediv").removeClass("alert alert-warning");o=o.replace("[lowestRte]",a).replace("[loantoval]",Math.round(i)).replace("[strong]","<strong>").replace("[/strong]","</strong>").replace("[em]","<em>").replace("[/em]","</em>");s=s.replace("[loantoval]",Math.round(i)).replace("[em]","<em>").replace("[/em]","</em>");var l=t("#einterestyourratediv").hasClass("valError");if(null!=a){t("#einterestyourratediv input.notIntRateField").val(a);t("#einterestyourratediv").addClass("alert").removeClass("valError").attr("role","alert");e.hideError("einterestyourratediv");t("#einterestyourratediv .message").html("");t("#einterestyourratediv .message2").removeClass("error").html(o);t("#continue").html("Continue");e.hideLayer("payment")}else{if(!l)t("#einterestyourratediv").addClass("alert alert-warning");t("#einterestyourratediv").attr("role","alert");t("#einterestyourratediv .message2").removeClass("error").html(s);t("#continue").html(t(".continueAnyway").html())}}else{this.showError("mainerror1");t("#einterestyourratediv .message2").html("");t("#einterestyourratediv").removeClass("alert alert-warning");t("#einterestyourratediv input.notIntRateField").val("")}}return n}()},{key:"getOffSavedInt",value:function(){function t(){return this.calculations.getOffSavedInt()}return t}()}],[{key:"backToStep1",value:function(){function n(){t(t(e.CONSTANTS.Step2)).addClass("close");t(t(e.CONSTANTS.ResultsStep)).addClass("close");t(t(e.CONSTANTS.Step1)).removeClass("close");e.scrollToElement(t(e.CONSTANTS.Step1))}return n}()},{key:"backToStep2",value:function(){function n(){t(t(e.CONSTANTS.ResultsStep)).addClass("close");t(t(e.CONSTANTS.Step2)).removeClass("close");e.scrollToElement(t(e.CONSTANTS.Step2))}return n}()},{key:"scrollToElement",value:function(){function e(e){t(window).scrollTop(e.offset().top-80)}return e}()},{key:"formatValue",value:function(){function t(t,n){var r=t;switch(n){case"nodecpercent":r=parseFloat(r);return"".concat(r.toFixed(0),"%");case"percent":r=parseFloat(r);return"".concat(r.toFixed(2),"%");case"amount":return"&pound; ".concat(e.formatCurrency(r));default:return r}}return t}()},{key:"getValue",value:function(){function t(t){if(e.getFormElementValue(t))return e.getFormElementValue(t);if(e.getObject(t))return e.getObject(t).value;return""}return t}()},{key:"getObject",value:function(){function t(t){return document.getElementById(t)?document.getElementById(t):""}return t}()},{key:"getFormElementValue",value:function(){function t(t){var e=null;if(void 0!==document.getElementById(t))if(void 0!==document.getElementById(t).value)e=document.getElementById(t).value;else if(void 0!==document.getElementById(t).length)for(var n=0;n<document.getElementById(t).length;n++)if(document.getElementById(t)[n].checked)e=document.getElementById(t)[n].value;return e}return t}()},{key:"setFormElementValue",value:function(){function t(t,e){if(null!==document.getElementById(t))if(void 0!==document.getElementById(t).value)document.getElementById(t).value=e;else if(void 0!==document.getElementById(t).length)for(var n=0;n<document.getElementById(t).length;n++)if(document.getElementById(t).value===e)document.getElementById(t)[n].checked=true}return t}()},{key:"swapStep",value:function(){function t(t,n,r){var i=r;i="undefined"===typeof i?"":i;e.setClass(t,"steps");e.setClass(n,"cstep".concat(i))}return t}()},{key:"setClass",value:function(){function t(t,n){if(e.getObject(t))e.getObject(t).className=n}return t}()},{key:"lumpSumClose",value:function(){function e(){t(".lumpsum").addClass("close")}return e}()},{key:"trim",value:function(){function t(t){var e=t;return(e+="").replace(/^\s+|\s+$/g,"")}return t}()},{key:"checkEmpty",value:function(){function t(t){var n=t;return 0===(n=e.trim(n)).length}return t}()},{key:"checkPattern",value:function(){function t(t,e){var n;var r;return new RegExp(e,"g").test(t)}return t}()},{key:"checkValue",value:function(){function t(t,e,n){var r=n;r="undefined"===typeof r?99999999:r;if(1*t<1*e||1*t>1*r)return false;return true}return t}()},{key:"isInsideTerm",value:function(){function t(t,e,n,r){var i=12*n+1*r;var a=new Date;var o=new Date;var s=new Date;o.setDate(1);o.setMonth(o.getMonth()+1);s.setDate(1);s.setMonth(s.getMonth()+i);a.setFullYear(t,e-1,1);if(a>s||a<o)return false;return true}return t}()},{key:"hideLayer",value:function(){function e(e){t("#".concat(e)).css("display","none")}return e}()},{key:"hideError",value:function(){function e(e){t("#".concat(e)).removeClass("showError notification-error")}return e}()},{key:"formatCurrency",value:function(){function t(t){var e=Math.round(100*t)/100;var n=e.toString().split(".");if(!Number.isNaN(e)&&""!==t){if(n[0].length>=4)n[0]=n[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,");if(n[1]&&1===n[1].length)n[1]+="0";return n.join(".")}return t}return t}()},{key:"resetRepaymentMsg",value:function(){function e(){t("#einterestonlyamt .message2, #erepaymentamount .message2").html("");t("#einterestonlyamt, #erepaymentamount").removeClass("alert")}return e}()}]);return e}();D()(X,"CONSTANTS",{ResultsStep:"#resultsStep",Step2:"#step2",Step1:"#step1"});e.a=X}).call(this,n(57))},7961:function(t,e,n){"use strict";(function(t){var r=n(616);var i=n.n(r);var a=n(3);var o=n.n(a);var s=n(12);var u=n.n(s);var c=n(8);var l=n.n(c);var f=n(9);var h=n.n(f);var d=n(2);var g=n.n(d);var p=n(20);var v=n(698);function y(t){var e=m();return function(){function n(){var n=g()(t),r;if(e){var i=g()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}return n}()}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(t){return false}}var x=function(e){l()(r,e);var n=y(r);function r(e,i){var a;o()(this,r);(a=n.call(this,e,i)).element=t(e);a.lTVRateArray=[];a.mortgageTermOptions={"max-years":0,"min-years":0,default:0};a.form=new v.a;a.init();return a}u()(r,[{key:"init",value:function(){function e(){var e=[];if(t(".offset-calc-form").length>0){this.form.init();var n={rates:"",url:t(".offset-calc-form").attr("data-mortgage-rates-json"),init:function(){function t(){n.ajaxRequest()}return t}(),ajaxRequest:function(){function r(){var r=[];if(document.offsetMortgageProductData)r=document.offsetMortgageProductData;else t.ajax({url:n.url,type:"GET",dataType:"json",async:false,success:function(){function t(t){r=t}return t}(),error:function(){function t(){console.error("request error")}return t}()});n.rates=r[0];if("undefined"!==typeof r[1]&&"undefined"!==typeof r[1]["mortgage-term-options"])n.mortgageTermOptions=r[1]["mortgage-term-options"];t.each(n.rates,function(n,r){var i=r.ltv;var a=r.rate;t.each(r,function(t,n){if("audience"===t&&"CUST"===n){var r=[i,a];e.push(r)}});if(e.length>0){e.sort(function(t,e){return t[1]-e[1]});e.sort(function(t,e){return t[0]-e[0]})}})}return r}()};n.init();this.lTVRateArray=e;this.form.createMortgageTermYearOptions(n.mortgageTermOptions?n.mortgageTermOptions:this.mortgageTermOptions);this.form.getLTVRateArray(this.lTVRateArray)}}return e}()}]);return r}(p.a);e.a=x}).call(this,n(57))},7962:function(t,e,n){r=this,i=function(){"use strict";var t={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};var e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};var i=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e};var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"===typeof e||"function"===typeof e)?e:t};var o=function t(e){return e||0===e};var s=function t(e){return"function"===typeof e};var u=function t(e){return Array.isArray(e)};var c=function t(e){return"string"===typeof e};var l=function t(e){return"undefined"===typeof e};var f=function t(e){return"undefined"!==typeof e};var h=function t(e){return 10*Math.ceil(e/10)};var d=function t(e){return Math.ceil(e)+.5};var g=function t(e){return e[1]-e[0]};var p=function t(n){return"undefined"===typeof n||null===n||c(n)&&0===n.length||"object"===("undefined"===typeof n?"undefined":e(n))&&0===Object.keys(n).length};var v=function t(e){return!C.isEmpty(e)};var y=function t(e,n,r){return f(e[n])?e[n]:r};var m=function t(e,n){var r=false;Object.keys(e).forEach(function(t){if(e[t]===n)r=true});return r};var x=function t(e){return"string"===typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e};var _=function t(e){var n=e.getBoundingClientRect(),r=[e.pathSegList.getItem(0),e.pathSegList.getItem(1)],i,a;return{x:r[0].x,y:Math.min(r[0].y,r[1].y),width:n.width,height:n.height}};var w;var S;function b(t,e){var n=this;this.component=t;this.params=e||{};this.d3=t.d3;this.scale=this.d3.scale.linear();this.range;this.orient="bottom";this.innerTickSize=6;this.outerTickSize=this.params.withOuterTick?6:0;this.tickPadding=3;this.tickValues=null;this.tickFormat;this.tickArguments;this.tickOffset=0;this.tickCulling=true;this.tickCentered;this.tickTextCharSize;this.tickTextRotate=this.params.tickTextRotate;this.tickLength;this.axis=this.generateAxis()}(S=b.prototype).axisX=function(t,e,n){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+n)+", 0)"})};S.axisY=function(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})};S.scaleExtent=function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]};S.generateTicks=function(t){var e=this;var n,r,i=[];if(t.ticks)return t.ticks.apply(t,this.tickArguments);r=t.domain();for(n=Math.ceil(r[0]);n<r[1];n++)i.push(n);if(i.length>0&&i[0]>0)i.unshift(i[0]-(i[1]-i[0]));return i};S.copyScale=function(){var t=this;var e=this.scale.copy(),n;if(this.params.isCategory){n=this.scale.domain();e.domain([n[0],n[1]-1])}return e};S.textFormatted=function(t){var e=this,n=this.tickFormat?this.tickFormat(t):t;return"undefined"!==typeof n?n:""};S.updateRange=function(){var t=this;this.range=this.scale.rangeExtent?this.scale.rangeExtent():this.scaleExtent(this.scale.range());return this.range};S.updateTickTextCharSize=function(t){var e=this;if(e.tickTextCharSize)return e.tickTextCharSize;var n={h:11.5,w:5.5};t.select("text").text(function(t){return e.textFormatted(t)}).each(function(t){var r=this.getBoundingClientRect(),i=e.textFormatted(t),a=r.height,o=i?r.width/i.length:void 0;if(a&&o){n.h=a;n.w=o}}).text("");e.tickTextCharSize=n;return n};S.transitionise=function(t){return this.params.withoutTransition?t:this.d3.transition(t)};S.isVertical=function(){return"left"===this.orient||"right"===this.orient};S.tspanData=function(t,e,n,r){var i=this;var a=this.params.tickMultiline?this.splitTickText(t,n,r):[].concat(this.textFormatted(t));if(this.params.tickMultiline&&this.params.tickMultilineMax>0)a=this.ellipsify(a,this.params.tickMultilineMax);return a.map(function(t){return{index:e,splitted:t,length:a.length}})};S.splitTickText=function(t,e,n){var r=this,i=r.textFormatted(t),a=r.params.tickWidth,o,s,u,c=[];if("[object Array]"===Object.prototype.toString.call(i))return i;if(!a||a<=0)a=r.isVertical()?95:r.params.isCategory?Math.ceil(n(e[1])-n(e[0]))-12:110;function l(t,e){s=void 0;for(var n=1;n<e.length;n++){if(" "===e.charAt(n))s=n;o=e.substr(0,n+1);u=r.tickTextCharSize.w*o.length;if(a<u)return l(t.concat(e.substr(0,s?s:n)),e.slice(s?s+1:n))}return t.concat(e)}return l(c,i+"")};S.ellipsify=function(t,e){if(t.length<=e)return t;var n=t.slice(0,e);var r=3;for(var i=e-1;i>=0;i--){var a=n[i].length;n[i]=n[i].substr(0,a-r).padEnd(a,".");if((r-=a)<=0)break}return n};S.updateTickLength=function(){var t=this;this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding};S.lineY2=function(t){var e=this,n=this.scale(t)+(this.tickCentered?0:this.tickOffset);return this.range[0]<n&&n<this.range[1]?this.innerTickSize:0};S.textY=function(){var t=this,e=this.tickTextRotate;return e?11.5-e/15*2.5*(e>0?1:-1):this.tickLength};S.textTransform=function(){var t=this,e=this.tickTextRotate;return e?"rotate("+e+")":""};S.textTextAnchor=function(){var t=this,e=this.tickTextRotate;return e?e>0?"start":"end":"middle"};S.tspanDx=function(){var t=this,e=this.tickTextRotate;return e?8*Math.sin(Math.PI*(e/180)):0};S.tspanDy=function(t,e){var n=this,r=this.tickTextCharSize.h;if(0===e)if(this.isVertical())r=-((t.length-1)*(this.tickTextCharSize.h/2)-3);else r=".71em";return r};S.generateAxis=function(){var t=this,e=t.d3,n=t.params;function r(i){i.each(function(){var i=r.g=e.select(this);var a=this.__chart__||t.scale,o=this.__chart__=t.copyScale();var s=t.tickValues?t.tickValues:t.generateTicks(o),u=i.selectAll(".tick").data(s,o),c=u.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),l=u.exit().remove(),f=t.transitionise(u).style("opacity",1),h,d,g;if(n.isCategory){t.tickOffset=Math.ceil((o(1)-o(0))/2);d=t.tickCentered?0:t.tickOffset;g=t.tickCentered?t.tickOffset:0}else t.tickOffset=d=0;c.append("line");c.append("text");t.updateRange();t.updateTickLength();t.updateTickTextCharSize(i.select(".tick"));var p=f.select("line"),v=f.select("text"),y=u.select("text").selectAll("tspan").data(function(e,n){return t.tspanData(e,n,s,o)});y.enter().append("tspan");y.exit().remove();y.text(function(t){return t.splitted});var m=i.selectAll(".domain").data([0]),x=(m.enter().append("path").attr("class","domain"),t.transitionise(m));switch(t.orient){case"bottom":h=t.axisX;p.attr("x1",d).attr("x2",d).attr("y2",function(e,n){return t.lineY2(e,n)});v.attr("x",0).attr("y",function(e,n){return t.textY(e,n)}).attr("transform",function(e,n){return t.textTransform(e,n)}).style("text-anchor",function(e,n){return t.textTextAnchor(e,n)});y.attr("x",0).attr("dy",function(e,n){return t.tspanDy(e,n)}).attr("dx",function(e,n){return t.tspanDx(e,n)});x.attr("d","M"+t.range[0]+","+t.outerTickSize+"V0H"+t.range[1]+"V"+t.outerTickSize);break;case"top":h=t.axisX;p.attr("x1",d).attr("x2",d).attr("y2",function(e,n){return-1*t.lineY2(e,n)});v.attr("x",0).attr("y",function(e,r){return-1*t.textY(e,r)-(n.isCategory?2:t.tickLength-2)}).attr("transform",function(e,n){return t.textTransform(e,n)}).style("text-anchor",function(e,n){return t.textTextAnchor(e,n)});y.attr("x",0).attr("dy",function(e,n){return t.tspanDy(e,n)}).attr("dx",function(e,n){return t.tspanDx(e,n)});x.attr("d","M"+t.range[0]+","+-t.outerTickSize+"V0H"+t.range[1]+"V"+-t.outerTickSize);break;case"left":h=t.axisY;p.attr("x2",-t.innerTickSize).attr("y1",g).attr("y2",g);v.attr("x",-t.tickLength).attr("y",t.tickOffset).style("text-anchor","end");y.attr("x",-t.tickLength).attr("dy",function(e,n){return t.tspanDy(e,n)});x.attr("d","M"+-t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+-t.outerTickSize);break;case"right":h=t.axisY;p.attr("x2",t.innerTickSize).attr("y1",g).attr("y2",g);v.attr("x",t.tickLength).attr("y",t.tickOffset).style("text-anchor","start");y.attr("x",t.tickLength).attr("dy",function(e,n){return t.tspanDy(e,n)});x.attr("d","M"+t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+t.outerTickSize);break}if(o.rangeBand){var _=o,w=_.rangeBand()/2;a=o=function t(e){return _(e)+w}}else if(a.rangeBand)a=o;else l.call(h,o,t.tickOffset);c.call(h,a,t.tickOffset);f.call(h,o,t.tickOffset)})}r.scale=function(e){if(!arguments.length)return t.scale;t.scale=e;return r};r.orient=function(e){if(!arguments.length)return t.orient;t.orient=e in{top:1,right:1,bottom:1,left:1}?e+"":"bottom";return r};r.tickFormat=function(e){if(!arguments.length)return t.tickFormat;t.tickFormat=e;return r};r.tickCentered=function(e){if(!arguments.length)return t.tickCentered;t.tickCentered=e;return r};r.tickOffset=function(){return t.tickOffset};r.tickInterval=function(){var e,i;if(n.isCategory)e=2*t.tickOffset;else e=(i=r.g.select("path.domain").node().getTotalLength()-2*t.outerTickSize)/r.g.selectAll("line").size();return e===1/0?0:e};r.ticks=function(){if(!arguments.length)return t.tickArguments;t.tickArguments=arguments;return r};r.tickCulling=function(e){if(!arguments.length)return t.tickCulling;t.tickCulling=e;return r};r.tickValues=function(e){if("function"===typeof e)t.tickValues=function(){return e(t.scale.domain())};else{if(!arguments.length)return t.tickValues;t.tickValues=e}return r};return r};var A=function(t){i(e,t);function e(t){r(this,e);var n={fn:w,internal:{fn:S}};var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"axis",n));i.d3=t.d3;i.internal=b;return i}return e}(P);(w=A.prototype).init=function e(){var n=this.owner,r=n.config,i=n.main;n.axes.x=i.append("g").attr("class",t.axis+" "+t.axisX).attr("clip-path",r.axis_x_inner?"":n.clipPathForXAxis).attr("transform",n.getTranslate("x")).style("visibility",r.axis_x_show?"visible":"hidden");n.axes.x.append("text").attr("class",t.axisXLabel).attr("transform",r.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this));n.axes.y=i.append("g").attr("class",t.axis+" "+t.axisY).attr("clip-path",r.axis_y_inner?"":n.clipPathForYAxis).attr("transform",n.getTranslate("y")).style("visibility",r.axis_y_show?"visible":"hidden");n.axes.y.append("text").attr("class",t.axisYLabel).attr("transform",r.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this));n.axes.y2=i.append("g").attr("class",t.axis+" "+t.axisY2).attr("transform",n.getTranslate("y2")).style("visibility",r.axis_y2_show?"visible":"hidden");n.axes.y2.append("text").attr("class",t.axisY2Label).attr("transform",r.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))};w.getXAxis=function t(e,n,r,i,a,o,s){var u=this.owner,c=u.config,l={isCategory:u.isCategorized(),withOuterTick:a,tickMultiline:c.axis_x_tick_multiline,tickMultilineMax:c.axis_x_tick_multiline?Number(c.axis_x_tick_multilineMax):0,tickWidth:c.axis_x_tick_width,tickTextRotate:s?0:c.axis_x_tick_rotate,withoutTransition:o},f=new this.internal(this,l).axis.scale(e).orient(n);if(u.isTimeSeries()&&i&&"function"!==typeof i)i=i.map(function(t){return u.parseDate(t)});f.tickFormat(r).tickValues(i);if(u.isCategorized()){f.tickCentered(c.axis_x_tick_centered);if(p(c.axis_x_tick_culling))c.axis_x_tick_culling=false}return f};w.updateXAxisTickValues=function t(e,n){var r=this.owner,i=r.config,a;if(i.axis_x_tick_fit||i.axis_x_tick_count)a=this.generateTickValues(r.mapTargetsToUniqueXs(e),i.axis_x_tick_count,r.isTimeSeries());if(n)n.tickValues(a);else{r.xAxis.tickValues(a);r.subXAxis.tickValues(a)}return a};w.getYAxis=function t(e,n,r,i,a,o,s){var u=this.owner,c=u.config,l={withOuterTick:a,withoutTransition:o,tickTextRotate:s?0:c.axis_y_tick_rotate},f=new this.internal(this,l).axis.scale(e).orient(n).tickFormat(r);if(u.isTimeSeriesY())f.ticks(u.d3.time[c.axis_y_tick_time_value],c.axis_y_tick_time_interval);else f.tickValues(i);return f};w.getId=function t(e){var n=this.owner.config;return e in n.data_axes?n.data_axes[e]:"y"};w.getXAxisTickFormat=function t(){var e=this.owner,n=e.config,r=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(t){return t<0?t.toFixed(0):t};if(n.axis_x_tick_format)if(s(n.axis_x_tick_format))r=n.axis_x_tick_format;else if(e.isTimeSeries())r=function t(r){return r?e.axisTimeFormat(n.axis_x_tick_format)(r):""};return s(r)?function(t){return r.call(e,t)}:r};w.getTickValues=function t(e,n){return e?e:n?n.tickValues():void 0};w.getXAxisTickValues=function t(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)};w.getYAxisTickValues=function t(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)};w.getY2AxisTickValues=function t(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)};w.getLabelOptionByAxisId=function t(e){var n,r=this.owner.config,i;if("y"===e)i=r.axis_y_label;else if("y2"===e)i=r.axis_y2_label;else if("x"===e)i=r.axis_x_label;return i};w.getLabelText=function t(e){var n=this.getLabelOptionByAxisId(e);return c(n)?n:n?n.text:null};w.setLabelText=function t(e,n){var r,i=this.owner.config,a=this.getLabelOptionByAxisId(e);if(c(a)){if("y"===e)i.axis_y_label=n;else if("y2"===e)i.axis_y2_label=n;else if("x"===e)i.axis_x_label=n}else if(a)a.text=n};w.getLabelPosition=function t(n,r){var i=this.getLabelOptionByAxisId(n),a=i&&"object"===("undefined"===typeof i?"undefined":e(i))&&i.position?i.position:r;return{isInner:a.indexOf("inner")>=0,isOuter:a.indexOf("outer")>=0,isLeft:a.indexOf("left")>=0,isCenter:a.indexOf("center")>=0,isRight:a.indexOf("right")>=0,isTop:a.indexOf("top")>=0,isMiddle:a.indexOf("middle")>=0,isBottom:a.indexOf("bottom")>=0}};w.getXAxisLabelPosition=function t(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")};w.getYAxisLabelPosition=function t(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")};w.getY2AxisLabelPosition=function t(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")};w.getLabelPositionById=function t(e){return"y2"===e?this.getY2AxisLabelPosition():"y"===e?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};w.textForXAxisLabel=function t(){return this.getLabelText("x")};w.textForYAxisLabel=function t(){return this.getLabelText("y")};w.textForY2AxisLabel=function t(){return this.getLabelText("y2")};w.xForAxisLabel=function t(e,n){var r=this.owner;if(e)return n.isLeft?0:n.isCenter?r.width/2:r.width;else return n.isBottom?-r.height:n.isMiddle?-r.height/2:0};w.dxForAxisLabel=function t(e,n){if(e)return n.isLeft?"0.5em":n.isRight?"-0.5em":"0";else return n.isTop?"-0.5em":n.isBottom?"0.5em":"0"};w.textAnchorForAxisLabel=function t(e,n){if(e)return n.isLeft?"start":n.isCenter?"middle":"end";else return n.isBottom?"start":n.isMiddle?"middle":"end"};w.xForXAxisLabel=function t(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};w.xForYAxisLabel=function t(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};w.xForY2AxisLabel=function t(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};w.dxForXAxisLabel=function t(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};w.dxForYAxisLabel=function t(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};w.dxForY2AxisLabel=function t(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};w.dyForXAxisLabel=function t(){var e=this.owner,n=e.config,r=this.getXAxisLabelPosition();if(n.axis_rotated)return r.isInner?"1.2em":-25-(e.config.axis_x_inner?0:this.getMaxTickWidth("x"));else return r.isInner?"-0.5em":n.axis_x_height?n.axis_x_height-10:"3em"};w.dyForYAxisLabel=function t(){var e=this.owner,n=this.getYAxisLabelPosition();if(e.config.axis_rotated)return n.isInner?"-0.5em":"3em";else return n.isInner?"1.2em":-10-(e.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)};w.dyForY2AxisLabel=function t(){var e=this.owner,n=this.getY2AxisLabelPosition();if(e.config.axis_rotated)return n.isInner?"1.2em":"-2.2em";else return n.isInner?"-0.5em":15+(e.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)};w.textAnchorForXAxisLabel=function t(){var e=this.owner;return this.textAnchorForAxisLabel(!e.config.axis_rotated,this.getXAxisLabelPosition())};w.textAnchorForYAxisLabel=function t(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getYAxisLabelPosition())};w.textAnchorForY2AxisLabel=function t(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getY2AxisLabelPosition())};w.getMaxTickWidth=function t(e,n){var r=this.owner,i=r.config,a=0,o,s,u,c,l;if(n&&r.currentMaxTickWidths[e])return r.currentMaxTickWidths[e];if(r.svg){o=r.filterTargetsToShow(r.data.targets);if("y"===e){s=r.y.copy().domain(r.getYDomain(o,"y"));u=this.getYAxis(s,r.yOrient,i.axis_y_tick_format,r.yAxisTickValues,false,true,true)}else if("y2"===e){s=r.y2.copy().domain(r.getYDomain(o,"y2"));u=this.getYAxis(s,r.y2Orient,i.axis_y2_tick_format,r.y2AxisTickValues,false,true,true)}else{s=r.x.copy().domain(r.getXDomain(o));u=this.getXAxis(s,r.xOrient,r.xAxisTickFormat,r.xAxisTickValues,false,true,true);this.updateXAxisTickValues(o,u)}(l=(c=r.d3.select("body").append("div").classed("c3",true)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0)).append("g").call(u).each(function(){r.d3.select(this).selectAll("text").each(function(){var t=this.getBoundingClientRect();if(a<t.width)a=t.width});c.remove()})}r.currentMaxTickWidths[e]=a<=0?r.currentMaxTickWidths[e]:a;return r.currentMaxTickWidths[e]};w.updateLabels=function e(n){var r=this.owner;var i=r.main.select("."+t.axisX+" ."+t.axisXLabel),a=r.main.select("."+t.axisY+" ."+t.axisYLabel),o=r.main.select("."+t.axisY2+" ."+t.axisY2Label);(n?i.transition():i).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));(n?a.transition():a).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));(n?o.transition():o).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))};w.getPadding=function t(e,n,r,i){var a="number"===typeof e?e:e[n];if(!o(a))return r;if("ratio"===e.unit)return e[n]*i;return this.convertPixelsToAxisPadding(a,i)};w.convertPixelsToAxisPadding=function t(e,n){var r=this.owner,i;return n*(e/(r.config.axis_rotated?r.width:r.height))};w.generateTickValues=function t(e,n,r){var i=e,a,o,u,c,l,f,h;if(n)if(1===(a=s(n)?n():n))i=[e[0]];else if(2===a)i=[e[0],e[e.length-1]];else if(a>2){c=a-2;o=e[0];l=((u=e[e.length-1])-o)/(c+1);i=[o];for(f=0;f<c;f++){h=+o+l*(f+1);i.push(r?new Date(h):h)}i.push(u)}if(!r)i=i.sort(function(t,e){return t-e});return i};w.generateTransitions=function t(e){var n,r=this.owner.axes;return{axisX:e?r.x.transition().duration(e):r.x,axisY:e?r.y.transition().duration(e):r.y,axisY2:e?r.y2.transition().duration(e):r.y2,axisSubX:e?r.subx.transition().duration(e):r.subx}};w.redraw=function t(e,n){var r=this.owner;r.axes.x.style("opacity",n?0:1);r.axes.y.style("opacity",n?0:1);r.axes.y2.style("opacity",n?0:1);r.axes.subx.style("opacity",n?0:1);e.axisX.call(r.xAxis);e.axisY.call(r.yAxis);e.axisY2.call(r.y2Axis);e.axisSubX.call(r.subXAxis)};var T={version:"0.4.23"};var M;var C;function P(t,e,n){this.owner=t;T.chart.internal[e]=n}function L(t){var e=this.internal=new E(this);e.loadConfig(t);e.beforeInit(t);e.init();e.afterInit(t);!function t(e,n,r){Object.keys(e).forEach(function(i){n[i]=e[i].bind(r);if(Object.keys(e[i]).length>0)t(e[i],n[i],r)})}(M,this,this)}function E(t){var e=this;e.d3=window.d3?window.d3:true?n(10073):void 0;e.api=t;e.config=e.getDefaultConfig();e.data={};e.cache={};e.axes={}}T.generate=function(t){return new L(t)};T.chart={fn:L.prototype,internal:{fn:E.prototype}};M=T.chart.fn;(C=T.chart.internal.fn).beforeInit=function(){};C.afterInit=function(){};C.init=function(){var t=this,e=t.config;t.initParams();if(e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else if(e.data_columns)t.initWithData(t.convertColumnsToData(e.data_columns));else throw Error("url or json or rows or columns is required.")};C.initParams=function(){var t=this,e=t.d3,n=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis);t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null;t.dragging=false;t.flowing=false;t.cancelClick=false;t.mouseover=false;t.transiting=false;t.color=t.generateColor();t.levelColor=t.generateLevelColor();t.dataTimeFormat=n.data_xLocaltime?e.time.format:e.time.format.utc;t.axisTimeFormat=n.axis_x_localtime?e.time.format:e.time.format.utc;t.defaultAxisTimeFormat=t.axisTimeFormat.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%-m/%-d",function(t){return t.getDay()&&1!==t.getDate()}],["%-m/%-d",function(t){return 1!==t.getDate()}],["%-m/%-d",function(t){return t.getMonth()}],["%Y/%-m/%-d",function(){return true}]]);t.hiddenTargetIds=[];t.hiddenLegendIds=[];t.focusedTargetIds=[];t.defocusedTargetIds=[];t.xOrient=n.axis_rotated?n.axis_x_inner?"right":"left":n.axis_x_inner?"top":"bottom";t.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left";t.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right";t.subXOrient=n.axis_rotated?"left":"bottom";t.isLegendRight="right"===n.legend_position;t.isLegendInset="inset"===n.legend_position;t.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor;t.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor;t.legendStep=0;t.legendItemWidth=0;t.legendItemHeight=0;t.currentMaxTickWidths={x:0,y:0,y2:0};t.rotated_padding_left=30;t.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30;t.rotated_padding_top=5;t.withoutFadeIn={};t.intervalForObserveInserted=void 0;t.axes.subx=e.selectAll([])};C.initChartElements=function(){if(this.initBar)this.initBar();if(this.initLine)this.initLine();if(this.initArc)this.initArc();if(this.initGauge)this.initGauge();if(this.initText)this.initText()};C.initWithData=function(e){var n=this,r=n.d3,i=n.config;var a,o,s=true;n.axis=new A(n);if(n.initPie)n.initPie();if(n.initBrush)n.initBrush();if(n.initZoom)n.initZoom();if(!i.bindto)n.selectChart=r.selectAll([]);else if("function"===typeof i.bindto.node)n.selectChart=i.bindto;else n.selectChart=r.select(i.bindto);if(n.selectChart.empty()){n.selectChart=r.select(document.createElement("div")).style("opacity",0);n.observeInserted(n.selectChart);s=false}n.selectChart.html("").classed("c3",true);n.data.xs={};n.data.targets=n.convertDataToTargets(e);if(i.data_filter)n.data.targets=n.data.targets.filter(i.data_filter);if(i.data_hide)n.addHiddenTargetIds(true===i.data_hide?n.mapToIds(n.data.targets):i.data_hide);if(i.legend_hide)n.addHiddenLegendIds(true===i.legend_hide?n.mapToIds(n.data.targets):i.legend_hide);n.updateSizes();n.updateScales();n.x.domain(r.extent(n.getXDomain(n.data.targets)));n.y.domain(n.getYDomain(n.data.targets,"y"));n.y2.domain(n.getYDomain(n.data.targets,"y2"));n.subX.domain(n.x.domain());n.subY.domain(n.y.domain());n.subY2.domain(n.y2.domain());n.orgXDomain=n.x.domain();if(n.brush)n.brush.scale(n.subX);if(i.zoom_enabled)n.zoom.scale(n.x);n.svg=n.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return i.onmouseover.call(n)}).on("mouseleave",function(){return i.onmouseout.call(n)});if(n.config.svg_classname)n.svg.attr("class",n.config.svg_classname);a=n.svg.append("defs");n.clipChart=n.appendClip(a,n.clipId);n.clipXAxis=n.appendClip(a,n.clipIdForXAxis);n.clipYAxis=n.appendClip(a,n.clipIdForYAxis);n.clipGrid=n.appendClip(a,n.clipIdForGrid);n.clipSubchart=n.appendClip(a,n.clipIdForSubchart);n.updateSvgSize();o=n.main=n.svg.append("g").attr("transform",n.getTranslate("main"));if(n.initSubchart)n.initSubchart();if(n.initTooltip)n.initTooltip();if(n.initLegend)n.initLegend();if(n.initTitle)n.initTitle();o.append("text").attr("class",t.text+" "+t.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");n.initRegion();n.initGrid();o.append("g").attr("clip-path",n.clipPath).attr("class",t.chart);if(i.grid_lines_front)n.initGridLines();n.initEventRect();n.initChartElements();o.insert("rect",i.zoom_privileged?null:"g."+t.regions).attr("class",t.zoomRect).attr("width",n.width).attr("height",n.height).style("opacity",0).on("dblclick.zoom",null);if(i.axis_x_extent)n.brush.extent(n.getDefaultExtent());n.axis.init();n.updateTargets(n.data.targets);if(s){n.updateDimension();n.config.oninit.call(n);n.redraw({withTransition:false,withTransform:true,withUpdateXDomain:true,withUpdateOrgXDomain:true,withTransitionForAxis:false})}n.bindResize();n.api.element=n.selectChart.node()};C.smoothLines=function(t,e){var n=this;if("grid"===e)t.each(function(){var t=n.d3.select(this),e=t.attr("x1"),r=t.attr("x2"),i=t.attr("y1"),a=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(r),y1:Math.ceil(i),y2:Math.ceil(a)})})};C.updateSizes=function(){var t=this,e=t.config;var n=t.legend?t.getLegendHeight():0,r=t.legend?t.getLegendWidth():0,i=t.isLegendRight||t.isLegendInset?0:n,a=t.hasArcType(),o=e.axis_rotated||a?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&&!a?e.subchart_size_height+o:0;t.currentWidth=t.getCurrentWidth();t.currentHeight=t.getCurrentHeight();t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+i+t.getCurrentPaddingBottom(),left:s+(a?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:a?0:t.getCurrentPaddingRight(),bottom:o+s+i+t.getCurrentPaddingBottom(),left:a?0:t.getCurrentPaddingLeft()};t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+i,left:t.rotated_padding_left}:{top:t.currentHeight-s-i,right:NaN,bottom:o+i,left:t.margin.left};t.margin3={top:0,right:NaN,bottom:0,left:0};if(t.updateSizeForLegend)t.updateSizeForLegend(n,r);t.width=t.currentWidth-t.margin.left-t.margin.right;t.height=t.currentHeight-t.margin.top-t.margin.bottom;if(t.width<0)t.width=0;if(t.height<0)t.height=0;t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width;t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom;if(t.width2<0)t.width2=0;if(t.height2<0)t.height2=0;t.arcWidth=t.width-(t.isLegendRight?r+10:0);t.arcHeight=t.height-(t.isLegendRight?0:10);if(t.hasType("gauge")&&!e.gauge_fullCircle)t.arcHeight+=t.height-t.getGaugeLabelHeight();if(t.updateRadius)t.updateRadius();if(t.isLegendRight&&a)t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded};C.updateTargets=function(t){var e=this;e.updateTargetsForText(t);e.updateTargetsForBar(t);e.updateTargetsForLine(t);if(e.hasArcType()&&e.updateTargetsForArc)e.updateTargetsForArc(t);if(e.updateTargetsForSubchart)e.updateTargetsForSubchart(t);e.showTargets()};C.showTargets=function(){var e=this;e.svg.selectAll("."+t.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)};C.redraw=function(e,n){var r=this,i=r.main,a=r.d3,o=r.config;var s=r.getShapeIndices(r.isAreaType),u=r.getShapeIndices(r.isBarType),c=r.getShapeIndices(r.isLineType);var l,f,h,d,g,p,v,m,x,_,w,S,b;var A=r.hasArcType();var T,M,C,P,L;var E,k,V;var O,I;var R=r.filterTargetsToShow(r.data.targets),G,N,D,F;var z=r.xv.bind(r),j,X;l=y(e=e||{},"withY",true);f=y(e,"withSubchart",true);h=y(e,"withTransition",true);p=y(e,"withTransform",false);v=y(e,"withUpdateXDomain",false);m=y(e,"withUpdateOrgXDomain",false);x=y(e,"withTrimXDomain",true);b=y(e,"withUpdateXAxis",v);_=y(e,"withLegend",false);w=y(e,"withEventRect",true);S=y(e,"withDimension",true);d=y(e,"withTransitionForExit",h);g=y(e,"withTransitionForAxis",h);E=h?o.transition_duration:0;k=d?E:0;V=g?E:0;n=n||r.axis.generateTransitions(V);if(_&&o.legend_show)r.updateLegend(r.mapToIds(r.data.targets),e,n);else if(S)r.updateDimension(true);if(r.isCategorized()&&0===R.length)r.x.domain([0,r.axes.x.selectAll(".tick").size()]);if(R.length){r.updateXDomain(R,v,m,x);if(!o.axis_x_tick_values)G=r.axis.updateXAxisTickValues(R)}else{r.xAxis.tickValues([]);r.subXAxis.tickValues([])}if(o.zoom_rescale&&!e.flow)F=r.x.orgDomain();r.y.domain(r.getYDomain(R,"y",F));r.y2.domain(r.getYDomain(R,"y2",F));if(!o.axis_y_tick_values&&o.axis_y_tick_count)r.yAxis.tickValues(r.axis.generateTickValues(r.y.domain(),o.axis_y_tick_count));if(!o.axis_y2_tick_values&&o.axis_y2_tick_count)r.y2Axis.tickValues(r.axis.generateTickValues(r.y2.domain(),o.axis_y2_tick_count));r.axis.redraw(n,A);r.axis.updateLabels(h);if((v||b)&&R.length)if(o.axis_x_tick_culling&&G){for(N=1;N<G.length;N++)if(G.length/N<o.axis_x_tick_culling_max){D=N;break}r.svg.selectAll("."+t.axisX+" .tick text").each(function(t){var e=G.indexOf(t);if(e>=0)a.select(this).style("display",e%D?"none":"block")})}else r.svg.selectAll("."+t.axisX+" .tick text").style("display","block");T=r.generateDrawArea?r.generateDrawArea(s,false):void 0;M=r.generateDrawBar?r.generateDrawBar(u):void 0;C=r.generateDrawLine?r.generateDrawLine(c,false):void 0;P=r.generateXYForText(s,u,c,true);L=r.generateXYForText(s,u,c,false);if(l){r.subY.domain(r.getYDomain(R,"y"));r.subY2.domain(r.getYDomain(R,"y2"))}r.updateXgridFocus();i.select("text."+t.text+"."+t.empty).attr("x",r.width/2).attr("y",r.height/2).text(o.data_empty_label_text).transition().style("opacity",R.length?0:1);r.updateGrid(E);r.updateRegion(E);r.updateBar(k);r.updateLine(k);r.updateArea(k);r.updateCircle();if(r.hasDataLabel())r.updateText(k);if(r.redrawTitle)r.redrawTitle();if(r.redrawArc)r.redrawArc(E,k,p);if(r.redrawSubchart)r.redrawSubchart(f,n,E,k,s,u,c);i.selectAll("."+t.selectedCircles).filter(r.isBarType.bind(r)).selectAll("circle").remove();if(o.interaction_enabled&&!e.flow&&w){r.redrawEventRect();if(r.updateZoom)r.updateZoom()}r.updateCircleY();j=(r.config.axis_rotated?r.circleY:r.circleX).bind(r);X=(r.config.axis_rotated?r.circleX:r.circleY).bind(r);if(e.flow)I=r.generateFlow({targets:R,flow:e.flow,duration:e.flow.duration,drawBar:M,drawLine:C,drawArea:T,cx:j,cy:X,xv:z,xForText:P,yForText:L});if((E||I)&&r.isTabVisible())a.transition().duration(E).each(function(){var t=[];[r.redrawBar(M,true),r.redrawLine(C,true),r.redrawArea(T,true),r.redrawCircle(j,X,true),r.redrawText(P,L,e.flow,true),r.redrawRegion(true),r.redrawGrid(true)].forEach(function(e){e.forEach(function(e){t.push(e)})});O=r.generateWait();t.forEach(function(t){O.add(t)})}).call(O,function(){if(I)I();if(o.onrendered)o.onrendered.call(r)});else{r.redrawBar(M);r.redrawLine(C);r.redrawArea(T);r.redrawCircle(j,X);r.redrawText(P,L,e.flow);r.redrawRegion();r.redrawGrid();if(o.onrendered)o.onrendered.call(r)}r.mapToIds(r.data.targets).forEach(function(t){r.withoutFadeIn[t]=true})};C.updateAndRedraw=function(t){var e=this,n=e.config,r;(t=t||{}).withTransition=y(t,"withTransition",true);t.withTransform=y(t,"withTransform",false);t.withLegend=y(t,"withLegend",false);t.withUpdateXDomain=true;t.withUpdateOrgXDomain=true;t.withTransitionForExit=false;t.withTransitionForTransform=y(t,"withTransitionForTransform",t.withTransition);e.updateSizes();if(!(t.withLegend&&n.legend_show)){r=e.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0);e.updateScales();e.updateSvgSize();e.transformAll(t.withTransitionForTransform,r)}e.redraw(t,r)};C.redrawWithoutRescale=function(){this.redraw({withY:false,withSubchart:false,withEventRect:false,withTransitionForAxis:false})};C.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type};C.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0};C.isCustomX=function(){var t=this,e=t.config;return!t.isTimeSeries()&&(e.data_x||v(e.data_xs))};C.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type};C.getTranslate=function(t){var e=this,n=e.config,r,i;if("main"===t){r=d(e.margin.left);i=d(e.margin.top)}else if("context"===t){r=d(e.margin2.left);i=d(e.margin2.top)}else if("legend"===t){r=e.margin3.left;i=e.margin3.top}else if("x"===t){r=0;i=n.axis_rotated?0:e.height}else if("y"===t){r=0;i=n.axis_rotated?e.height:0}else if("y2"===t){r=n.axis_rotated?0:e.width;i=n.axis_rotated?1:0}else if("subx"===t){r=0;i=n.axis_rotated?0:e.height2}else if("arc"===t){r=e.arcWidth/2;i=e.arcHeight/2-(e.hasType("gauge")?6:0)}return"translate("+r+","+i+")"};C.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0};C.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0};C.opacityForCircle=function(t){var e;var n=(s(this.config.point_show)?this.config.point_show(t):this.config.point_show)?1:0;return o(t.value)?this.isScatterType(t)?.5:n:0};C.opacityForText=function(){return this.hasDataLabel()?1:0};C.xx=function(t){return t?this.x(t.x):null};C.xv=function(t){var e=this,n=t.value;if(e.isTimeSeries())n=e.parseDate(t.value);else if(e.isCategorized()&&"string"===typeof t.value)n=e.config.axis_x_categories.indexOf(t.value);return Math.ceil(e.x(n))};C.yv=function(t){var e=this,n=t.axis&&"y2"===t.axis?e.y2:e.y;return Math.ceil(n(t.value))};C.subxx=function(t){return t?this.subX(t.x):null};C.transformMain=function(e,n){var r=this,i,a,o;if(n&&n.axisX)i=n.axisX;else{i=r.main.select("."+t.axisX);if(e)i=i.transition()}if(n&&n.axisY)a=n.axisY;else{a=r.main.select("."+t.axisY);if(e)a=a.transition()}if(n&&n.axisY2)o=n.axisY2;else{o=r.main.select("."+t.axisY2);if(e)o=o.transition()}(e?r.main.transition():r.main).attr("transform",r.getTranslate("main"));i.attr("transform",r.getTranslate("x"));a.attr("transform",r.getTranslate("y"));o.attr("transform",r.getTranslate("y2"));r.main.select("."+t.chartArcs).attr("transform",r.getTranslate("arc"))};C.transformAll=function(t,e){var n=this;n.transformMain(t,e);if(n.config.subchart_show)n.transformContext(t,e);if(n.legend)n.transformLegend(t)};C.updateSvgSize=function(){var e=this,n=e.svg.select(".c3-brush .background");e.svg.attr("width",e.currentWidth).attr("height",e.currentHeight);e.svg.selectAll(["#"+e.clipId,"#"+e.clipIdForGrid]).select("rect").attr("width",e.width).attr("height",e.height);e.svg.select("#"+e.clipIdForXAxis).select("rect").attr("x",e.getXAxisClipX.bind(e)).attr("y",e.getXAxisClipY.bind(e)).attr("width",e.getXAxisClipWidth.bind(e)).attr("height",e.getXAxisClipHeight.bind(e));e.svg.select("#"+e.clipIdForYAxis).select("rect").attr("x",e.getYAxisClipX.bind(e)).attr("y",e.getYAxisClipY.bind(e)).attr("width",e.getYAxisClipWidth.bind(e)).attr("height",e.getYAxisClipHeight.bind(e));e.svg.select("#"+e.clipIdForSubchart).select("rect").attr("width",e.width).attr("height",n.size()?n.attr("height"):0);e.svg.select("."+t.zoomRect).attr("width",e.width).attr("height",e.height);e.selectChart.style("max-height",e.currentHeight+"px")};C.updateDimension=function(t){var e=this;if(!t)if(e.config.axis_rotated){e.axes.x.call(e.xAxis);e.axes.subx.call(e.subXAxis)}else{e.axes.y.call(e.yAxis);e.axes.y2.call(e.y2Axis)}e.updateSizes();e.updateScales();e.updateSvgSize();e.transformAll(false)};C.observeInserted=function(t){var e=this,n;if("undefined"===typeof MutationObserver){window.console.error("MutationObserver not defined.");return}(n=new MutationObserver(function(r){r.forEach(function(r){if("childList"===r.type&&r.previousSibling){n.disconnect();e.intervalForObserveInserted=window.setInterval(function(){if(t.node().parentNode){window.clearInterval(e.intervalForObserveInserted);e.updateDimension();if(e.brush)e.brush.update();e.config.oninit.call(e);e.redraw({withTransform:true,withUpdateXDomain:true,withUpdateOrgXDomain:true,withTransition:false,withTransitionForTransform:false,withLegend:true});t.transition().style("opacity",1)}},10)}})})).observe(t.node(),{attributes:true,childList:true,characterData:true})};C.bindResize=function(){var t=this,e=t.config;t.resizeFunction=t.generateResize();t.resizeFunction.add(function(){e.onresize.call(t)});if(e.resize_auto)t.resizeFunction.add(function(){if(void 0!==t.resizeTimeout)window.clearTimeout(t.resizeTimeout);t.resizeTimeout=window.setTimeout(function(){delete t.resizeTimeout;t.api.flush()},100)});t.resizeFunction.add(function(){e.onresized.call(t)});t.resizeIfElementDisplayed=function(){if(null==t.api||!t.api.element.offsetParent)return;t.resizeFunction()};if(window.attachEvent)window.attachEvent("onresize",t.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",t.resizeIfElementDisplayed,false);else{var n=window.onresize;if(!n)n=t.generateResize();else if(!n.add||!n.remove)(n=t.generateResize()).add(window.onresize);n.add(t.resizeFunction);window.onresize=function(){if(!t.api.element.offsetParent)return;n()}}};C.generateResize=function(){var t=[];function e(){t.forEach(function(t){t()})}e.add=function(e){t.push(e)};e.remove=function(e){for(var n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}};return e};C.endall=function(t,e){var n=0;t.each(function(){++n}).each("end",function(){if(!--n)e.apply(this,arguments)})};C.generateWait=function(){var t=[],e=function e(n,r){var i=setInterval(function(){var e=0;t.forEach(function(t){if(t.empty()){e+=1;return}try{t.transition()}catch(t){e+=1}});if(e===t.length){clearInterval(i);if(r)r()}},10)};e.add=function(e){t.push(e)};return e};C.parseDate=function(t){var n=this,r;if(t instanceof Date)r=t;else if("string"===typeof t)r=n.dataTimeFormat(n.config.data_xFormat).parse(t);else if("object"===("undefined"===typeof t?"undefined":e(t)))r=new Date(+t);else if("number"===typeof t&&!isNaN(t))r=new Date(+t);if(!r||isNaN(+r))window.console.error("Failed to parse x '"+t+"' to Date object");return r};C.isTabVisible=function(){var t;if("undefined"!==typeof document.hidden)t="hidden";else if("undefined"!==typeof document.mozHidden)t="mozHidden";else if("undefined"!==typeof document.msHidden)t="msHidden";else if("undefined"!==typeof document.webkitHidden)t="webkitHidden";return document[t]?false:true};C.isValue=o;C.isFunction=s;C.isString=c;C.isUndefined=l;C.isDefined=f;C.ceil10=h;C.asHalfPixel=d;C.diffDomain=g;C.isEmpty=p;C.notEmpty=v;C.notEmpty=v;C.getOption=y;C.hasValue=m;C.sanitise=x;C.getPathBox=_;C.CLASS=t;if(!Function.prototype.bind)Function.prototype.bind=function(t){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function t(){},i=function i(){return n.apply(this instanceof r?this:t,e.concat(Array.prototype.slice.call(arguments)))};r.prototype=this.prototype;i.prototype=new r;return i};!function(){if(!("SVGPathSeg"in window)){window.SVGPathSeg=function(t,e,n){this.pathSegType=t;this.pathSegTypeAsLetter=e;this._owningPathSegList=n};window.SVGPathSeg.prototype.classname="SVGPathSeg";window.SVGPathSeg.PATHSEG_UNKNOWN=0;window.SVGPathSeg.PATHSEG_CLOSEPATH=1;window.SVGPathSeg.PATHSEG_MOVETO_ABS=2;window.SVGPathSeg.PATHSEG_MOVETO_REL=3;window.SVGPathSeg.PATHSEG_LINETO_ABS=4;window.SVGPathSeg.PATHSEG_LINETO_REL=5;window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6;window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7;window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8;window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9;window.SVGPathSeg.PATHSEG_ARC_ABS=10;window.SVGPathSeg.PATHSEG_ARC_REL=11;window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12;window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13;window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14;window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15;window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16;window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17;window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18;window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19;window.SVGPathSeg.prototype._segmentChanged=function(){if(this._owningPathSegList)this._owningPathSegList.segmentChanged(this)};window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)};window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"};window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter};window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)};window.SVGPathSegMovetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t);this._x=e;this._y=n};window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"};window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y};window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)};Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});window.SVGPathSegMovetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t);this._x=e;this._y=n};window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"};window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y};window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)};Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t);this._x=e;this._y=n};window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"};window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y};window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)};Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t);this._x=e;this._y=n};window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"};window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y};window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)};Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoCubicAbs=function(t,e,n,r,i,a,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t);this._x=e;this._y=n;this._x1=r;this._y1=i;this._x2=a;this._y2=o};window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"};window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y};window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)};Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function t(){return this._x1},set:function t(e){this._x1=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function t(){return this._y1},set:function t(e){this._y1=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function t(){return this._x2},set:function t(e){this._x2=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function t(){return this._y2},set:function t(e){this._y2=e;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoCubicRel=function(t,e,n,r,i,a,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t);this._x=e;this._y=n;this._x1=r;this._y1=i;this._x2=a;this._y2=o};window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"};window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y};window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)};Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function t(){return this._x1},set:function t(e){this._x1=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function t(){return this._y1},set:function t(e){this._y1=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function t(){return this._x2},set:function t(e){this._x2=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function t(){return this._y2},set:function t(e){this._y2=e;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoQuadraticAbs=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t);this._x=e;this._y=n;this._x1=r;this._y1=i};window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"};window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y};window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)};Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function t(){return this._x1},set:function t(e){this._x1=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function t(){return this._y1},set:function t(e){this._y1=e;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoQuadraticRel=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t);this._x=e;this._y=n;this._x1=r;this._y1=i};window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"};window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y};window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)};Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function t(){return this._x1},set:function t(e){this._x1=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function t(){return this._y1},set:function t(e){this._y1=e;this._segmentChanged()},enumerable:true});window.SVGPathSegArcAbs=function(t,e,n,r,i,a,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t);this._x=e;this._y=n;this._r1=r;this._r2=i;this._angle=a;this._largeArcFlag=o;this._sweepFlag=s};window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"};window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y};window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)};Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function t(){return this._r1},set:function t(e){this._r1=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function t(){return this._r2},set:function t(e){this._r2=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function t(){return this._angle},set:function t(e){this._angle=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function t(){return this._largeArcFlag},set:function t(e){this._largeArcFlag=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function t(){return this._sweepFlag},set:function t(e){this._sweepFlag=e;this._segmentChanged()},enumerable:true});window.SVGPathSegArcRel=function(t,e,n,r,i,a,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t);this._x=e;this._y=n;this._r1=r;this._r2=i;this._angle=a;this._largeArcFlag=o;this._sweepFlag=s};window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"};window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y};window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)};Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function t(){return this._r1},set:function t(e){this._r1=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function t(){return this._r2},set:function t(e){this._r2=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function t(){return this._angle},set:function t(e){this._angle=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function t(){return this._largeArcFlag},set:function t(e){this._largeArcFlag=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function t(){return this._sweepFlag},set:function t(e){this._sweepFlag=e;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t);this._x=e};window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"};window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x};window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)};Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t);this._x=e};window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"};window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x};window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)};Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t);this._y=e};window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"};window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y};window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)};Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t);this._y=e};window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"};window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y};window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)};Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t);this._x=e;this._y=n;this._x2=r;this._y2=i};window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"};window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y};window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)};Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function t(){return this._x2},set:function t(e){this._x2=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function t(){return this._y2},set:function t(e){this._y2=e;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,n,r,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t);this._x=e;this._y=n;this._x2=r;this._y2=i};window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"};window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y};window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)};Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function t(){return this._x2},set:function t(e){this._x2=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function t(){return this._y2},set:function t(e){this._y2=e;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t);this._x=e;this._y=n};window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"};window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y};window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)};Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t);this._x=e;this._y=n};window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"};window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y};window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)};Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function t(){return this._x},set:function t(e){this._x=e;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function t(){return this._y},set:function t(e){this._y=e;this._segmentChanged()},enumerable:true});window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)};window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)};window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)};window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)};window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)};window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,n,r,i,a){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,n,r,i,a)};window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,n,r,i,a){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,n,r,i,a)};window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,n,r){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,n,r)};window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,n,r){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,n,r)};window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,n,r,i,a,o){return new window.SVGPathSegArcAbs(void 0,t,e,n,r,i,a,o)};window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,n,r,i,a,o){return new window.SVGPathSegArcRel(void 0,t,e,n,r,i,a,o)};window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)};window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)};window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)};window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)};window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,r){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,n,r)};window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,n,r){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,n,r)};window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)};window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)};if(!("getPathSegAtLength"in window.SVGPathElement.prototype))window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var n=e.pathSegList.numberOfItems-1;if(n<=0)return 0;do{e.pathSegList.removeItem(n);if(t>e.getTotalLength())break;n--}while(n>0);return n}}if(!("SVGPathSegList"in window)){window.SVGPathSegList=function(t){this._pathElement=t;this._list=this._parsePath(this._pathElement.getAttribute("d"));this._mutationObserverConfig={attributes:true,attributeFilter:["d"]};this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this));this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)};window.SVGPathSegList.prototype.classname="SVGPathSegList";Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function t(){this._checkPathSynchronizedToList();return this._list.length},enumerable:true});Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function t(){if(!this._pathSegList)this._pathSegList=new window.SVGPathSegList(this);return this._pathSegList},enumerable:true});Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function t(){return this.pathSegList},enumerable:true});Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function t(){return this.pathSegList},enumerable:true});Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function t(){return this.pathSegList},enumerable:true});window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())};window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){if(!this._pathElement)return;var e=false;t.forEach(function(t){if("d"==t.attributeName)e=true});if(e)this._list=this._parsePath(this._pathElement.getAttribute("d"))};window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect();this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list));this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)};window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()};window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList();this._list.forEach(function(t){t._owningPathSegList=null});this._list=[];this._writeListToPath()};window.SVGPathSegList.prototype.initialize=function(t){this._checkPathSynchronizedToList();this._list=[t];t._owningPathSegList=this;this._writeListToPath();return t};window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"};window.SVGPathSegList.prototype.getItem=function(t){this._checkPathSynchronizedToList();this._checkValidIndex(t);return this._list[t]};window.SVGPathSegList.prototype.insertItemBefore=function(t,e){this._checkPathSynchronizedToList();if(e>this.numberOfItems)e=this.numberOfItems;if(t._owningPathSegList)t=t.clone();this._list.splice(e,0,t);t._owningPathSegList=this;this._writeListToPath();return t};window.SVGPathSegList.prototype.replaceItem=function(t,e){this._checkPathSynchronizedToList();if(t._owningPathSegList)t=t.clone();this._checkValidIndex(e);this._list[e]=t;t._owningPathSegList=this;this._writeListToPath();return t};window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList();this._checkValidIndex(t);var e=this._list[t];this._list.splice(t,1);this._writeListToPath();return e};window.SVGPathSegList.prototype.appendItem=function(t){this._checkPathSynchronizedToList();if(t._owningPathSegList)t=t.clone();this._list.push(t);t._owningPathSegList=this;this._writeListToPath();return t};window.SVGPathSegList._pathSegArrayAsString=function(t){var e="";var n=true;t.forEach(function(t){if(n){n=false;e+=t._asPathString()}else e+=" "+t._asPathString()});return e};window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];var e=this;var n=function t(){this.pathSegList=[]};n.prototype.appendSegment=function(t){this.pathSegList.push(t)};var r=function t(e){this._string=e;this._currentIndex=0;this._endIndex=this._string.length;this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN;this._skipOptionalSpaces()};r.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)};r.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex};r.prototype._skipOptionalSpacesOrDelimiter=function(){if(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))return false;if(this._skipOptionalSpaces())if(this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)){this._currentIndex++;this._skipOptionalSpaces()}return this._currentIndex<this._endIndex};r.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex};r.prototype.peekSegmentType=function(){var t=this._string[this._currentIndex];return this._pathSegTypeFromChar(t)};r.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}};r.prototype._nextCommandHelper=function(t,e){if(("+"==t||"-"==t||"."==t||t>="0"&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH){if(e==window.SVGPathSeg.PATHSEG_MOVETO_ABS)return window.SVGPathSeg.PATHSEG_LINETO_ABS;if(e==window.SVGPathSeg.PATHSEG_MOVETO_REL)return window.SVGPathSeg.PATHSEG_LINETO_REL;return e}return window.SVGPathSeg.PATHSEG_UNKNOWN};r.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return true;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL};r.prototype._parseNumber=function(){var t=0;var e=0;var n=1;var r=0;var i=1;var a=1;var o=this._currentIndex;this._skipOptionalSpaces();if(this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex))this._currentIndex++;else if(this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)){this._currentIndex++;i=-1}if(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))return;var s=this._currentIndex;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=s){var u=this._currentIndex-1;var c=1;for(;u>=s;){e+=c*(this._string.charAt(u--)-"0");c*=10}}if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){this._currentIndex++;if(this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";){n*=10;r+=(this._string.charAt(this._currentIndex)-"0")/n;this._currentIndex+=1}}if(this._currentIndex!=o&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){this._currentIndex++;if("+"==this._string.charAt(this._currentIndex))this._currentIndex++;else if("-"==this._string.charAt(this._currentIndex)){this._currentIndex++;a=-1}if(this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";){t*=10;t+=this._string.charAt(this._currentIndex)-"0";this._currentIndex++}}var l=e+r;l*=i;if(t)l*=Math.pow(10,a*t);if(o==this._currentIndex)return;this._skipOptionalSpacesOrDelimiter();return l};r.prototype._parseArcFlag=function(){if(this._currentIndex>=this._endIndex)return;var t=false;var e=this._string.charAt(this._currentIndex++);if("0"==e)t=false;else if("1"==e)t=true;else return;this._skipOptionalSpacesOrDelimiter();return t};r.prototype.parseSegment=function(){var t=this._string[this._currentIndex];var n=this._pathSegTypeFromChar(t);if(n==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((n=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;this._previousCommand=n;switch(n){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(e,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:this._skipOptionalSpaces();return new window.SVGPathSegClosePath(e);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var r={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(e,r.x,r.y,r.x1,r.y1,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var r={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicAbs(e,r.x,r.y,r.x1,r.y1,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var r={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothRel(e,r.x,r.y,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var r={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothAbs(e,r.x,r.y,r.x2,r.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var r={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticRel(e,r.x,r.y,r.x1,r.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var r={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticAbs(e,r.x,r.y,r.x1,r.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(e,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:var r={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcRel(e,r.x,r.y,r.x1,r.y1,r.arcAngle,r.arcLarge,r.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:var r={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcAbs(e,r.x,r.y,r.x1,r.y1,r.arcAngle,r.arcLarge,r.arcSweep);default:throw"Unknown path seg type."}};var i=new n;var a=new r(t);if(!a.initialCommandIsMoveTo())return[];for(;a.hasMoreData();){var o=a.parseSegment();if(!o)return[];i.appendSegment(o)}return i.pathSegList}}}();if(!String.prototype.padEnd)String.prototype.padEnd=function t(e,n){e>>=0;n=String("undefined"!==typeof n?n:" ");if(this.length>e)return String(this);else{if((e-=this.length)>n.length)n+=n.repeat(e/n.length);return String(this)+n.slice(0,e)}};M.axis=function(){};M.axis.labels=function(t){var e=this.internal;if(arguments.length){Object.keys(t).forEach(function(n){e.axis.setLabelText(n,t[n])});e.axis.updateLabels()}};M.axis.max=function(t){var n=this.internal,r=n.config;if(arguments.length){if("object"===("undefined"===typeof t?"undefined":e(t))){if(o(t.x))r.axis_x_max=t.x;if(o(t.y))r.axis_y_max=t.y;if(o(t.y2))r.axis_y2_max=t.y2}else r.axis_y_max=r.axis_y2_max=t;n.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}else return{x:r.axis_x_max,y:r.axis_y_max,y2:r.axis_y2_max}};M.axis.min=function(t){var n=this.internal,r=n.config;if(arguments.length){if("object"===("undefined"===typeof t?"undefined":e(t))){if(o(t.x))r.axis_x_min=t.x;if(o(t.y))r.axis_y_min=t.y;if(o(t.y2))r.axis_y2_min=t.y2}else r.axis_y_min=r.axis_y2_min=t;n.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}else return{x:r.axis_x_min,y:r.axis_y_min,y2:r.axis_y2_min}};M.axis.range=function(t){if(arguments.length){if(f(t.max))this.axis.max(t.max);if(f(t.min))this.axis.min(t.min)}else return{max:this.axis.max(),min:this.axis.min()}};M.category=function(t,e){var n=this.internal,r=n.config;if(arguments.length>1){r.axis_x_categories[t]=e;n.redraw()}return r.axis_x_categories[t]};M.categories=function(t){var e=this.internal,n=e.config;if(!arguments.length)return n.axis_x_categories;n.axis_x_categories=t;e.redraw();return n.axis_x_categories};M.resize=function(t){var e,n=this.internal.config;n.size_width=t?t.width:null;n.size_height=t?t.height:null;this.flush()};M.flush=function(){var t;this.internal.updateAndRedraw({withLegend:true,withTransition:false,withTransitionForTransform:false})};M.destroy=function(){var t=this.internal;window.clearInterval(t.intervalForObserveInserted);if(void 0!==t.resizeTimeout)window.clearTimeout(t.resizeTimeout);if(window.detachEvent)window.detachEvent("onresize",t.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",t.resizeIfElementDisplayed);else{var e=window.onresize;if(e&&e.add&&e.remove)e.remove(t.resizeFunction)}t.resizeFunction.remove();t.selectChart.classed("c3",false).html("");Object.keys(t).forEach(function(e){t[e]=null});return null};M.color=function(t){var e;return this.internal.color(t)};M.data=function(t){var e=this.internal.data.targets;return"undefined"===typeof t?e:e.filter(function(e){return[].concat(t).indexOf(e.id)>=0})};M.data.shown=function(t){return this.internal.filterTargetsToShow(this.data(t))};M.data.values=function(t){var e,n=null;if(t)n=(e=this.data(t))[0]?e[0].values.map(function(t){return t.value}):null;return n};M.data.names=function(t){this.internal.clearLegendItemTextBoxCache();return this.internal.updateDataAttributes("names",t)};M.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)};M.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)};M.flow=function(t){var e=this.internal,n,r,i=[],a=e.getMaxDataCount(),s,u,c,l,h=0,d=0,g,p;if(t.json)r=e.convertJsonToData(t.json,t.keys);else if(t.rows)r=e.convertRowsToData(t.rows);else if(t.columns)r=e.convertColumnsToData(t.columns);else return;n=e.convertDataToTargets(r,true);e.data.targets.forEach(function(t){var r=false,a,o;for(a=0;a<n.length;a++)if(t.id===n[a].id){r=true;if(t.values[t.values.length-1])d=t.values[t.values.length-1].index+1;h=n[a].values.length;for(o=0;o<h;o++){n[a].values[o].index=d+o;if(!e.isTimeSeries())n[a].values[o].x=d+o}t.values=t.values.concat(n[a].values);n.splice(a,1);break}if(!r)i.push(t.id)});e.data.targets.forEach(function(t){var n,r;for(n=0;n<i.length;n++)if(t.id===i[n]){d=t.values[t.values.length-1].index+1;for(r=0;r<h;r++)t.values.push({id:t.id,index:d+r,x:e.isTimeSeries()?e.getOtherTargetX(d+r):d+r,value:null})}});if(e.data.targets.length)n.forEach(function(t){var n,r=[];for(n=e.data.targets[0].values[0].index;n<d;n++)r.push({id:t.id,index:n,x:e.isTimeSeries()?e.getOtherTargetX(n):n,value:null});t.values.forEach(function(t){t.index+=d;if(!e.isTimeSeries())t.x+=d});t.values=r.concat(t.values)});e.data.targets=e.data.targets.concat(n);s=e.getMaxDataCount();l=(c=e.data.targets[0]).values[0];if(f(t.to)){h=0;p=e.isTimeSeries()?e.parseDate(t.to):t.to;c.values.forEach(function(t){if(t.x<p)h++})}else if(f(t.length))h=t.length;if(!a){if(e.isTimeSeries())if(c.values.length>1)g=c.values[c.values.length-1].x-l.x;else g=l.x-e.getXDomain(e.data.targets)[0];else g=1;u=[l.x-g,l.x];e.updateXDomain(null,true,true,false,u)}else if(1===a)if(e.isTimeSeries()){g=(c.values[c.values.length-1].x-l.x)/2;u=[new Date(+l.x-g),new Date(+l.x+g)];e.updateXDomain(null,true,true,false,u)}e.updateTargets(e.data.targets);e.redraw({flow:{index:l.index,length:h,duration:o(t.duration)?t.duration:e.config.transition_duration,done:t.done,orgDataCount:a},withLegend:true,withTransition:a>1,withTrimXDomain:false,withUpdateXAxis:true})};C.generateFlow=function(e){var n=this,r=n.config,i=n.d3;return function(){var a=e.targets,o=e.flow,s=e.drawBar,u=e.drawLine,c=e.drawArea,l=e.cx,f=e.cy,h=e.xv,d=e.xForText,p=e.yForText,v=e.duration;var y,m=1,x,_=o.index,w=o.length,S=n.getValueOnIndex(n.data.targets[0].values,_),b=n.getValueOnIndex(n.data.targets[0].values,_+w),A=n.x.domain(),T,M=o.duration||v,C=o.done||function(){},P=n.generateWait();var L=n.xgrid||i.selectAll([]),E=n.xgridLines||i.selectAll([]),k=n.mainRegion||i.selectAll([]),V=n.mainText||i.selectAll([]),O=n.mainBar||i.selectAll([]),I=n.mainLine||i.selectAll([]),R=n.mainArea||i.selectAll([]),G=n.mainCircle||i.selectAll([]);n.flowing=true;n.data.targets.forEach(function(t){t.values.splice(0,w)});T=n.updateXDomain(a,true,true);if(n.updateXGrid)n.updateXGrid(true);if(!o.orgDataCount)if(1!==n.data.targets[0].values.length)y=n.x(A[0])-n.x(T[0]);else if(n.isTimeSeries()){S=n.getValueOnIndex(n.data.targets[0].values,0);b=n.getValueOnIndex(n.data.targets[0].values,n.data.targets[0].values.length-1);y=n.x(S.x)-n.x(b.x)}else y=g(T)/2;else if(1===o.orgDataCount||(S&&S.x)===(b&&b.x))y=n.x(A[0])-n.x(T[0]);else if(n.isTimeSeries())y=n.x(A[0])-n.x(T[0]);else y=n.x(S.x)-n.x(b.x);m=g(A)/g(T);x="translate("+y+",0) scale("+m+",1)";n.hideXGridFocus();i.transition().ease("linear").duration(M).each(function(){P.add(n.axes.x.transition().call(n.xAxis));P.add(O.transition().attr("transform",x));P.add(I.transition().attr("transform",x));P.add(R.transition().attr("transform",x));P.add(G.transition().attr("transform",x));P.add(V.transition().attr("transform",x));P.add(k.filter(n.isRegionOnX).transition().attr("transform",x));P.add(L.transition().attr("transform",x));P.add(E.transition().attr("transform",x))}).call(P,function(){var e,i=[],a=[],o=[];if(w){for(e=0;e<w;e++){i.push("."+t.shape+"-"+(_+e));a.push("."+t.text+"-"+(_+e));o.push("."+t.eventRect+"-"+(_+e))}n.svg.selectAll("."+t.shapes).selectAll(i).remove();n.svg.selectAll("."+t.texts).selectAll(a).remove();n.svg.selectAll("."+t.eventRects).selectAll(o).remove();n.svg.select("."+t.xgrid).remove()}L.attr("transform",null).attr(n.xgridAttr);E.attr("transform",null);E.select("line").attr("x1",r.axis_rotated?0:h).attr("x2",r.axis_rotated?n.width:h);E.select("text").attr("x",r.axis_rotated?n.width:0).attr("y",h);O.attr("transform",null).attr("d",s);I.attr("transform",null).attr("d",u);R.attr("transform",null).attr("d",c);G.attr("transform",null).attr("cx",l).attr("cy",f);V.attr("transform",null).attr("x",d).attr("y",p).style("fill-opacity",n.opacityForText.bind(n));k.attr("transform",null);k.select("rect").filter(n.isRegionOnX).attr("x",n.regionX.bind(n)).attr("width",n.regionWidth.bind(n));if(r.interaction_enabled)n.redrawEventRect();C();n.flowing=false})}};M.focus=function(e){var n=this.internal,r;e=n.mapToTargetIds(e);r=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n))),this.revert();this.defocus();r.classed(t.focused,true).classed(t.defocused,false);if(n.hasArcType())n.expandArc(e);n.toggleFocusLegend(e,true);n.focusedTargetIds=e;n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return e.indexOf(t)<0})};M.defocus=function(e){var n=this.internal,r;e=n.mapToTargetIds(e);(r=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n)))).classed(t.focused,false).classed(t.defocused,true);if(n.hasArcType())n.unexpandArc(e);n.toggleFocusLegend(e,false);n.focusedTargetIds=n.focusedTargetIds.filter(function(t){return e.indexOf(t)<0});n.defocusedTargetIds=e};M.revert=function(e){var n=this.internal,r;e=n.mapToTargetIds(e);(r=n.svg.selectAll(n.selectorTargets(e))).classed(t.focused,false).classed(t.defocused,false);if(n.hasArcType())n.unexpandArc(e);if(n.config.legend_show){n.showLegend(e.filter(n.isLegendToShow.bind(n)));n.legend.selectAll(n.selectorLegends(e)).filter(function(){return n.d3.select(this).classed(t.legendItemFocused)}).classed(t.legendItemFocused,false)}n.focusedTargetIds=[];n.defocusedTargetIds=[]};M.xgrids=function(t){var e=this.internal,n=e.config;if(!t)return n.grid_x_lines;n.grid_x_lines=t;e.redrawWithoutRescale();return n.grid_x_lines};M.xgrids.add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t?t:[]))};M.xgrids.remove=function(t){var e;this.internal.removeGridLines(t,true)};M.ygrids=function(t){var e=this.internal,n=e.config;if(!t)return n.grid_y_lines;n.grid_y_lines=t;e.redrawWithoutRescale();return n.grid_y_lines};M.ygrids.add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t?t:[]))};M.ygrids.remove=function(t){var e;this.internal.removeGridLines(t,false)};M.groups=function(t){var e=this.internal,n=e.config;if(l(t))return n.data_groups;n.data_groups=t;e.redraw();return n.data_groups};M.legend=function(){};M.legend.show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t));e.updateAndRedraw({withLegend:true})};M.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t));e.updateAndRedraw({withLegend:true})};M.load=function(t){var e=this.internal,n=e.config;if(t.xs)e.addXs(t.xs);if("names"in t)M.data.names.bind(this)(t.names);if("classes"in t)Object.keys(t.classes).forEach(function(e){n.data_classes[e]=t.classes[e]});if("categories"in t&&e.isCategorized())n.axis_x_categories=t.categories;if("axes"in t)Object.keys(t.axes).forEach(function(e){n.data_axes[e]=t.axes[e]});if("colors"in t)Object.keys(t.colors).forEach(function(e){n.data_colors[e]=t.colors[e]});if("cacheIds"in t&&e.hasCaches(t.cacheIds)){e.load(e.getCaches(t.cacheIds),t.done);return}if("unload"in t)e.unload(e.mapToTargetIds("boolean"===typeof t.unload&&t.unload?null:t.unload),function(){e.loadFromArgs(t)});else e.loadFromArgs(t)};M.unload=function(t){var e=this.internal;if((t=t||{})instanceof Array)t={ids:t};else if("string"===typeof t)t={ids:[t]};e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true});if(t.done)t.done()})};M.regions=function(t){var e=this.internal,n=e.config;if(!t)return n.regions;n.regions=t;e.redrawWithoutRescale();return n.regions};M.regions.add=function(t){var e=this.internal,n=e.config;if(!t)return n.regions;n.regions=n.regions.concat(t);e.redrawWithoutRescale();return n.regions};M.regions.remove=function(e){var n=this.internal,r=n.config,i,a,o;e=e||{};i=n.getOption(e,"duration",r.transition_duration);a=n.getOption(e,"classes",[t.region]);o=n.main.select("."+t.regions).selectAll(a.map(function(t){return"."+t}));(i?o.transition().duration(i):o).style("opacity",0).remove();r.regions=r.regions.filter(function(t){var e=false;if(!t.class)return true;t.class.split(" ").forEach(function(t){if(a.indexOf(t)>=0)e=true});return!e});return r.regions};M.selected=function(e){var n=this.internal,r=n.d3;return r.merge(n.main.selectAll("."+t.shapes+n.getTargetSelectorSuffix(e)).selectAll("."+t.shape).filter(function(){return r.select(this).classed(t.SELECTED)}).map(function(t){return t.map(function(t){var e=t.__data__;return e.data?e.data:e})}))};M.select=function(e,n,r){var i=this.internal,a=i.d3,o=i.config;if(!o.data_selection_enabled)return;i.main.selectAll("."+t.shapes).selectAll("."+t.shape).each(function(s,u){var c=a.select(this),l=s.data?s.data.id:s.id,h=i.getToggle(this,s).bind(i),d=o.data_selection_grouped||!e||e.indexOf(l)>=0,g=!n||n.indexOf(u)>=0,p=c.classed(t.SELECTED);if(c.classed(t.line)||c.classed(t.area))return;if(d&&g){if(o.data_selection_isselectable(s)&&!p)h(true,c.classed(t.SELECTED,true),s,u)}else if(f(r)&&r)if(p)h(false,c.classed(t.SELECTED,false),s,u)})};M.unselect=function(e,n){var r=this.internal,i=r.d3,a=r.config;if(!a.data_selection_enabled)return;r.main.selectAll("."+t.shapes).selectAll("."+t.shape).each(function(o,s){var u=i.select(this),c=o.data?o.data.id:o.id,l=r.getToggle(this,o).bind(r),f=a.data_selection_grouped||!e||e.indexOf(c)>=0,h=!n||n.indexOf(s)>=0,d=u.classed(t.SELECTED);if(u.classed(t.line)||u.classed(t.area))return;if(f&&h)if(a.data_selection_isselectable(o))if(d)l(false,u.classed(t.SELECTED,false),o,s)})};M.show=function(t,e){var n=this.internal,r;t=n.mapToTargetIds(t);e=e||{};n.removeHiddenTargetIds(t);(r=n.svg.selectAll(n.selectorTargets(t))).transition().style("opacity",1,"important").call(n.endall,function(){r.style("opacity",null).style("opacity",1)});if(e.withLegend)n.showLegend(t);n.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true})};M.hide=function(t,e){var n=this.internal,r;t=n.mapToTargetIds(t);e=e||{};n.addHiddenTargetIds(t);(r=n.svg.selectAll(n.selectorTargets(t))).transition().style("opacity",0,"important").call(n.endall,function(){r.style("opacity",null).style("opacity",0)});if(e.withLegend)n.hideLegend(t);n.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true})};M.toggle=function(t,e){var n=this,r=this.internal;r.mapToTargetIds(t).forEach(function(t){r.isTargetToShow(t)?n.hide(t,e):n.show(t,e)})};M.tooltip=function(){};M.tooltip.show=function(t){var e=this.internal,n,r;if(t.mouse)r=t.mouse;if(t.data)if(e.isMultipleX()){r=[e.x(t.data.x),e.getYScale(t.data.id)(t.data.value)];n=null}else n=o(t.data.index)?t.data.index:e.getIndexByX(t.data.x);else if("undefined"!==typeof t.x)n=e.getIndexByX(t.x);else if("undefined"!==typeof t.index)n=t.index;e.dispatchEvent("mouseover",n,r);e.dispatchEvent("mousemove",n,r);e.config.tooltip_onshow.call(e,t.data)};M.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0);this.internal.config.tooltip_onhide.call(this)};M.transform=function(t,e){var n=this.internal,r=["pie","donut"].indexOf(t)>=0?{withTransform:true}:null;n.transformTo(e,t,r)};C.transformTo=function(t,e,n){var r=this,i=!r.hasArcType(),a=n||{withTransitionForAxis:i};a.withTransitionForTransform=false;r.transiting=false;r.setTargetType(t,e);r.updateTargets(r.data.targets);r.updateAndRedraw(a)};M.x=function(t){var e=this.internal;if(arguments.length){e.updateTargetX(e.data.targets,t);e.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}return e.data.xs};M.xs=function(t){var e=this.internal;if(arguments.length){e.updateTargetXs(e.data.targets,t);e.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}return e.data.xs};M.zoom=function(t){var e=this.internal;if(t){if(e.isTimeSeries())t=t.map(function(t){return e.parseDate(t)});e.brush.extent(t);e.redraw({withUpdateXDomain:true,withY:e.config.zoom_rescale});e.config.zoom_onzoom.call(this,e.x.orgDomain())}return e.brush.extent()};M.zoom.enable=function(t){var e=this.internal;e.config.zoom_enabled=t;e.updateAndRedraw()};M.unzoom=function(){var t=this.internal;t.brush.clear().update();t.redraw({withUpdateXDomain:true})};M.zoom.max=function(t){var e=this.internal,n=e.config,r=e.d3;if(0===t||t)n.zoom_x_max=r.max([e.orgXDomain[1],t]);else return n.zoom_x_max};M.zoom.min=function(t){var e=this.internal,n=e.config,r=e.d3;if(0===t||t)n.zoom_x_min=r.min([e.orgXDomain[0],t]);else return n.zoom_x_min};M.zoom.range=function(t){if(arguments.length){if(f(t.max))this.domain.max(t.max);if(f(t.min))this.domain.min(t.min)}else return{max:this.domain.max(),min:this.domain.min()}};C.initPie=function(){var t=this,e=t.d3;t.pie=e.layout.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)});t.pie.sort(t.getOrderFunction()||null)};C.updateRadius=function(){var t=this,e=t.config,n=e.gauge_width||e.donut_width,r=t.filterTargetsToShow(t.data.targets).length*t.config.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasType("gauge")?.85:1);t.radius=.95*t.radiusExpanded;t.innerRadiusRatio=n?(t.radius-n)/t.radius:.6;t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0;t.gaugeArcWidth=n?n:r<=t.radius-t.innerRadius?t.radius-t.innerRadius:r<=t.radius?r:t.radius};C.updateArc=function(){var t=this;t.svgArc=t.getSvgArc();t.svgArcExpanded=t.getSvgArcExpanded();t.svgArcExpandedSub=t.getSvgArcExpanded(.98)};C.updateAngle=function(t){var e=this,n=e.config,r=false,i=0,a,o,s,u;if(!n)return null;e.pie(e.filterTargetsToShow(e.data.targets)).forEach(function(e){if(!r&&e.data.id===t.data.id){r=true;(t=e).index=i}i++});if(isNaN(t.startAngle))t.startAngle=0;if(isNaN(t.endAngle))t.endAngle=t.startAngle;if(e.isGaugeType(t.data)){a=n.gauge_min;o=n.gauge_max;s=Math.PI*(n.gauge_fullCircle?2:1)/(o-a);u=t.value<a?0:t.value<o?t.value-a:o-a;t.startAngle=n.gauge_startingAngle;t.endAngle=t.startAngle+s*u}return r?t:null};C.getSvgArc=function(){var t=this,e=t.hasType("gauge"),n=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,r=t.d3.svg.arc().outerRadius(function(r){return e?t.radius-n*r.index:t.radius}).innerRadius(function(r){return e?t.radius-n*(r.index+1):t.innerRadius}),i=function e(n,i){var a;if(i)return r(n);return(a=t.updateAngle(n))?r(a):"M 0 0"};i.centroid=r.centroid;return i};C.getSvgArcExpanded=function(t){t=t||1;var e=this,n=e.hasType("gauge"),r=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,i=Math.min(e.radiusExpanded*t-e.radius,.8*r-100*(1-t)),a=e.d3.svg.arc().outerRadius(function(a){return n?e.radius-r*a.index+i:e.radiusExpanded*t}).innerRadius(function(t){return n?e.radius-r*(t.index+1):e.innerRadius});return function(t){var n=e.updateAngle(t);return n?a(n):"M 0 0"}};C.getArc=function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"};C.transformForArcLabel=function(t){var e=this,n=e.config,r=e.updateAngle(t),i,a,o,u,c,l="",f=e.hasType("gauge");if(r&&!f){i=this.svgArc.centroid(r);a=isNaN(i[0])?0:i[0];o=isNaN(i[1])?0:i[1];u=Math.sqrt(a*a+o*o);if(e.hasType("donut")&&n.donut_label_ratio)c=s(n.donut_label_ratio)?n.donut_label_ratio(t,e.radius,u):n.donut_label_ratio;else if(e.hasType("pie")&&n.pie_label_ratio)c=s(n.pie_label_ratio)?n.pie_label_ratio(t,e.radius,u):n.pie_label_ratio;else c=e.radius&&u?(36/e.radius>.375?1.175-36/e.radius:.8)*e.radius/u:0;l="translate("+a*c+","+o*c+")"}else if(r&&f&&e.filterTargetsToShow(e.data.targets).length>1){var h=Math.sin(r.endAngle-Math.PI/2);l="translate("+(a=Math.cos(r.endAngle-Math.PI/2)*(e.radiusExpanded+25))+","+(o=h*(e.radiusExpanded+15-Math.abs(10*h))+3)+")"}return l};C.getArcRatio=function(t){var e=this,n=e.config,r=Math.PI*(e.hasType("gauge")&&!n.gauge_fullCircle?1:2);return t?(t.endAngle-t.startAngle)/r:null};C.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})};C.textForArcLabel=function(t){var e=this,n,r,i,a,o;if(!e.shouldShowArcLabel())return"";r=(n=e.updateAngle(t))?n.value:null;i=e.getArcRatio(n);a=t.data.id;if(!e.hasType("gauge")&&!e.meetsArcLabelThreshold(i))return"";return(o=e.getArcLabelFormat())?o(r,i,a):e.defaultArcValueFormat(r,i)};C.textForGaugeMinMax=function(t,e){var n,r=this.getGaugeLabelExtents();return r?r(t,e):t};C.expandArc=function(e){var n=this,r;if(n.transiting){r=window.setInterval(function(){if(!n.transiting){window.clearInterval(r);if(n.legend.selectAll(".c3-legend-item-focused").size()>0)n.expandArc(e)}},10);return}e=n.mapToTargetIds(e);n.svg.selectAll(n.selectorTargets(e,"."+t.chartArc)).each(function(t){if(!n.shouldExpand(t.data.id))return;n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(t.data.id)).attr("d",n.svgArcExpanded).transition().duration(2*n.expandDuration(t.data.id)).attr("d",n.svgArcExpandedSub).each(function(t){if(n.isDonutType(t.data));})})};C.unexpandArc=function(e){var n=this;if(n.transiting)return;e=n.mapToTargetIds(e);n.svg.selectAll(n.selectorTargets(e,"."+t.chartArc)).selectAll("path").transition().duration(function(t){return n.expandDuration(t.data.id)}).attr("d",n.svgArc);n.svg.selectAll("."+t.arc)};C.expandDuration=function(t){var e=this,n=e.config;if(e.isDonutType(t))return n.donut_expand_duration;else if(e.isGaugeType(t))return n.gauge_expand_duration;else if(e.isPieType(t))return n.pie_expand_duration;else return 50};C.shouldExpand=function(t){var e=this,n=e.config;return e.isDonutType(t)&&n.donut_expand||e.isGaugeType(t)&&n.gauge_expand||e.isPieType(t)&&n.pie_expand};C.shouldShowArcLabel=function(){var t=this,e=t.config,n=true;if(t.hasType("donut"))n=e.donut_label_show;else if(t.hasType("pie"))n=e.pie_label_show;return n};C.meetsArcLabelThreshold=function(t){var e=this,n=e.config,r;return t>=(e.hasType("donut")?n.donut_label_threshold:n.pie_label_threshold)};C.getArcLabelFormat=function(){var t=this,e=t.config,n=e.pie_label_format;if(t.hasType("gauge"))n=e.gauge_label_format;else if(t.hasType("donut"))n=e.donut_label_format;return n};C.getGaugeLabelExtents=function(){var t,e;return this.config.gauge_label_extents};C.getArcTitle=function(){var t=this;return t.hasType("donut")?t.config.donut_title:""};C.updateTargetsForArc=function(e){var n=this,r=n.main,i,a,o=n.classChartArc.bind(n),s=n.classArcs.bind(n),u=n.classFocus.bind(n);(a=(i=r.select("."+t.chartArcs).selectAll("."+t.chartArc).data(n.pie(e)).attr("class",function(t){return o(t)+u(t.data)})).enter().append("g").attr("class",o)).append("g").attr("class",s);a.append("text").attr("dy",n.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};C.initArc=function(){var e=this;e.arcs=e.main.select("."+t.chart).append("g").attr("class",t.chartArcs).attr("transform",e.getTranslate("arc"));e.arcs.append("text").attr("class",t.chartArcsTitle).style("text-anchor","middle").text(e.getArcTitle())};C.redrawArc=function(e,n,r){var i=this,a=i.d3,o=i.config,s=i.main,u,c,l,f=i.hasType("gauge");(u=s.selectAll("."+t.arcs).selectAll("."+t.arc).data(i.arcData.bind(i))).enter().append("path").attr("class",i.classArc.bind(i)).style("fill",function(t){return i.color(t.data)}).style("cursor",function(t){return o.interaction_enabled&&o.data_selection_isselectable(t)?"pointer":null}).each(function(t){if(i.isGaugeType(t.data))t.startAngle=t.endAngle=o.gauge_startingAngle;this._current=t});if(f){(l=s.selectAll("."+t.arcs).selectAll("."+t.arcLabelLine).data(i.arcData.bind(i))).enter().append("rect").attr("class",function(e){return t.arcLabelLine+" "+t.target+" "+t.target+"-"+e.data.id});if(1===i.filterTargetsToShow(i.data.targets).length)l.style("display","none");else l.style("fill",function(t){return o.color_pattern.length>0?i.levelColor(t.data.values[0].value):i.color(t.data)}).style("display",o.gauge_labelLine_show?"":"none").each(function(t){var e=0,n=2,r=0,o=0,s="";if(i.hiddenTargetIds.indexOf(t.data.id)<0){var u=i.updateAngle(t),c=i.gaugeArcWidth/i.filterTargetsToShow(i.data.targets).length*(u.index+1),l=u.endAngle-Math.PI/2,f=i.radius-c,h=l-(0===f?0:1/f);e=i.radiusExpanded-i.radius+c;r=Math.cos(h)*f;o=Math.sin(h)*f;s="rotate("+180*l/Math.PI+", "+r+", "+o+")"}a.select(this).attr({x:r,y:o,width:e,height:2,transform:s}).style("stroke-dasharray","0, "+(e+2)+", 0")})}u.attr("transform",function(t){return!i.isGaugeType(t.data)&&r?"scale(0)":""}).on("mouseover",o.interaction_enabled?function(t){var e,n;if(i.transiting)return;if(e=i.updateAngle(t)){n=i.convertToArcData(e);i.expandArc(e.data.id);i.api.focus(e.data.id);i.toggleFocusLegend(e.data.id,true);i.config.data_onmouseover(n,this)}}:null).on("mousemove",o.interaction_enabled?function(t){var e=i.updateAngle(t),n,r;if(e){r=[n=i.convertToArcData(e)];i.showTooltip(r,this)}}:null).on("mouseout",o.interaction_enabled?function(t){var e,n;if(i.transiting)return;if(e=i.updateAngle(t)){n=i.convertToArcData(e);i.unexpandArc(e.data.id);i.api.revert();i.revertLegend();i.hideTooltip();i.config.data_onmouseout(n,this)}}:null).on("click",o.interaction_enabled?function(t,e){var n=i.updateAngle(t),r;if(n){r=i.convertToArcData(n);if(i.toggleShape)i.toggleShape(this,r,e);i.config.data_onclick.call(i.api,r,this)}}:null).each(function(){i.transiting=true}).transition().duration(e).attrTween("d",function(t){var e=i.updateAngle(t),n;if(!e)return function(){return"M 0 0"};if(isNaN(this._current.startAngle))this._current.startAngle=0;if(isNaN(this._current.endAngle))this._current.endAngle=this._current.startAngle;n=a.interpolate(this._current,e);this._current=n(0);return function(e){var r=n(e);r.data=t.data;return i.getArc(r,true)}}).attr("transform",r?"scale(1)":"").style("fill",function(t){return i.levelColor?i.levelColor(t.data.values[0].value):i.color(t.data.id)}).call(i.endall,function(){i.transiting=false});u.exit().transition().duration(n).style("opacity",0).remove();s.selectAll("."+t.chartArc).select("text").style("opacity",0).attr("class",function(e){return i.isGaugeType(e.data)?t.gaugeValue:""}).text(i.textForArcLabel.bind(i)).attr("transform",i.transformForArcLabel.bind(i)).style("font-size",function(t){return i.isGaugeType(t.data)&&1===i.filterTargetsToShow(i.data.targets).length?Math.round(i.radius/5)+"px":""}).transition().duration(e).style("opacity",function(t){return i.isTargetToShow(t.data.id)&&i.isArcType(t.data)?1:0});s.select("."+t.chartArcsTitle).style("opacity",i.hasType("donut")||f?1:0);if(f){var h=0;(c=i.arcs.select("g."+t.chartArcsBackground).selectAll("path."+t.chartArcsBackground).data(i.data.targets)).enter().append("path");c.attr("class",function(e,n){return t.chartArcsBackground+" "+t.chartArcsBackground+"-"+n}).attr("d",function(t){if(i.hiddenTargetIds.indexOf(t.id)>=0)return"M 0 0";var e={data:[{value:o.gauge_max}],startAngle:o.gauge_startingAngle,endAngle:-1*o.gauge_startingAngle*(o.gauge_fullCircle?Math.PI:1),index:h++};return i.getArc(e,true,true)});c.exit().remove();i.arcs.select("."+t.chartArcsGaugeUnit).attr("dy",".75em").text(o.gauge_label_show?o.gauge_units:"");i.arcs.select("."+t.chartArcsGaugeMin).attr("dx",-1*(i.innerRadius+(i.radius-i.innerRadius)/(o.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(o.gauge_label_show?i.textForGaugeMinMax(o.gauge_min,false):"");i.arcs.select("."+t.chartArcsGaugeMax).attr("dx",i.innerRadius+(i.radius-i.innerRadius)/(o.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(o.gauge_label_show?i.textForGaugeMinMax(o.gauge_max,true):"")}};C.initGauge=function(){var e=this.arcs;if(this.hasType("gauge")){e.append("g").attr("class",t.chartArcsBackground);e.append("text").attr("class",t.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none");e.append("text").attr("class",t.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none");e.append("text").attr("class",t.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none")}};C.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0};C.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return false;return true};C.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)};C.getCaches=function(t){var e=[],n;for(n=0;n<t.length;n++)if(t[n]in this.cache)e.push(this.cloneTarget(this.cache[t[n]]));return e};C.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t};C.generateClass=function(t,e){return" "+t+" "+t+this.getTargetSelectorSuffix(e)};C.classText=function(e){return this.generateClass(t.text,e.index)};C.classTexts=function(e){return this.generateClass(t.texts,e.id)};C.classShape=function(e){return this.generateClass(t.shape,e.index)};C.classShapes=function(e){return this.generateClass(t.shapes,e.id)};C.classLine=function(e){return this.classShape(e)+this.generateClass(t.line,e.id)};C.classLines=function(e){return this.classShapes(e)+this.generateClass(t.lines,e.id)};C.classCircle=function(e){return this.classShape(e)+this.generateClass(t.circle,e.index)};C.classCircles=function(e){return this.classShapes(e)+this.generateClass(t.circles,e.id)};C.classBar=function(e){return this.classShape(e)+this.generateClass(t.bar,e.index)};C.classBars=function(e){return this.classShapes(e)+this.generateClass(t.bars,e.id)};C.classArc=function(e){return this.classShape(e.data)+this.generateClass(t.arc,e.data.id)};C.classArcs=function(e){return this.classShapes(e.data)+this.generateClass(t.arcs,e.data.id)};C.classArea=function(e){return this.classShape(e)+this.generateClass(t.area,e.id)};C.classAreas=function(e){return this.classShapes(e)+this.generateClass(t.areas,e.id)};C.classRegion=function(e,n){return this.generateClass(t.region,n)+" "+("class"in e?e.class:"")};C.classEvent=function(e){return this.generateClass(t.eventRect,e.index)};C.classTarget=function(e){var n=this;var r=n.config.data_classes[e],i="";if(r)i=" "+t.target+"-"+r;return n.generateClass(t.target,e)+i};C.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)};C.classFocused=function(e){return" "+(this.focusedTargetIds.indexOf(e.id)>=0?t.focused:"")};C.classDefocused=function(e){return" "+(this.defocusedTargetIds.indexOf(e.id)>=0?t.defocused:"")};C.classChartText=function(e){return t.chartText+this.classTarget(e.id)};C.classChartLine=function(e){return t.chartLine+this.classTarget(e.id)};C.classChartBar=function(e){return t.chartBar+this.classTarget(e.id)};C.classChartArc=function(e){return t.chartArc+this.classTarget(e.data.id)};C.getTargetSelectorSuffix=function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""};C.selectorTarget=function(e,n){return(n||"")+"."+t.target+this.getTargetSelectorSuffix(e)};C.selectorTargets=function(t,e){var n=this;return(t=t||[]).length?t.map(function(t){return n.selectorTarget(t,e)}):null};C.selectorLegend=function(e){return"."+t.legendItem+this.getTargetSelectorSuffix(e)};C.selectorLegends=function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null};C.getClipPath=function(t){var e;return"url("+(window.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0?"":document.URL.split("#")[0])+"#"+t+")"};C.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")};C.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)};C.getAxisClipY=function(t){return t?-20:-this.margin.top};C.getXAxisClipX=function(){var t=this;return t.getAxisClipX(!t.config.axis_rotated)};C.getXAxisClipY=function(){var t=this;return t.getAxisClipY(!t.config.axis_rotated)};C.getYAxisClipX=function(){var t=this;return t.config.axis_y_inner?-1:t.getAxisClipX(t.config.axis_rotated)};C.getYAxisClipY=function(){var t=this;return t.getAxisClipY(t.config.axis_rotated)};C.getAxisClipWidth=function(t){var e=this,n=Math.max(30,e.margin.left),r=Math.max(30,e.margin.right);return t?e.width+2+n+r:e.margin.left+20};C.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20};C.getXAxisClipWidth=function(){var t=this;return t.getAxisClipWidth(!t.config.axis_rotated)};C.getXAxisClipHeight=function(){var t=this;return t.getAxisClipHeight(!t.config.axis_rotated)};C.getYAxisClipWidth=function(){var t=this;return t.getAxisClipWidth(t.config.axis_rotated)+(t.config.axis_y_inner?20:0)};C.getYAxisClipHeight=function(){var t=this;return t.getAxisClipHeight(t.config.axis_rotated)};C.generateColor=function(){var t=this,e=t.config,n=t.d3,r=e.data_colors,i=v(e.color_pattern)?e.color_pattern:n.scale.category10().range(),a=e.data_color,o=[];return function(t){var e=t.id||t.data&&t.data.id||t,n;if(r[e]instanceof Function)n=r[e](t);else if(r[e])n=r[e];else{if(o.indexOf(e)<0)o.push(e);n=i[o.indexOf(e)%i.length];r[e]=n}return a instanceof Function?a(n,t):n}};C.generateLevelColor=function(){var t,e=this.config,n=e.color_pattern,r=e.color_threshold,i="value"===r.unit,a=r.values&&r.values.length?r.values:[],o=r.max||100;return v(e.color_threshold)?function(t){var e,r,s=n[n.length-1];for(e=0;e<a.length;e++)if((r=i?t:100*t/o)<a[e]){s=n[e];break}return s}:null};C.getDefaultConfig=function(){var t={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:true,zoom_enabled:false,zoom_extent:void 0,zoom_privileged:false,zoom_rescale:false,zoom_onzoom:function t(){},zoom_onzoomstart:function t(){},zoom_onzoomend:function t(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:true,interaction_enabled:true,onmouseover:function t(){},onmouseout:function t(){},onresize:function t(){},onresized:function t(){},oninit:function t(){},onrendered:function t(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:true,data_xSort:true,data_idConverter:function t(e){return e},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:false,data_filter:void 0,data_selection_enabled:false,data_selection_grouped:false,data_selection_isselectable:function t(){return true},data_selection_multiple:true,data_selection_draggable:false,data_onclick:function t(){},data_onmouseover:function t(){},data_onmouseout:function t(){},data_onselected:function t(){},data_onunselected:function t(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:false,subchart_size_height:60,subchart_axis_x_show:true,subchart_onbrush:function t(){},color_pattern:[],color_threshold:{},legend_show:true,legend_hide:false,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:false,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:false,axis_x_show:true,axis_x_type:"indexed",axis_x_localtime:true,axis_x_categories:[],axis_x_tick_centered:false,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:true,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:true,axis_x_tick_multiline:true,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:true,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:false,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:true,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:false,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:false,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:true,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:false,grid_x_type:"tick",grid_x_lines:[],grid_y_show:false,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:true,grid_lines_front:true,point_show:true,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:true,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:false,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:true,bar_space:0,area_zerobased:true,area_above:false,pie_label_show:true,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:false,gauge_label_show:true,gauge_labelLine_show:true,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:true,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:true,tooltip_grouped:true,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function t(e,n,r,i){return this.getTooltipContent?this.getTooltipContent(e,n,r,i):""},tooltip_init_show:false,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function t(){},tooltip_onhide:function t(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};Object.keys(this.additionalConfig).forEach(function(e){t[e]=this.additionalConfig[e]},this);return t};C.additionalConfig={};C.loadConfig=function(t){var n=this.config,r,i,a;function o(){var t=i.shift();if(t&&r&&"object"===("undefined"===typeof r?"undefined":e(r))&&t in r){r=r[t];return o()}else if(!t)return r;else return}Object.keys(n).forEach(function(e){r=t;i=e.split("_");a=o();if(f(a))n[e]=a})};C.convertUrlToData=function(t,e,n,r,i){var a=this,o=e?e:"csv";var s=a.d3.xhr(t);if(n)Object.keys(n).forEach(function(t){s.header(t,n[t])});s.get(function(t,e){var n;var s=e.response||e.responseText;if(!e)throw new Error(t.responseURL+" "+t.status+" ("+t.statusText+")");if("json"===o)n=a.convertJsonToData(JSON.parse(s),r);else if("tsv"===o)n=a.convertTsvToData(s);else n=a.convertCsvToData(s);i.call(a,n)})};C.convertXsvToData=function(t,e){var n=e.parseRows(t),r;if(1===n.length){r=[{}];n[0].forEach(function(t){r[0][t]=null})}else r=e.parse(t);return r};C.convertCsvToData=function(t){return this.convertXsvToData(t,this.d3.csv)};C.convertTsvToData=function(t){return this.convertXsvToData(t,this.d3.tsv)};C.convertJsonToData=function(t,e){var n=this,r=[],i,a;if(e){if(e.x){i=e.value.concat(e.x);n.config.data_x=e.x}else i=e.value;r.push(i);t.forEach(function(t){var e=[];i.forEach(function(r){var i=n.findValueInJson(t,r);if(l(i))i=null;e.push(i)});r.push(e)});a=n.convertRowsToData(r)}else{Object.keys(t).forEach(function(e){r.push([e].concat(t[e]))});a=n.convertColumnsToData(r)}return a};C.findValueInJson=function(t,e){var n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");for(var r=0;r<n.length;++r){var i=n[r];if(i in t)t=t[i];else return}return t};C.convertRowsToData=function(t){var e=[];var n=t[0];for(var r=1;r<t.length;r++){var i={};for(var a=0;a<t[r].length;a++){if(l(t[r][a]))throw new Error("Source data is missing a component at ("+r+","+a+")!");i[n[a]]=t[r][a]}e.push(i)}return e};C.convertColumnsToData=function(t){var e=[];for(var n=0;n<t.length;n++){var r=t[n][0];for(var i=1;i<t[n].length;i++){if(l(e[i-1]))e[i-1]={};if(l(t[n][i]))throw new Error("Source data is missing a component at ("+n+","+i+")!");e[i-1][r]=t[n][i]}}return e};C.convertDataToTargets=function(t,e){var n=this,r=n.config,i=n.d3.keys(t[0]).filter(n.isNotX,n),a=n.d3.keys(t[0]).filter(n.isX,n),s;i.forEach(function(i){var s=n.getXKey(i);if(n.isCustomX()||n.isTimeSeries()){if(a.indexOf(s)>=0)n.data.xs[i]=(e&&n.data.xs[i]?n.data.xs[i]:[]).concat(t.map(function(t){return t[s]}).filter(o).map(function(t,e){return n.generateTargetX(t,i,e)}));else if(r.data_x)n.data.xs[i]=n.getOtherTargetXs();else if(v(r.data_xs))n.data.xs[i]=n.getXValuesOfXKey(s,n.data.targets)}else n.data.xs[i]=t.map(function(t,e){return e})});i.forEach(function(t){if(!n.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')});(s=i.map(function(e,i){var a=r.data_idConverter(e);return{id:a,id_org:e,values:t.map(function(t,o){var s,u=t[n.getXKey(e)],c=null!==t[e]&&!isNaN(t[e])?+t[e]:null,f;if(n.isCustomX()&&n.isCategorized()&&!l(u)){if(0===i&&0===o)r.axis_x_categories=[];if(-1===(f=r.axis_x_categories.indexOf(u))){f=r.axis_x_categories.length;r.axis_x_categories.push(u)}}else f=n.generateTargetX(u,e,o);if(l(t[e])||n.data.xs[e].length<=o)f=void 0;return{x:f,value:c,id:a}}).filter(function(t){return f(t.x)})}})).forEach(function(t){var e;if(r.data_xSort)t.values=t.values.sort(function(t,e){var n,r;return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)});e=0;t.values.forEach(function(t){t.index=e++});n.data.xs[t.id].sort(function(t,e){return t-e})});n.hasNegativeValue=n.hasNegativeValueInTargets(s);n.hasPositiveValue=n.hasPositiveValueInTargets(s);if(r.data_type)n.setTargetType(n.mapToIds(s).filter(function(t){return!(t in r.data_types)}),r.data_type);s.forEach(function(t){n.addCache(t.id_org,t)});return s};C.isX=function(t){var e,n=this.config;return n.data_x&&t===n.data_x||v(n.data_xs)&&m(n.data_xs,t)};C.isNotX=function(t){return!this.isX(t)};C.getXKey=function(t){var e,n=this.config;return n.data_x?n.data_x:v(n.data_xs)?n.data_xs[t]:null};C.getXValuesOfXKey=function(t,e){var n=this,r,i;(e&&v(e)?n.mapToIds(e):[]).forEach(function(e){if(n.getXKey(e)===t)r=n.data.xs[e]});return r};C.getIndexByX=function(t){var e=this,n=e.filterByX(e.data.targets,t);return n.length?n[0].index:null};C.getXValue=function(t,e){var n=this;return t in n.data.xs&&n.data.xs[t]&&o(n.data.xs[t][e])?n.data.xs[t][e]:e};C.getOtherTargetXs=function(){var t=this,e=Object.keys(t.data.xs);return e.length?t.data.xs[e[0]]:null};C.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null};C.addXs=function(t){var e=this;Object.keys(t).forEach(function(n){e.config.data_xs[n]=t[n]})};C.hasMultipleX=function(t){return this.d3.set(Object.keys(t).map(function(e){return t[e]})).size()>1};C.isMultipleX=function(){return v(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")};C.addName=function(t){var e,n;if(t){n=this.config.data_names[t.id];t.name=void 0!==n?n:t.id}return t};C.getValueOnIndex=function(t,e){var n=t.filter(function(t){return t.index===e});return n.length?n[0]:null};C.updateTargetX=function(t,e){var n=this;t.forEach(function(t){t.values.forEach(function(r,i){r.x=n.generateTargetX(e[i],t.id,i)});n.data.xs[t.id]=e})};C.updateTargetXs=function(t,e){var n=this;t.forEach(function(t){if(e[t.id])n.updateTargetX([t],e[t.id])})};C.generateTargetX=function(t,e,n){var r=this,i;if(r.isTimeSeries())i=t?r.parseDate(t):r.parseDate(r.getXValue(e,n));else if(r.isCustomX()&&!r.isCategorized())i=o(t)?+t:r.getXValue(e,n);else i=n;return i};C.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}};C.updateXs=function(){var t=this;if(t.data.targets.length){t.xs=[];t.data.targets[0].values.forEach(function(e){t.xs[e.index]=e.x})}};C.getPrevX=function(t){var e=this.xs[t-1];return"undefined"!==typeof e?e:null};C.getNextX=function(t){var e=this.xs[t+1];return"undefined"!==typeof e?e:null};C.getMaxDataCount=function(){var t=this;return t.d3.max(t.data.targets,function(t){return t.values.length})};C.getMaxDataCountTarget=function(t){var e=t.length,n=0,r;if(e>1)t.forEach(function(t){if(t.values.length>n){r=t;n=t.values.length}});else r=e?t[0]:null;return r};C.getEdgeX=function(t){var e=this;return!t.length?[0,0]:[e.d3.min(t,function(t){return t.values[0].x}),e.d3.max(t,function(t){return t.values[t.values.length-1].x})]};C.mapToIds=function(t){return t.map(function(t){return t.id})};C.mapToTargetIds=function(t){var e=this;return t?[].concat(t):e.mapToIds(e.data.targets)};C.hasTarget=function(t,e){var n=this.mapToIds(t),r;for(r=0;r<n.length;r++)if(n[r]===e)return true;return false};C.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0};C.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0};C.filterTargetsToShow=function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})};C.mapTargetsToUniqueXs=function(t){var e=this;var n=e.d3.set(e.d3.merge(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return(n=e.isTimeSeries()?n.map(function(t){return new Date(+t)}):n.map(function(t){return+t})).sort(function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN})};C.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)if(this.hiddenTargetIds.indexOf(t[e])<0)this.hiddenTargetIds=this.hiddenTargetIds.concat(t[e])};C.removeHiddenTargetIds=function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(e){return t.indexOf(e)<0})};C.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)if(this.hiddenLegendIds.indexOf(t[e])<0)this.hiddenLegendIds=this.hiddenLegendIds.concat(t[e])};C.removeHiddenLegendIds=function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(e){return t.indexOf(e)<0})};C.getValuesAsIdKeyed=function(t){var e={};t.forEach(function(t){e[t.id]=[];t.values.forEach(function(n){e[t.id].push(n.value)})});return e};C.checkValueInTargets=function(t,e){var n=Object.keys(t),r,i,a;for(r=0;r<n.length;r++){a=t[n[r]].values;for(i=0;i<a.length;i++)if(e(a[i].value))return true}return false};C.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t<0})};C.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t>0})};C.isOrderDesc=function(){var t=this.config;return"string"===typeof t.data_order&&"desc"===t.data_order.toLowerCase()};C.isOrderAsc=function(){var t=this.config;return"string"===typeof t.data_order&&"asc"===t.data_order.toLowerCase()};C.getOrderFunction=function(){var t=this,e=t.config,n=t.isOrderAsc(),r=t.isOrderDesc();if(n||r)return function(t,e){var n=function t(e,n){return e+Math.abs(n.value)};var i=t.values.reduce(n,0),a=e.values.reduce(n,0);return r?a-i:i-a};else if(s(e.data_order))return e.data_order;else if(u(e.data_order)){var i=e.data_order;return function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}}};C.orderTargets=function(t){var e=this.getOrderFunction();if(e){t.sort(e);if(this.isOrderAsc()||this.isOrderDesc())t.reverse()}return t};C.filterByX=function(t,e){return this.d3.merge(t.map(function(t){return t.values})).filter(function(t){return t.x-e===0})};C.filterRemoveNull=function(t){return t.filter(function(t){return o(t.value)})};C.filterByXDomain=function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})};C.hasDataLabel=function(){var t=this.config;if("boolean"===typeof t.data_labels&&t.data_labels)return true;else if("object"===e(t.data_labels)&&v(t.data_labels))return true;return false};C.getDataLabelLength=function(t,e,n){var r=this,i=[0,0],a=1.3;r.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return r.dataLabelFormat(t.id)(t)}).each(function(t,e){i[e]=1.3*this.getBoundingClientRect()[n]}).remove();return i};C.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},C.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)};C.findSameXOfValues=function(t,e){var n,r=t[e].x,i=[];for(n=e-1;n>=0&&r===t[n].x;n--)i.push(t[n]);for(n=e;n<t.length&&r===t[n].x;n++)i.push(t[n]);return i};C.findClosestFromTargets=function(t,e){var n=this,r;r=t.map(function(t){return n.findClosest(t.values,e)});return n.findClosest(r,e)};C.findClosest=function(e,n){var r=this,i=r.config.point_sensitivity,a;e.filter(function(t){return t&&r.isBarType(t.id)}).forEach(function(e){var n=r.main.select("."+t.bars+r.getTargetSelectorSuffix(e.id)+" ."+t.bar+"-"+e.index).node();if(!a&&r.isWithinBar(n))a=e});e.filter(function(t){return t&&!r.isBarType(t.id)}).forEach(function(t){var e=r.dist(t,n);if(e<i){i=e;a=t}});return a};C.dist=function(t,e){var n=this,r=n.config,i=r.axis_rotated?1:0,a=r.axis_rotated?0:1,o=n.circleY(t,t.index),s=n.x(t.x);return Math.sqrt(Math.pow(s-e[i],2)+Math.pow(o-e[a],2))};C.convertValuesToStep=function(t){var e=[].concat(t),n;if(!this.isCategorized())return t;for(n=t.length+1;0<n;n--)e[n]=e[n-1];e[0]={x:e[0].x-1,value:e[0].value,id:e[0].id};e[t.length+1]={x:e[t.length].x+1,value:e[t.length].value,id:e[t.length].id};return e};C.updateDataAttributes=function(t,e){var n=this,r,i=n.config["data_"+t];if("undefined"===typeof e)return i;Object.keys(e).forEach(function(t){i[t]=e[t]});n.redraw({withLegend:true});return i};C.load=function(t,e){var n=this;if(t){if(e.filter)t=t.filter(e.filter);if(e.type||e.types)t.forEach(function(t){var r=e.types&&e.types[t.id]?e.types[t.id]:e.type;n.setTargetType(t.id,r)});n.data.targets.forEach(function(e){for(var n=0;n<t.length;n++)if(e.id===t[n].id){e.values=t[n].values;t.splice(n,1);break}});n.data.targets=n.data.targets.concat(t)}n.updateTargets(n.data.targets);n.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true});if(e.done)e.done()};C.loadFromArgs=function(t){var e=this;if(t.data)e.load(e.convertDataToTargets(t.data),t);else if(t.url)e.convertUrlToData(t.url,t.mimeType,t.headers,t.keys,function(n){e.load(e.convertDataToTargets(n),t)});else if(t.json)e.load(e.convertDataToTargets(e.convertJsonToData(t.json,t.keys)),t);else if(t.rows)e.load(e.convertDataToTargets(e.convertRowsToData(t.rows)),t);else if(t.columns)e.load(e.convertDataToTargets(e.convertColumnsToData(t.columns)),t);else e.load(null,t)};C.unload=function(e,n){var r=this;if(!n)n=function t(){};if(!(e=e.filter(function(t){return r.hasTarget(r.data.targets,t)}))||0===e.length){n();return}r.svg.selectAll(e.map(function(t){return r.selectorTarget(t)})).transition().style("opacity",0).remove().call(r.endall,n);e.forEach(function(e){r.withoutFadeIn[e]=false;if(r.legend)r.legend.selectAll("."+t.legendItem+r.getTargetSelectorSuffix(e)).remove();r.data.targets=r.data.targets.filter(function(t){return t.id!==e})})};C.getYDomainMin=function(t){var e=this,n=e.config,r=e.mapToIds(t),i=e.getValuesAsIdKeyed(t),a,o,s,u,c,l;if(n.data_groups.length>0){l=e.hasNegativeValueInTargets(t);for(a=0;a<n.data_groups.length;a++){if(0===(u=n.data_groups[a].filter(function(t){return r.indexOf(t)>=0})).length)continue;s=u[0];if(l&&i[s])i[s].forEach(function(t,e){i[s][e]=t<0?t:0});for(o=1;o<u.length;o++){c=u[o];if(!i[c])continue;i[c].forEach(function(t,n){if(e.axis.getId(c)===e.axis.getId(s)&&i[s]&&!(l&&+t>0))i[s][n]+=+t})}}}return e.d3.min(Object.keys(i).map(function(t){return e.d3.min(i[t])}))};C.getYDomainMax=function(t){var e=this,n=e.config,r=e.mapToIds(t),i=e.getValuesAsIdKeyed(t),a,o,s,u,c,l;if(n.data_groups.length>0){l=e.hasPositiveValueInTargets(t);for(a=0;a<n.data_groups.length;a++){if(0===(u=n.data_groups[a].filter(function(t){return r.indexOf(t)>=0})).length)continue;s=u[0];if(l&&i[s])i[s].forEach(function(t,e){i[s][e]=t>0?t:0});for(o=1;o<u.length;o++){c=u[o];if(!i[c])continue;i[c].forEach(function(t,n){if(e.axis.getId(c)===e.axis.getId(s)&&i[s]&&!(l&&+t<0))i[s][n]+=+t})}}}return e.d3.max(Object.keys(i).map(function(t){return e.d3.max(i[t])}))};C.getYDomain=function(t,e,n){var r=this,i=r.config,a=t.filter(function(t){return r.axis.getId(t.id)===e}),s=n?r.filterByXDomain(a,n):a,u="y2"===e?i.axis_y2_min:i.axis_y_min,c="y2"===e?i.axis_y2_max:i.axis_y_max,l=r.getYDomainMin(s),f=r.getYDomainMax(s),h,d,p,y,m,x="y2"===e?i.axis_y2_center:i.axis_y_center,_,w,S,b,A,T,M=r.hasType("bar",s)&&i.bar_zerobased||r.hasType("area",s)&&i.area_zerobased,C="y2"===e?i.axis_y2_inverted:i.axis_y_inverted,P=r.hasDataLabel()&&i.axis_rotated,L=r.hasDataLabel()&&!i.axis_rotated;l=o(u)?u:o(c)?l<c?l:c-10:l;f=o(c)?c:o(u)?u<f?f:u+10:f;if(0===s.length)return"y2"===e?r.y2.domain():r.y.domain();if(isNaN(l))l=0;if(isNaN(f))f=l;if(l===f)l<0?f=0:l=0;A=l>=0&&f>=0;T=l<=0&&f<=0;if(o(u)&&A||o(c)&&T)M=false;if(M){if(A)l=0;if(T)f=0}p=y=m=.1*(d=Math.abs(f-l));if("undefined"!==typeof x){f=x+(_=Math.max(Math.abs(l),Math.abs(f)));l=x-_}if(P){w=r.getDataLabelLength(l,f,"width");S=g(r.y.range());y+=d*((b=[w[0]/S,w[1]/S])[1]/(1-b[0]-b[1]));m+=d*(b[0]/(1-b[0]-b[1]))}else if(L){w=r.getDataLabelLength(l,f,"height");y+=r.axis.convertPixelsToAxisPadding(w[1],d);m+=r.axis.convertPixelsToAxisPadding(w[0],d)}if("y"===e&&v(i.axis_y_padding)){y=r.axis.getPadding(i.axis_y_padding,"top",y,d);m=r.axis.getPadding(i.axis_y_padding,"bottom",m,d)}if("y2"===e&&v(i.axis_y2_padding)){y=r.axis.getPadding(i.axis_y2_padding,"top",y,d);m=r.axis.getPadding(i.axis_y2_padding,"bottom",m,d)}if(M){if(A)m=l;if(T)y=-f}h=[l-m,f+y];return C?h.reverse():h};C.getXDomainMin=function(t){var e=this,n=e.config;return f(n.axis_x_min)?e.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:e.d3.min(t,function(t){return e.d3.min(t.values,function(t){return t.x})})};C.getXDomainMax=function(t){var e=this,n=e.config;return f(n.axis_x_max)?e.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:e.d3.max(t,function(t){return e.d3.max(t.values,function(t){return t.x})})};C.getXDomainPadding=function(t){var n=this,r=n.config,i=t[1]-t[0],a,s,u,c;if(n.isCategorized())s=0;else if(n.hasType("bar"))s=(a=n.getMaxDataCount())>1?i/(a-1)/2:.5;else s=.01*i;if("object"===e(r.axis_x_padding)&&v(r.axis_x_padding)){u=o(r.axis_x_padding.left)?r.axis_x_padding.left:s;c=o(r.axis_x_padding.right)?r.axis_x_padding.right:s}else if("number"===typeof r.axis_x_padding)u=c=r.axis_x_padding;else u=c=s;return{left:u,right:c}};C.getXDomain=function(t){var e=this,n=[e.getXDomainMin(t),e.getXDomainMax(t)],r=n[0],i=n[1],a=e.getXDomainPadding(n),o=0,s=0;if(r-i===0&&!e.isCategorized())if(e.isTimeSeries()){r=new Date(.5*r.getTime());i=new Date(1.5*i.getTime())}else{r=0===r?1:.5*r;i=0===i?-1:1.5*i}if(r||0===r)o=e.isTimeSeries()?new Date(r.getTime()-a.left):r-a.left;if(i||0===i)s=e.isTimeSeries()?new Date(i.getTime()+a.right):i+a.right;return[o,s]};C.updateXDomain=function(t,e,n,r,i){var a=this,o=a.config;if(n){a.x.domain(i?i:a.d3.extent(a.getXDomain(t)));a.orgXDomain=a.x.domain();if(o.zoom_enabled)a.zoom.scale(a.x).updateScaleExtent();a.subX.domain(a.x.domain());if(a.brush)a.brush.scale(a.subX)}if(e){a.x.domain(i?i:!a.brush||a.brush.empty()?a.orgXDomain:a.brush.extent());if(o.zoom_enabled)a.zoom.scale(a.x).updateScaleExtent()}if(r)a.x.domain(a.trimXDomain(a.x.orgDomain()));return a.x.domain()};C.trimXDomain=function(t){var e=this.getZoomDomain(),n=e[0],r=e[1];if(t[0]<=n){t[1]=+t[1]+(n-t[0]);t[0]=n}if(r<=t[1]){t[0]=+t[0]-(t[1]-r);t[1]=r}return t};C.drag=function(e){var n=this,r=n.config,i=n.main,a=n.d3;var o,s,u,c,l,f,h,d;if(n.hasArcType())return;if(!r.data_selection_enabled)return;if(r.zoom_enabled&&!n.zoom.altDomain)return;if(!r.data_selection_multiple)return;o=n.dragStart[0];s=n.dragStart[1];u=e[0];c=e[1];l=Math.min(o,u);f=Math.max(o,u);h=r.data_selection_grouped?n.margin.top:Math.min(s,c);d=r.data_selection_grouped?n.height:Math.max(s,c);i.select("."+t.dragarea).attr("x",l).attr("y",h).attr("width",f-l).attr("height",d-h);i.selectAll("."+t.shapes).selectAll("."+t.shape).filter(function(t){return r.data_selection_isselectable(t)}).each(function(e,r){var i=a.select(this),o=i.classed(t.SELECTED),s=i.classed(t.INCLUDED),u,c,g,p,v,y=false,m;if(i.classed(t.circle)){u=1*i.attr("cx");c=1*i.attr("cy");v=n.togglePoint;y=l<u&&u<f&&h<c&&c<d}else if(i.classed(t.bar)){u=(m=_(this)).x;c=m.y;g=m.width;p=m.height;v=n.togglePath;y=!(f<u||u+g<l)&&!(d<c||c+p<h)}else return;if(y^s){i.classed(t.INCLUDED,!s);i.classed(t.SELECTED,!o);v.call(n,!o,i,e,r)}})};C.dragstart=function(e){var n=this,r=n.config;if(n.hasArcType())return;if(!r.data_selection_enabled)return;n.dragStart=e;n.main.select("."+t.chart).append("rect").attr("class",t.dragarea).style("opacity",.1);n.dragging=true};C.dragend=function(){var e=this,n=e.config;if(e.hasArcType())return;if(!n.data_selection_enabled)return;e.main.select("."+t.dragarea).transition().duration(100).style("opacity",0).remove();e.main.selectAll("."+t.shape).classed(t.INCLUDED,false);e.dragging=false};C.getYFormat=function(t){var e=this,n=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.yFormat,r=t&&!e.hasType("gauge")?e.defaultArcValueFormat:e.y2Format;return function(t,i,a){var o;return("y2"===e.axis.getId(a)?r:n).call(e,t,i)}};C.yFormat=function(t){var e=this,n=e.config,r;return(n.axis_y_tick_format?n.axis_y_tick_format:e.defaultValueFormat)(t)};C.y2Format=function(t){var e=this,n=e.config,r;return(n.axis_y2_tick_format?n.axis_y2_tick_format:e.defaultValueFormat)(t)};C.defaultValueFormat=function(t){return o(t)?+t:""};C.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"};C.dataLabelFormat=function(t){var n,r=this.config.data_labels,i,a=function t(e){return o(e)?+e:""};if("function"===typeof r.format)i=r.format;else if("object"===e(r.format))if(r.format[t])i=true===r.format[t]?a:r.format[t];else i=function t(){return""};else i=a;return i};C.initGrid=function(){var e=this,n=e.config,r=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",t.grid);if(n.grid_x_show)e.grid.append("g").attr("class",t.xgrids);if(n.grid_y_show)e.grid.append("g").attr("class",t.ygrids);if(n.grid_focus_show)e.grid.append("g").attr("class",t.xgridFocus).append("line").attr("class",t.xgridFocus);e.xgrid=r.selectAll([]);if(!n.grid_lines_front)e.initGridLines()};C.initGridLines=function(){var e=this,n=e.d3;e.gridLines=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",t.grid+" "+t.gridLines);e.gridLines.append("g").attr("class",t.xgridLines);e.gridLines.append("g").attr("class",t.ygridLines);e.xgridLines=n.selectAll([])};C.updateXGrid=function(e){var n=this,r=n.config,i=n.d3,a=n.generateGridData(r.grid_x_type,n.x),o=n.isCategorized()?n.xAxis.tickOffset():0;n.xgridAttr=r.axis_rotated?{x1:0,x2:n.width,y1:function t(e){return n.x(e)-o},y2:function t(e){return n.x(e)-o}}:{x1:function t(e){return n.x(e)+o},x2:function t(e){return n.x(e)+o},y1:0,y2:n.height};n.xgrid=n.main.select("."+t.xgrids).selectAll("."+t.xgrid).data(a);n.xgrid.enter().append("line").attr("class",t.xgrid);if(!e)n.xgrid.attr(n.xgridAttr).style("opacity",function(){return+i.select(this).attr(r.axis_rotated?"y1":"x1")===(r.axis_rotated?n.height:0)?0:1});n.xgrid.exit().remove()};C.updateYGrid=function(){var e=this,n=e.config,r=e.yAxis.tickValues()||e.y.ticks(n.grid_y_ticks);e.ygrid=e.main.select("."+t.ygrids).selectAll("."+t.ygrid).data(r);e.ygrid.enter().append("line").attr("class",t.ygrid);e.ygrid.attr("x1",n.axis_rotated?e.y:0).attr("x2",n.axis_rotated?e.y:e.width).attr("y1",n.axis_rotated?0:e.y).attr("y2",n.axis_rotated?e.height:e.y);e.ygrid.exit().remove();e.smoothLines(e.ygrid,"grid")};C.gridTextAnchor=function(t){return t.position?t.position:"end"};C.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4};C.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0};C.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width};C.updateGrid=function(e){var n=this,r=n.main,i=n.config,a,o,s;n.grid.style("visibility",n.hasArcType()?"hidden":"visible");r.select("line."+t.xgridFocus).style("visibility","hidden");if(i.grid_x_show)n.updateXGrid();n.xgridLines=r.select("."+t.xgridLines).selectAll("."+t.xgridLine).data(i.grid_x_lines);(a=n.xgridLines.enter().append("g").attr("class",function(e){return t.xgridLine+(e.class?" "+e.class:"")})).append("line").style("opacity",0);a.append("text").attr("text-anchor",n.gridTextAnchor).attr("transform",i.axis_rotated?"":"rotate(-90)").attr("dx",n.gridTextDx).attr("dy",-5).style("opacity",0);n.xgridLines.exit().transition().duration(e).style("opacity",0).remove();if(i.grid_y_show)n.updateYGrid();n.ygridLines=r.select("."+t.ygridLines).selectAll("."+t.ygridLine).data(i.grid_y_lines);(o=n.ygridLines.enter().append("g").attr("class",function(e){return t.ygridLine+(e.class?" "+e.class:"")})).append("line").style("opacity",0);o.append("text").attr("text-anchor",n.gridTextAnchor).attr("transform",i.axis_rotated?"rotate(-90)":"").attr("dx",n.gridTextDx).attr("dy",-5).style("opacity",0);s=n.yv.bind(n);n.ygridLines.select("line").transition().duration(e).attr("x1",i.axis_rotated?s:0).attr("x2",i.axis_rotated?s:n.width).attr("y1",i.axis_rotated?0:s).attr("y2",i.axis_rotated?n.height:s).style("opacity",1);n.ygridLines.select("text").transition().duration(e).attr("x",i.axis_rotated?n.xGridTextX.bind(n):n.yGridTextX.bind(n)).attr("y",s).text(function(t){return t.text}).style("opacity",1);n.ygridLines.exit().transition().duration(e).style("opacity",0).remove()};C.redrawGrid=function(t){var e=this,n=e.config,r=e.xv.bind(e),i=e.xgridLines.select("line"),a=e.xgridLines.select("text");return[(t?i.transition():i).attr("x1",n.axis_rotated?0:r).attr("x2",n.axis_rotated?e.width:r).attr("y1",n.axis_rotated?r:0).attr("y2",n.axis_rotated?r:e.height).style("opacity",1),(t?a.transition():a).attr("x",n.axis_rotated?e.yGridTextX.bind(e):e.xGridTextX.bind(e)).attr("y",r).text(function(t){return t.text}).style("opacity",1)]};C.showXGridFocus=function(e){var n=this,r=n.config,i=e.filter(function(t){return t&&o(t.value)}),a=n.main.selectAll("line."+t.xgridFocus),s=n.xx.bind(n);if(!r.tooltip_show)return;if(n.hasType("scatter")||n.hasArcType())return;a.style("visibility","visible").data([i[0]]).attr(r.axis_rotated?"y1":"x1",s).attr(r.axis_rotated?"y2":"x2",s);n.smoothLines(a,"grid")};C.hideXGridFocus=function(){this.main.select("line."+t.xgridFocus).style("visibility","hidden")};C.updateXgridFocus=function(){var e=this,n=e.config;e.main.select("line."+t.xgridFocus).attr("x1",n.axis_rotated?0:-10).attr("x2",n.axis_rotated?e.width:-10).attr("y1",n.axis_rotated?-10:0).attr("y2",n.axis_rotated?-10:e.height)};C.generateGridData=function(e,n){var r=this,i=[],a,o,s,u,c=r.main.select("."+t.axisX).selectAll(".tick").size();if("year"===e){o=(a=r.getXDomain())[0].getFullYear();s=a[1].getFullYear();for(u=o;u<=s;u++)i.push(new Date(u+"-01-01 00:00:00"))}else if((i=n.ticks(10)).length>c)i=i.filter(function(t){return(""+t).indexOf(".")<0});return i};C.getGridFilterToRemove=function(t){return t?function(e){var n=false;[].concat(t).forEach(function(t){if("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)n=true});return n}:function(){return true}};C.removeGridLines=function(e,n){var r=this,i=r.config,a=r.getGridFilterToRemove(e),o=function t(e){return!a(e)},s=n?t.xgridLines:t.ygridLines,u=n?t.xgridLine:t.ygridLine;r.main.select("."+s).selectAll("."+u).filter(a).transition().duration(i.transition_duration).style("opacity",0).remove();if(n)i.grid_x_lines=i.grid_x_lines.filter(o);else i.grid_y_lines=i.grid_y_lines.filter(o)};C.initEventRect=function(){var e;this.main.select("."+t.chart).append("g").attr("class",t.eventRects).style("fill-opacity",0)};C.redrawEventRect=function(){var e=this,n=e.config,r,i,a=e.isMultipleX();var o=e.main.select("."+t.eventRects).style("cursor",n.zoom_enabled?n.axis_rotated?"ns-resize":"ew-resize":null).classed(t.eventRectsMultiple,a).classed(t.eventRectsSingle,!a);o.selectAll("."+t.eventRect).remove();e.eventRect=o.selectAll("."+t.eventRect);if(a){r=e.eventRect.data([0]);e.generateEventRectsForMultipleXs(r.enter());e.updateEventRect(r)}else{i=e.getMaxDataCountTarget(e.data.targets);o.datum(i?i.values:[]);e.eventRect=o.selectAll("."+t.eventRect);r=e.eventRect.data(function(t){return t});e.generateEventRectsForSingleX(r.enter());e.updateEventRect(r);r.exit().remove()}};C.updateEventRect=function(t){var e=this,n=e.config,r,i,a,o,s,u;t=t||e.eventRect.data(function(t){return t});if(e.isMultipleX()){r=0;i=0;a=e.width;o=e.height}else{if((e.isCustomX()||e.isTimeSeries())&&!e.isCategorized()){e.updateXs();s=function t(r){var i=e.getPrevX(r.index),a=e.getNextX(r.index);if(null===i&&null===a)return n.axis_rotated?e.height:e.width;if(null===i)i=e.x.domain()[0];if(null===a)a=e.x.domain()[1];return Math.max(0,(e.x(a)-e.x(i))/2)};u=function t(n){var r=e.getPrevX(n.index),i=e.getNextX(n.index),a=e.data.xs[n.id][n.index];if(null===r&&null===i)return 0;if(null===r)r=e.x.domain()[0];return(e.x(a)+e.x(r))/2}}else{s=e.getEventRectWidth();u=function t(n){return e.x(n.x)-s/2}}r=n.axis_rotated?0:u;i=n.axis_rotated?u:0;a=n.axis_rotated?e.width:s;o=n.axis_rotated?s:e.height}t.attr("class",e.classEvent.bind(e)).attr("x",r).attr("y",i).attr("width",a).attr("height",o)};C.generateEventRectsForSingleX=function(e){var n=this,r=n.d3,i=n.config;e.append("rect").attr("class",n.classEvent.bind(n)).style("cursor",i.data_selection_enabled&&i.data_selection_grouped?"pointer":null).on("mouseover",function(e){var r=e.index;if(n.dragging||n.flowing)return;if(n.hasArcType())return;if(i.point_focus_expand_enabled)n.expandCircles(r,null,true);n.expandBars(r,null,true);n.main.selectAll("."+t.shape+"-"+r).each(function(t){i.data_onmouseover.call(n.api,t)})}).on("mouseout",function(e){var r=e.index;if(!n.config)return;if(n.hasArcType())return;n.hideXGridFocus();n.hideTooltip();n.unexpandCircles();n.unexpandBars();n.main.selectAll("."+t.shape+"-"+r).each(function(t){i.data_onmouseout.call(n.api,t)})}).on("mousemove",function(e){var a,o=e.index,s=n.svg.select("."+t.eventRect+"-"+o);if(n.dragging||n.flowing)return;if(n.hasArcType())return;if(n.isStepType(e)&&"step-after"===n.config.line_step_type&&r.mouse(this)[0]<n.x(n.getXValue(e.id,o)))o-=1;a=n.filterTargetsToShow(n.data.targets).map(function(t){return n.addName(n.getValueOnIndex(t.values,o))});if(i.tooltip_grouped){n.showTooltip(a,this);n.showXGridFocus(a)}if(i.tooltip_grouped&&(!i.data_selection_enabled||i.data_selection_grouped))return;n.main.selectAll("."+t.shape+"-"+o).each(function(){r.select(this).classed(t.EXPANDED,true);if(i.data_selection_enabled)s.style("cursor",i.data_selection_grouped?"pointer":null);if(!i.tooltip_grouped){n.hideXGridFocus();n.hideTooltip();if(!i.data_selection_grouped){n.unexpandCircles(o);n.unexpandBars(o)}}}).filter(function(t){return n.isWithinShape(this,t)}).each(function(t){if(i.data_selection_enabled&&(i.data_selection_grouped||i.data_selection_isselectable(t)))s.style("cursor","pointer");if(!i.tooltip_grouped){n.showTooltip([t],this);n.showXGridFocus([t]);if(i.point_focus_expand_enabled)n.expandCircles(o,t.id,true);n.expandBars(o,t.id,true)}})}).on("click",function(e){var a=e.index;if(n.hasArcType()||!n.toggleShape)return;if(n.cancelClick){n.cancelClick=false;return}if(n.isStepType(e)&&"step-after"===i.line_step_type&&r.mouse(this)[0]<n.x(n.getXValue(e.id,a)))a-=1;n.main.selectAll("."+t.shape+"-"+a).each(function(t){if(i.data_selection_grouped||n.isWithinShape(this,t)){n.toggleShape(this,t,a);n.config.data_onclick.call(n.api,t,this)}})}).call(i.data_selection_draggable&&n.drag?r.behavior.drag().origin(Object).on("drag",function(){n.drag(r.mouse(this))}).on("dragstart",function(){n.dragstart(r.mouse(this))}).on("dragend",function(){n.dragend()}):function(){})};C.generateEventRectsForMultipleXs=function(e){var n=this,r=n.d3,i=n.config;function a(){n.svg.select("."+t.eventRect).style("cursor",null);n.hideXGridFocus();n.hideTooltip();n.unexpandCircles();n.unexpandBars()}e.append("rect").attr("x",0).attr("y",0).attr("width",n.width).attr("height",n.height).attr("class",t.eventRect).on("mouseout",function(){if(!n.config)return;if(n.hasArcType())return;a()}).on("mousemove",function(){var e=n.filterTargetsToShow(n.data.targets);var o,s,u,c;if(n.dragging)return;if(n.hasArcType(e))return;o=r.mouse(this);s=n.findClosestFromTargets(e,o);if(n.mouseover&&(!s||s.id!==n.mouseover.id)){i.data_onmouseout.call(n.api,n.mouseover);n.mouseover=void 0}if(!s){a();return}if(n.isScatterType(s)||!i.tooltip_grouped)u=[s];else u=n.filterByX(e,s.x);c=u.map(function(t){return n.addName(t)});n.showTooltip(c,this);if(i.point_focus_expand_enabled)n.expandCircles(s.index,s.id,true);n.expandBars(s.index,s.id,true);n.showXGridFocus(c);if(n.isBarType(s.id)||n.dist(s,o)<i.point_sensitivity){n.svg.select("."+t.eventRect).style("cursor","pointer");if(!n.mouseover){i.data_onmouseover.call(n.api,s);n.mouseover=s}}}).on("click",function(){var e=n.filterTargetsToShow(n.data.targets);var a,o;if(n.hasArcType(e))return;a=r.mouse(this);if(!(o=n.findClosestFromTargets(e,a)))return;if(n.isBarType(o.id)||n.dist(o,a)<i.point_sensitivity)n.main.selectAll("."+t.shapes+n.getTargetSelectorSuffix(o.id)).selectAll("."+t.shape+"-"+o.index).each(function(){if(i.data_selection_grouped||n.isWithinShape(this,o)){n.toggleShape(this,o,o.index);n.config.data_onclick.call(n.api,o,this)}})}).call(i.data_selection_draggable&&n.drag?r.behavior.drag().origin(Object).on("drag",function(){n.drag(r.mouse(this))}).on("dragstart",function(){n.dragstart(r.mouse(this))}).on("dragend",function(){n.dragend()}):function(){})};C.dispatchEvent=function(e,n,r){var i=this,a="."+t.eventRect+(!i.isMultipleX()?"-"+n:""),o=i.main.select(a).node(),s=o.getBoundingClientRect(),u=s.left+(r?r[0]:0),c=s.top+(r?r[1]:0),l=document.createEvent("MouseEvents");l.initMouseEvent(e,true,true,window,0,u,c,u,c,false,false,false,false,0,null);o.dispatchEvent(l)};C.initLegend=function(){var t=this;t.legendItemTextBox={};t.legendHasRendered=false;t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend"));if(!t.config.legend_show){t.legend.style("visibility","hidden");t.hiddenLegendIds=t.mapToIds(t.data.targets);return}t.updateLegendWithDefaults()};C.updateLegendWithDefaults=function(){var t=this;t.updateLegend(t.mapToIds(t.data.targets),{withTransform:false,withTransitionForTransform:false,withTransition:false})};C.updateSizeForLegend=function(t,e){var n=this,r=n.config,i={top:n.isLegendTop?n.getCurrentPaddingTop()+r.legend_inset_y+5.5:n.currentHeight-t-n.getCurrentPaddingBottom()-r.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+r.legend_inset_x+.5:n.currentWidth-e-n.getCurrentPaddingRight()-r.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?i.top:n.currentHeight-t,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-e:n.isLegendInset?i.left:0}};C.transformLegend=function(t){var e=this;(t?e.legend.transition():e.legend).attr("transform",e.getTranslate("legend"))};C.updateLegendStep=function(t){this.legendStep=t};C.updateLegendItemWidth=function(t){this.legendItemWidth=t};C.updateLegendItemHeight=function(t){this.legendItemHeight=t};C.getLegendWidth=function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0};C.getLegendHeight=function(){var t=this,e=0;if(t.config.legend_show)if(t.isLegendRight)e=t.currentHeight;else e=Math.max(20,t.legendItemHeight)*(t.legendStep+1);return e};C.opacityForLegend=function(e){return e.classed(t.legendItemHidden)?null:1};C.opacityForUnfocusedLegend=function(e){return e.classed(t.legendItemHidden)?null:.3};C.toggleFocusLegend=function(e,n){var r=this;e=r.mapToTargetIds(e);r.legend.selectAll("."+t.legendItem).filter(function(t){return e.indexOf(t)>=0}).classed(t.legendItemFocused,n).transition().duration(100).style("opacity",function(){var t;return(n?r.opacityForLegend:r.opacityForUnfocusedLegend).call(r,r.d3.select(this))})};C.revertLegend=function(){var e=this,n=e.d3;e.legend.selectAll("."+t.legendItem).classed(t.legendItemFocused,false).transition().duration(100).style("opacity",function(){return e.opacityForLegend(n.select(this))})};C.showLegend=function(t){var e=this,n=e.config;if(!n.legend_show){n.legend_show=true;e.legend.style("visibility","visible");if(!e.legendHasRendered)e.updateLegendWithDefaults()}e.removeHiddenLegendIds(t);e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})};C.hideLegend=function(t){var e=this,n=e.config;if(n.legend_show&&p(t)){n.legend_show=false;e.legend.style("visibility","hidden")}e.addHiddenLegendIds(t);e.legend.selectAll(e.selectorLegends(t)).style("opacity",0).style("visibility","hidden")};C.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}};C.updateLegend=function(e,n,r){var i=this,a=i.config;var o,s,u,c,l,h,d,g,p;var v=4,m=10,x=0,_=0,w=10,S=a.legend_item_tile_width+5;var b,A=0,T={},M={},C={},P=[0],L={},E=0;var k,V;var O,I,R,G;e=e.filter(function(t){return!f(a.data_names[t])||null!==a.data_names[t]});k=y(n=n||{},"withTransition",true);V=y(n,"withTransitionForTransform",true);function N(e,n){if(!i.legendItemTextBox[n])i.legendItemTextBox[n]=i.getTextRect(e.textContent,t.legendItem,e);return i.legendItemTextBox[n]}function D(t,n,r){var o=0===r,s=r===e.length-1,u=N(t,n),c=u.width+S+(s&&!(i.isLegendRight||i.isLegendInset)?0:m)+a.legend_padding,l=u.height+v,f=i.isLegendRight||i.isLegendInset?l:c,h=i.isLegendRight||i.isLegendInset?i.getLegendHeight():i.getLegendWidth(),d,g;function p(t,e){if(!e)if((d=(h-A-f)/2)<w){d=(h-f)/2;A=0;E++}L[t]=E;P[E]=i.isLegendInset?10:d;T[t]=A;A+=f}if(o){A=0;E=0;x=0;_=0}if(a.legend_show&&!i.isLegendToShow(n)){M[n]=C[n]=L[n]=T[n]=0;return}M[n]=c;C[n]=l;if(!x||c>=x)x=c;if(!_||l>=_)_=l;g=i.isLegendRight||i.isLegendInset?_:x;if(a.legend_equally){Object.keys(M).forEach(function(t){M[t]=x});Object.keys(C).forEach(function(t){C[t]=_});if((d=(h-g*e.length)/2)<w){A=0;E=0;e.forEach(function(t){p(t)})}else p(n,true)}else p(n)}if(i.isLegendInset){E=a.legend_inset_step?a.legend_inset_step:e.length;i.updateLegendStep(E)}if(i.isLegendRight){o=function t(e){return x*L[e]};c=function t(e){return P[L[e]]+T[e]}}else if(i.isLegendInset){o=function t(e){return x*L[e]+10};c=function t(e){return P[L[e]]+T[e]}}else{o=function t(e){return P[L[e]]+T[e]};c=function t(e){return _*L[e]}}s=function t(e,n){return o(e,n)+4+a.legend_item_tile_width};l=function t(e,n){return c(e,n)+9};u=function t(e,n){return o(e,n)};h=function t(e,n){return c(e,n)-5};d=function t(e,n){return o(e,n)-2};g=function t(e,n){return o(e,n)-2+a.legend_item_tile_width};p=function t(e,n){return c(e,n)+4};(b=i.legend.selectAll("."+t.legendItem).data(e).enter().append("g").attr("class",function(e){return i.generateClass(t.legendItem,e)}).style("visibility",function(t){return i.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){if(a.legend_item_onclick)a.legend_item_onclick.call(i,t);else if(i.d3.event.altKey){i.api.hide();i.api.show(t)}else{i.api.toggle(t);i.isTargetToShow(t)?i.api.focus(t):i.api.revert()}}).on("mouseover",function(e){if(a.legend_item_onmouseover)a.legend_item_onmouseover.call(i,e);else{i.d3.select(this).classed(t.legendItemFocused,true);if(!i.transiting&&i.isTargetToShow(e))i.api.focus(e)}}).on("mouseout",function(e){if(a.legend_item_onmouseout)a.legend_item_onmouseout.call(i,e);else{i.d3.select(this).classed(t.legendItemFocused,false);i.api.revert()}})).append("text").text(function(t){return f(a.data_names[t])?a.data_names[t]:t}).each(function(t,e){D(this,t,e)}).style("pointer-events","none").attr("x",i.isLegendRight||i.isLegendInset?s:-200).attr("y",i.isLegendRight||i.isLegendInset?-200:l);b.append("rect").attr("class",t.legendItemEvent).style("fill-opacity",0).attr("x",i.isLegendRight||i.isLegendInset?u:-200).attr("y",i.isLegendRight||i.isLegendInset?-200:h);b.append("line").attr("class",t.legendItemTile).style("stroke",i.color).style("pointer-events","none").attr("x1",i.isLegendRight||i.isLegendInset?d:-200).attr("y1",i.isLegendRight||i.isLegendInset?-200:p).attr("x2",i.isLegendRight||i.isLegendInset?g:-200).attr("y2",i.isLegendRight||i.isLegendInset?-200:p).attr("stroke-width",a.legend_item_tile_height);G=i.legend.select("."+t.legendBackground+" rect");if(i.isLegendInset&&x>0&&0===G.size())G=i.legend.insert("g","."+t.legendItem).attr("class",t.legendBackground).append("rect");O=i.legend.selectAll("text").data(e).text(function(t){return f(a.data_names[t])?a.data_names[t]:t}).each(function(t,e){D(this,t,e)});(k?O.transition():O).attr("x",s).attr("y",l);I=i.legend.selectAll("rect."+t.legendItemEvent).data(e);(k?I.transition():I).attr("width",function(t){return M[t]}).attr("height",function(t){return C[t]}).attr("x",u).attr("y",h);R=i.legend.selectAll("line."+t.legendItemTile).data(e);(k?R.transition():R).style("stroke",i.levelColor?function(t){return i.levelColor(i.cache[t].values[0].value)}:i.color).attr("x1",d).attr("y1",p).attr("x2",g).attr("y2",p);if(G)(k?G.transition():G).attr("height",i.getLegendHeight()-12).attr("width",x*(E+1)+10);i.legend.selectAll("."+t.legendItem).classed(t.legendItemHidden,function(t){return!i.isTargetToShow(t)});i.updateLegendItemWidth(x);i.updateLegendItemHeight(_);i.updateLegendStep(E);i.updateSizes();i.updateScales();i.updateSvgSize();i.transformAll(V,r);i.legendHasRendered=true};C.initRegion=function(){var e=this;e.region=e.main.append("g").attr("clip-path",e.clipPath).attr("class",t.regions)};C.updateRegion=function(e){var n=this,r=n.config;n.region.style("visibility",n.hasArcType()?"hidden":"visible");n.mainRegion=n.main.select("."+t.regions).selectAll("."+t.region).data(r.regions);n.mainRegion.enter().append("g").append("rect").style("fill-opacity",0);n.mainRegion.attr("class",n.classRegion.bind(n));n.mainRegion.exit().transition().duration(e).style("opacity",0).remove()};C.redrawRegion=function(t){var e=this,n=e.mainRegion.selectAll("rect").each(function(){var t=e.d3.select(this.parentNode).datum();e.d3.select(this).datum(t)}),r=e.regionX.bind(e),i=e.regionY.bind(e),a=e.regionWidth.bind(e),s=e.regionHeight.bind(e);return[(t?n.transition():n).attr("x",r).attr("y",i).attr("width",a).attr("height",s).style("fill-opacity",function(t){return o(t.opacity)?t.opacity:.1})]};C.regionX=function(t){var e=this,n=e.config,r,i="y"===t.axis?e.y:e.y2;if("y"===t.axis||"y2"===t.axis)r=n.axis_rotated?"start"in t?i(t.start):0:0;else r=n.axis_rotated?0:"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0;return r};C.regionY=function(t){var e=this,n=e.config,r,i="y"===t.axis?e.y:e.y2;if("y"===t.axis||"y2"===t.axis)r=n.axis_rotated?0:"end"in t?i(t.end):0;else r=n.axis_rotated?"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0:0;return r};C.regionWidth=function(t){var e=this,n=e.config,r=e.regionX(t),i,a="y"===t.axis?e.y:e.y2;if("y"===t.axis||"y2"===t.axis)i=n.axis_rotated?"end"in t?a(t.end):e.width:e.width;else i=n.axis_rotated?e.width:"end"in t?e.x(e.isTimeSeries()?e.parseDate(t.end):t.end):e.width;return i<r?0:i-r};C.regionHeight=function(t){var e=this,n=e.config,r=this.regionY(t),i,a="y"===t.axis?e.y:e.y2;if("y"===t.axis||"y2"===t.axis)i=n.axis_rotated?e.height:"start"in t?a(t.start):e.height;else i=n.axis_rotated?"end"in t?e.x(e.isTimeSeries()?e.parseDate(t.end):t.end):e.height:e.height;return i<r?0:i-r};C.isRegionOnX=function(t){return!t.axis||"x"===t.axis};C.getScale=function(t,e,n){return(n?this.d3.time.scale():this.d3.scale.linear()).range([t,e])};C.getX=function(t,e,n,r){var i=this,a=i.getScale(t,e,i.isTimeSeries()),o=n?a.domain(n):a,s;if(i.isCategorized()){r=r||function(){return 0};a=function t(e,n){var i=o(e)+r(e);return n?i:Math.ceil(i)}}else a=function t(e,n){var r=o(e);return n?r:Math.ceil(r)};for(s in o)a[s]=o[s];a.orgDomain=function(){return o.domain()};if(i.isCategorized())a.domain=function(t){if(!arguments.length)return[(t=this.orgDomain())[0],t[1]+1];o.domain(t);return a};return a};C.getY=function(t,e,n){var r=this.getScale(t,e,this.isTimeSeriesY());if(n)r.domain(n);return r};C.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y};C.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY};C.updateScales=function(){var t=this,e=t.config,n=!t.x;t.xMin=e.axis_rotated?1:0;t.xMax=e.axis_rotated?t.height:t.width;t.yMin=e.axis_rotated?0:t.height;t.yMax=e.axis_rotated?t.width:1;t.subXMin=t.xMin;t.subXMax=t.xMax;t.subYMin=e.axis_rotated?0:t.height2;t.subYMax=e.axis_rotated?t.width2:1;t.x=t.getX(t.xMin,t.xMax,n?void 0:t.x.orgDomain(),function(){return t.xAxis.tickOffset()});t.y=t.getY(t.yMin,t.yMax,n?e.axis_y_default:t.y.domain());t.y2=t.getY(t.yMin,t.yMax,n?e.axis_y2_default:t.y2.domain());t.subX=t.getX(t.xMin,t.xMax,t.orgXDomain,function(e){return e%1?0:t.subXAxis.tickOffset()});t.subY=t.getY(t.subYMin,t.subYMax,n?e.axis_y_default:t.subY.domain());t.subY2=t.getY(t.subYMin,t.subYMax,n?e.axis_y2_default:t.subY2.domain());t.xAxisTickFormat=t.axis.getXAxisTickFormat();t.xAxisTickValues=t.axis.getXAxisTickValues();t.yAxisTickValues=t.axis.getYAxisTickValues();t.y2AxisTickValues=t.axis.getY2AxisTickValues();t.xAxis=t.axis.getXAxis(t.x,t.xOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer);t.subXAxis=t.axis.getXAxis(t.subX,t.subXOrient,t.xAxisTickFormat,t.xAxisTickValues,e.axis_x_tick_outer);t.yAxis=t.axis.getYAxis(t.y,t.yOrient,e.axis_y_tick_format,t.yAxisTickValues,e.axis_y_tick_outer);t.y2Axis=t.axis.getYAxis(t.y2,t.y2Orient,e.axis_y2_tick_format,t.y2AxisTickValues,e.axis_y2_tick_outer);if(!n){if(t.brush)t.brush.scale(t.subX);if(e.zoom_enabled)t.zoom.scale(t.x)}if(t.updateArc)t.updateArc()};C.selectPoint=function(e,n,r){var i=this,a=i.config,o=(a.axis_rotated?i.circleY:i.circleX).bind(i),s=(a.axis_rotated?i.circleX:i.circleY).bind(i),u=i.pointSelectR.bind(i);a.data_onselected.call(i.api,n,e.node());i.main.select("."+t.selectedCircles+i.getTargetSelectorSuffix(n.id)).selectAll("."+t.selectedCircle+"-"+r).data([n]).enter().append("circle").attr("class",function(){return i.generateClass(t.selectedCircle,r)}).attr("cx",o).attr("cy",s).attr("stroke",function(){return i.color(n)}).attr("r",function(t){return 1.4*i.pointSelectR(t)}).transition().duration(100).attr("r",u)};C.unselectPoint=function(e,n,r){var i=this;i.config.data_onunselected.call(i.api,n,e.node());i.main.select("."+t.selectedCircles+i.getTargetSelectorSuffix(n.id)).selectAll("."+t.selectedCircle+"-"+r).transition().duration(100).attr("r",0).remove()};C.togglePoint=function(t,e,n,r){t?this.selectPoint(e,n,r):this.unselectPoint(e,n,r)};C.selectPath=function(t,e){var n=this;n.config.data_onselected.call(n,e,t.node());if(n.config.interaction_brighten)t.transition().duration(100).style("fill",function(){return n.d3.rgb(n.color(e)).brighter(.75)})};C.unselectPath=function(t,e){var n=this;n.config.data_onunselected.call(n,e,t.node());if(n.config.interaction_brighten)t.transition().duration(100).style("fill",function(){return n.color(e)})};C.togglePath=function(t,e,n,r){t?this.selectPath(e,n,r):this.unselectPath(e,n,r)};C.getToggle=function(t,e){var n=this,r;if("circle"===t.nodeName)if(n.isStepType(e))r=function t(){};else r=n.togglePoint;else if("path"===t.nodeName)r=n.togglePath;return r};C.toggleShape=function(e,n,r){var i=this,a=i.d3,o=i.config,s=a.select(e),u=s.classed(t.SELECTED),c=i.getToggle(e,n).bind(i);if(o.data_selection_enabled&&o.data_selection_isselectable(n)){if(!o.data_selection_multiple)i.main.selectAll("."+t.shapes+(o.data_selection_grouped?i.getTargetSelectorSuffix(n.id):"")).selectAll("."+t.shape).each(function(e,n){var r=a.select(this);if(r.classed(t.SELECTED))c(false,r.classed(t.SELECTED,false),e,n)});s.classed(t.SELECTED,!u);c(!u,s,n,r)}};C.initBar=function(){var e;this.main.select("."+t.chart).append("g").attr("class",t.chartBars)};C.updateTargetsForBar=function(e){var n=this,r=n.config,i,a,o=n.classChartBar.bind(n),s=n.classBars.bind(n),u=n.classFocus.bind(n);(a=(i=n.main.select("."+t.chartBars).selectAll("."+t.chartBar).data(e).attr("class",function(t){return o(t)+u(t)})).enter().append("g").attr("class",o).style("pointer-events","none")).append("g").attr("class",s).style("cursor",function(t){return r.data_selection_isselectable(t)?"pointer":null})};C.updateBar=function(e){var n=this,r=n.barData.bind(n),i=n.classBar.bind(n),a=n.initialOpacity.bind(n),o=function t(e){return n.color(e.id)};n.mainBar=n.main.selectAll("."+t.bars).selectAll("."+t.bar).data(r);n.mainBar.enter().append("path").attr("class",i).style("stroke",o).style("fill",o);n.mainBar.style("opacity",a);n.mainBar.exit().transition().duration(e).remove()};C.redrawBar=function(t,e){return[(e?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",t).style("stroke",this.color).style("fill",this.color).style("opacity",1)]};C.getBarW=function(t,e){var n,r=this.config,i="number"===typeof r.bar_width?r.bar_width:e?t.tickInterval()*r.bar_width_ratio/e:0;return r.bar_width_max&&i>r.bar_width_max?r.bar_width_max:i};C.getBars=function(e,n){var r=this;return(n?r.main.selectAll("."+t.bars+r.getTargetSelectorSuffix(n)):r.main).selectAll("."+t.bar+(o(e)?"-"+e:""))};C.expandBars=function(e,n,r){var i=this;if(r)i.unexpandBars();i.getBars(e,n).classed(t.EXPANDED,true)};C.unexpandBars=function(e){var n;this.getBars(e).classed(t.EXPANDED,false)};C.generateDrawBar=function(t,e){var n=this,r=n.config,i=n.generateGetBarPoints(t,e);return function(t,e){var n=i(t,e);var a=r.axis_rotated?1:0;var o=r.axis_rotated?0:1;var s;return"M "+n[0][a]+","+n[0][o]+" L"+n[1][a]+","+n[1][o]+" L"+n[2][a]+","+n[2][o]+" L"+n[3][a]+","+n[3][o]+" z"}};C.generateGetBarPoints=function(t,e){var n=this,r=e?n.subXAxis:n.xAxis,i=t.__max__+1,a=n.getBarW(r,i),o=n.getShapeX(a,i,t,!!e),s=n.getShapeY(!!e),u=n.getShapeOffset(n.isBarType,t,!!e),c=a*(n.config.bar_space/2),l=e?n.getSubYScale:n.getYScale;return function(t,e){var r=l.call(n,t.id)(0),i=u(t,e)||r,f=o(t),h=s(t);if(n.config.axis_rotated)if(0<t.value&&h<r||t.value<0&&r<h)h=r;return[[f+c,i],[f+c,h-(r-i)],[f+a-c,h-(r-i)],[f+a-c,i]]}};C.isWithinBar=function(t){var e=this.d3.mouse(t),n=t.getBoundingClientRect(),r=t.pathSegList.getItem(0),i=t.pathSegList.getItem(1),a=Math.min(r.x,i.x),o=Math.min(r.y,i.y),s,u,c=2,l,f=a+n.width+2,h=o+n.height+2,d=o-2;return a-2<e[0]&&e[0]<f&&d<e[1]&&e[1]<h};C.getShapeIndices=function(t){var e=this,n=e.config,r={},i=0,a,o;e.filterTargetsToShow(e.data.targets.filter(t,e)).forEach(function(t){for(a=0;a<n.data_groups.length;a++){if(n.data_groups[a].indexOf(t.id)<0)continue;for(o=0;o<n.data_groups[a].length;o++)if(n.data_groups[a][o]in r){r[t.id]=r[n.data_groups[a][o]];break}}if(l(r[t.id]))r[t.id]=i++});r.__max__=i-1;return r};C.getShapeX=function(t,e,n,r){var i=this,a=r?i.subX:i.x;return function(r){var i=r.id in n?n[r.id]:0;return r.x||0===r.x?a(r.x)-t*(e/2-i):0}};C.getShapeY=function(t){var e=this;return function(n){var r;return(t?e.getSubYScale(n.id):e.getYScale(n.id))(n.value)}};C.getShapeOffset=function(t,e,n){var r=this,i=r.orderTargets(r.filterTargetsToShow(r.data.targets.filter(t,r))),a=i.map(function(t){return t.id});return function(t,o){var s=n?r.getSubYScale(t.id):r.getYScale(t.id),u=s(0),c=u;i.forEach(function(n){var i=r.isStepType(t)?r.convertValuesToStep(n.values):n.values;if(n.id===t.id||e[n.id]!==e[t.id])return;if(a.indexOf(n.id)<a.indexOf(t.id)){if("undefined"===typeof i[o]||+i[o].x!==+t.x){o=-1;i.forEach(function(e,n){if(e.x===t.x)o=n})}if(o in i&&i[o].value*t.value>=0)c+=s(i[o].value)-u}});return c}};C.isWithinShape=function(e,n){var r=this,i=r.d3.select(e),a;if(!r.isTargetToShow(n.id))a=false;else if("circle"===e.nodeName)a=r.isStepType(n)?r.isWithinStep(e,r.getYScale(n.id)(n.value)):r.isWithinCircle(e,1.5*r.pointSelectR(n));else if("path"===e.nodeName)a=i.classed(t.bar)?r.isWithinBar(e):true;return a};C.getInterpolate=function(t){var e=this,n=e.isInterpolationType(e.config.spline_interpolation_type)?e.config.spline_interpolation_type:"cardinal";return e.isSplineType(t)?n:e.isStepType(t)?e.config.line_step_type:"linear"};C.initLine=function(){var e;this.main.select("."+t.chart).append("g").attr("class",t.chartLines)};C.updateTargetsForLine=function(e){var n=this,r=n.config,i,a,o=n.classChartLine.bind(n),s=n.classLines.bind(n),u=n.classAreas.bind(n),c=n.classCircles.bind(n),l=n.classFocus.bind(n);(a=(i=n.main.select("."+t.chartLines).selectAll("."+t.chartLine).data(e).attr("class",function(t){return o(t)+l(t)})).enter().append("g").attr("class",o).style("opacity",0).style("pointer-events","none")).append("g").attr("class",s);a.append("g").attr("class",u);a.append("g").attr("class",function(e){return n.generateClass(t.selectedCircles,e.id)});a.append("g").attr("class",c).style("cursor",function(t){return r.data_selection_isselectable(t)?"pointer":null});e.forEach(function(e){n.main.selectAll("."+t.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+t.selectedCircle).each(function(t){t.value=e.values[t.index].value})})};C.updateLine=function(e){var n=this;n.mainLine=n.main.selectAll("."+t.lines).selectAll("."+t.line).data(n.lineData.bind(n));n.mainLine.enter().append("path").attr("class",n.classLine.bind(n)).style("stroke",n.color);n.mainLine.style("opacity",n.initialOpacity.bind(n)).style("shape-rendering",function(t){return n.isStepType(t)?"crispEdges":""}).attr("transform",null);n.mainLine.exit().transition().duration(e).style("opacity",0).remove()};C.redrawLine=function(t,e){return[(e?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]};C.generateDrawLine=function(t,e){var n=this,r=n.config,i=n.d3.svg.line(),a=n.generateGetLinePoints(t,e),o=e?n.getSubYScale:n.getYScale,s=function t(r){return(e?n.subxx:n.xx).call(n,r)},u=function t(e,i){return r.data_groups.length>0?a(e,i)[0][1]:o.call(n,e.id)(e.value)};i=r.axis_rotated?i.x(u).y(s):i.x(s).y(u);if(!r.line_connectNull)i=i.defined(function(t){return null!=t.value});return function(t){var a=r.line_connectNull?n.filterRemoveNull(t.values):t.values,s=e?n.x:n.subX,u=o.call(n,t.id),c=0,l=0,f;if(n.isLineType(t))if(r.data_regions[t.id])f=n.lineWithRegions(a,s,u,r.data_regions[t.id]);else{if(n.isStepType(t))a=n.convertValuesToStep(a);f=i.interpolate(n.getInterpolate(t))(a)}else{if(a[0]){c=s(a[0].x);l=u(a[0].value)}f=r.axis_rotated?"M "+l+" "+c:"M "+c+" "+l}return f?f:"M 0 0"}};C.generateGetLinePoints=function(t,e){var n=this,r=n.config,i=t.__max__+1,a=n.getShapeX(0,i,t,!!e),o=n.getShapeY(!!e),s=n.getShapeOffset(n.isLineType,t,!!e),u=e?n.getSubYScale:n.getYScale;return function(t,e){var i=u.call(n,t.id)(0),c=s(t,e)||i,l=a(t),f=o(t);if(r.axis_rotated)if(0<t.value&&f<i||t.value<0&&i<f)f=i;return[[l,f-(i-c)],[l,f-(i-c)],[l,f-(i-c)],[l,f-(i-c)]]}};C.lineWithRegions=function(t,e,n,r){var i=this,a=i.config,o=-1,s,u,c="M",h,d,g,p,v,y,m,x,_=i.isCategorized()?.5:0,w,S,b=[];function A(t,e){var n;for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return true;return false}if(f(r))for(s=0;s<r.length;s++){b[s]={};if(l(r[s].start))b[s].start=t[0].x;else b[s].start=i.isTimeSeries()?i.parseDate(r[s].start):r[s].start;if(l(r[s].end))b[s].end=t[t.length-1].x;else b[s].end=i.isTimeSeries()?i.parseDate(r[s].end):r[s].end}w=a.axis_rotated?function(t){return n(t.value)}:function(t){return e(t.x)};S=a.axis_rotated?function(t){return e(t.x)}:function(t){return n(t.value)};function T(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}if(i.isTimeSeries())h=function t(r,i,o,s){var u=r.x.getTime(),c=i.x-r.x,l=new Date(u+c*o),f=new Date(u+c*(o+s)),h;if(a.axis_rotated)h=[[n(g(o)),e(l)],[n(g(o+s)),e(f)]];else h=[[e(l),n(g(o))],[e(f),n(g(o+s))]];return T(h)};else h=function t(r,i,o,s){var u;if(a.axis_rotated)u=[[n(g(o),true),e(d(o))],[n(g(o+s),true),e(d(o+s))]];else u=[[e(d(o),true),n(g(o))],[e(d(o+s),true),n(g(o+s))]];return T(u)};for(s=0;s<t.length;s++){if(l(b)||!A(t[s].x,b))c+=" "+w(t[s])+" "+S(t[s]);else{d=i.getScale(t[s-1].x+_,t[s].x+_,i.isTimeSeries());g=i.getScale(t[s-1].value,t[s].value);p=e(t[s].x)-e(t[s-1].x);v=n(t[s].value)-n(t[s-1].value);x=2*(m=2/(y=Math.sqrt(Math.pow(p,2)+Math.pow(v,2))));for(u=m;u<=1;u+=x)c+=h(t[s-1],t[s],u,m)}o=t[s].x}return c};C.updateArea=function(e){var n=this,r=n.d3;n.mainArea=n.main.selectAll("."+t.areas).selectAll("."+t.area).data(n.lineData.bind(n));n.mainArea.enter().append("path").attr("class",n.classArea.bind(n)).style("fill",n.color).style("opacity",function(){n.orgAreaOpacity=+r.select(this).style("opacity");return 0});n.mainArea.style("opacity",n.orgAreaOpacity);n.mainArea.exit().transition().duration(e).style("opacity",0).remove()};C.redrawArea=function(t,e){return[(e?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]};C.generateDrawArea=function(t,e){var n=this,r=n.config,i=n.d3.svg.area(),a=n.generateGetAreaPoints(t,e),o=e?n.getSubYScale:n.getYScale,s=function t(r){return(e?n.subxx:n.xx).call(n,r)},u=function t(e,i){return r.data_groups.length>0?a(e,i)[0][1]:o.call(n,e.id)(n.getAreaBaseValue(e.id))},c=function t(e,i){return r.data_groups.length>0?a(e,i)[1][1]:o.call(n,e.id)(e.value)};i=r.axis_rotated?i.x0(u).x1(c).y(s):i.x(s).y0(r.area_above?0:u).y1(c);if(!r.line_connectNull)i=i.defined(function(t){return null!==t.value});return function(t){var e=r.line_connectNull?n.filterRemoveNull(t.values):t.values,a=0,o=0,s;if(n.isAreaType(t)){if(n.isStepType(t))e=n.convertValuesToStep(e);s=i.interpolate(n.getInterpolate(t))(e)}else{if(e[0]){a=n.x(e[0].x);o=n.getYScale(t.id)(e[0].value)}s=r.axis_rotated?"M "+o+" "+a:"M "+a+" "+o}return s?s:"M 0 0"}};C.getAreaBaseValue=function(){return 0};C.generateGetAreaPoints=function(t,e){var n=this,r=n.config,i=t.__max__+1,a=n.getShapeX(0,i,t,!!e),o=n.getShapeY(!!e),s=n.getShapeOffset(n.isAreaType,t,!!e),u=e?n.getSubYScale:n.getYScale;return function(t,e){var i=u.call(n,t.id)(0),c=s(t,e)||i,l=a(t),f=o(t);if(r.axis_rotated)if(0<t.value&&f<i||t.value<0&&i<f)f=i;return[[l,c],[l,f-(i-c)],[l,f-(i-c)],[l,c]]}};C.updateCircle=function(){var e=this;e.mainCircle=e.main.selectAll("."+t.circles).selectAll("."+t.circle).data(e.lineOrScatterData.bind(e));e.mainCircle.enter().append("circle").attr("class",e.classCircle.bind(e)).attr("r",e.pointR.bind(e)).style("fill",e.color);e.mainCircle.style("opacity",e.initialOpacityForCircle.bind(e));e.mainCircle.exit().remove()};C.redrawCircle=function(e,n,r){var i=this.main.selectAll("."+t.selectedCircle);return[(r?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",e).attr("cy",n),(r?i.transition(Math.random().toString()):i).attr("cx",e).attr("cy",n)]};C.circleX=function(t){return t.x||0===t.x?this.x(t.x):null};C.updateCircleY=function(){var t=this,e,n;if(t.config.data_groups.length>0){e=t.getShapeIndices(t.isLineType),n=t.generateGetLinePoints(e);t.circleY=function(t,e){return n(t,e)[0][1]}}else t.circleY=function(e){return t.getYScale(e.id)(e.value)}};C.getCircles=function(e,n){var r=this;return(n?r.main.selectAll("."+t.circles+r.getTargetSelectorSuffix(n)):r.main).selectAll("."+t.circle+(o(e)?"-"+e:""))};C.expandCircles=function(e,n,r){var i=this,a=i.pointExpandedR.bind(i);if(r)i.unexpandCircles();i.getCircles(e,n).classed(t.EXPANDED,true).attr("r",a)};C.unexpandCircles=function(e){var n=this,r=n.pointR.bind(n);n.getCircles(e).filter(function(){return n.d3.select(this).classed(t.EXPANDED)}).classed(t.EXPANDED,false).attr("r",r)};C.pointR=function(t){var e=this,n=e.config;return e.isStepType(t)?0:s(n.point_r)?n.point_r(t):n.point_r};C.pointExpandedR=function(t){var e=this,n=e.config;if(n.point_focus_expand_enabled)return s(n.point_focus_expand_r)?n.point_focus_expand_r(t):n.point_focus_expand_r?n.point_focus_expand_r:1.75*e.pointR(t);else return e.pointR(t)};C.pointSelectR=function(t){var e=this,n=e.config;return s(n.point_select_r)?n.point_select_r(t):n.point_select_r?n.point_select_r:4*e.pointR(t)};C.isWithinCircle=function(t,e){var n=this.d3,r=n.mouse(t),i=n.select(t),a=+i.attr("cx"),o=+i.attr("cy");return Math.sqrt(Math.pow(a-r[0],2)+Math.pow(o-r[1],2))<e};C.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30};C.getCurrentWidth=function(){var t=this,e=t.config;return e.size_width?e.size_width:t.getParentWidth()};C.getCurrentHeight=function(){var t=this,e=t.config,n=e.size_height?e.size_height:t.getParentHeight();return n>0?n:320/(t.hasType("gauge")&&!e.gauge_fullCircle?2:1)};C.getCurrentPaddingTop=function(){var t=this,e=t.config,n=o(e.padding_top)?e.padding_top:0;if(t.title&&t.title.node())n+=t.getTitlePadding();return n};C.getCurrentPaddingBottom=function(){var t=this.config;return o(t.padding_bottom)?t.padding_bottom:0};C.getCurrentPaddingLeft=function(t){var e=this,n=e.config;if(o(n.padding_left))return n.padding_left;else if(n.axis_rotated)return!n.axis_x_show||n.axis_x_inner?1:Math.max(h(e.getAxisWidthByAxisId("x",t)),40);else if(!n.axis_y_show||n.axis_y_inner)return e.axis.getYAxisLabelPosition().isOuter?30:1;else return h(e.getAxisWidthByAxisId("y",t))};C.getCurrentPaddingRight=function(){var t=this,e=t.config,n=10,r=t.isLegendRight?t.getLegendWidth()+20:0;if(o(e.padding_right))return e.padding_right+1;else if(e.axis_rotated)return 10+r;else if(!e.axis_y2_show||e.axis_y2_inner)return 2+r+(t.axis.getY2AxisLabelPosition().isOuter?20:0);else return h(t.getAxisWidthByAxisId("y2"))+r};C.getParentRectValue=function(t){var e=this.selectChart.node(),n;for(;e&&"BODY"!==e.tagName;){try{n=e.getBoundingClientRect()[t]}catch(r){if("width"===t)n=e.offsetWidth}if(n)break;e=e.parentNode}return n};C.getParentWidth=function(){return this.getParentRectValue("width")};C.getParentHeight=function(){var t=this.selectChart.style("height");return t.indexOf("px")>0?+t.replace("px",""):0};C.getSvgLeft=function(e){var n=this,r=n.config,i=r.axis_rotated||!r.axis_rotated&&!r.axis_y_inner,a=r.axis_rotated?t.axisX:t.axisY,o=n.main.select("."+a).node(),s=o&&i?o.getBoundingClientRect():{right:0},u=n.selectChart.node().getBoundingClientRect(),c=n.hasArcType(),l=s.right-u.left-(c?0:n.getCurrentPaddingLeft(e));return l>0?l:0};C.getAxisWidthByAxisId=function(t,e){var n=this,r=n.axis.getLabelPositionById(t);return n.axis.getMaxTickWidth(t,e)+(r.isInner?20:40)};C.getHorizontalAxisHeight=function(t){var e=this,n=e.config,r=30;if("x"===t&&!n.axis_x_show)return 8;if("x"===t&&n.axis_x_height)return n.axis_x_height;if("y"===t&&!n.axis_y_show)return n.legend_show&&!e.isLegendRight&&!e.isLegendInset?10:1;if("y2"===t&&!n.axis_y2_show)return e.rotated_padding_top;if("x"===t&&!n.axis_rotated&&n.axis_x_tick_rotate)r=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_x_tick_rotate)/180);if("y"===t&&n.axis_rotated&&n.axis_y_tick_rotate)r=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-n.axis_y_tick_rotate)/180);return r+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)};C.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())};C.initBrush=function(){var e=this,n=e.d3;e.brush=n.svg.brush().on("brush",function(){e.redrawForBrush()});e.brush.update=function(){if(e.context)e.context.select("."+t.brush).call(this);return this};e.brush.scale=function(t){return e.config.axis_rotated?this.y(t):this.x(t)}};C.initSubchart=function(){var e=this,n=e.config,r=e.context=e.svg.append("g").attr("transform",e.getTranslate("context")),i=n.subchart_show?"visible":"hidden";r.style("visibility",i);r.append("g").attr("clip-path",e.clipPathForSubchart).attr("class",t.chart);r.select("."+t.chart).append("g").attr("class",t.chartBars);r.select("."+t.chart).append("g").attr("class",t.chartLines);r.append("g").attr("clip-path",e.clipPath).attr("class",t.brush).call(e.brush);e.axes.subx=r.append("g").attr("class",t.axisX).attr("transform",e.getTranslate("subx")).attr("clip-path",n.axis_rotated?"":e.clipPathForXAxis).style("visibility",n.subchart_axis_x_show?i:"hidden")};C.updateTargetsForSubchart=function(e){var n=this,r=n.context,i=n.config,a,o,s,u,c=n.classChartBar.bind(n),l=n.classBars.bind(n),f=n.classChartLine.bind(n),h=n.classLines.bind(n),d=n.classAreas.bind(n);if(i.subchart_show){(s=(u=r.select("."+t.chartBars).selectAll("."+t.chartBar).data(e).attr("class",c)).enter().append("g").style("opacity",0).attr("class",c)).append("g").attr("class",l);(a=(o=r.select("."+t.chartLines).selectAll("."+t.chartLine).data(e).attr("class",f)).enter().append("g").style("opacity",0).attr("class",f)).append("g").attr("class",h);a.append("g").attr("class",d);r.selectAll("."+t.brush+" rect").attr(i.axis_rotated?"width":"height",i.axis_rotated?n.width2:n.height2)}};C.updateBarForSubchart=function(e){var n=this;n.contextBar=n.context.selectAll("."+t.bars).selectAll("."+t.bar).data(n.barData.bind(n));n.contextBar.enter().append("path").attr("class",n.classBar.bind(n)).style("stroke","none").style("fill",n.color);n.contextBar.style("opacity",n.initialOpacity.bind(n));n.contextBar.exit().transition().duration(e).style("opacity",0).remove()};C.redrawBarForSubchart=function(t,e,n){(e?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",t).style("opacity",1)};C.updateLineForSubchart=function(e){var n=this;n.contextLine=n.context.selectAll("."+t.lines).selectAll("."+t.line).data(n.lineData.bind(n));n.contextLine.enter().append("path").attr("class",n.classLine.bind(n)).style("stroke",n.color);n.contextLine.style("opacity",n.initialOpacity.bind(n));n.contextLine.exit().transition().duration(e).style("opacity",0).remove()};C.redrawLineForSubchart=function(t,e,n){(e?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",t).style("opacity",1)};C.updateAreaForSubchart=function(e){var n=this,r=n.d3;n.contextArea=n.context.selectAll("."+t.areas).selectAll("."+t.area).data(n.lineData.bind(n));n.contextArea.enter().append("path").attr("class",n.classArea.bind(n)).style("fill",n.color).style("opacity",function(){n.orgAreaOpacity=+r.select(this).style("opacity");return 0});n.contextArea.style("opacity",0);n.contextArea.exit().transition().duration(e).style("opacity",0).remove()};C.redrawAreaForSubchart=function(t,e,n){(e?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)};C.redrawSubchart=function(t,e,n,r,i,a,o){var s=this,u=s.d3,c=s.config,l,f,h;s.context.style("visibility",c.subchart_show?"visible":"hidden");if(c.subchart_show){if(u.event&&"zoom"===u.event.type)s.brush.extent(s.x.orgDomain()).update();if(t){if(!s.brush.empty())s.brush.extent(s.x.orgDomain()).update();l=s.generateDrawArea(i,true);f=s.generateDrawBar(a,true);h=s.generateDrawLine(o,true);s.updateBarForSubchart(n);s.updateLineForSubchart(n);s.updateAreaForSubchart(n);s.redrawBarForSubchart(f,n,n);s.redrawLineForSubchart(h,n,n);s.redrawAreaForSubchart(l,n,n)}}};C.redrawForBrush=function(){var t=this,e=t.x;t.redraw({withTransition:false,withY:t.config.zoom_rescale,withSubchart:false,withUpdateXDomain:true,withDimension:false});t.config.subchart_onbrush.call(t.api,e.orgDomain())};C.transformContext=function(e,n){var r=this,i;if(n&&n.axisSubX)i=n.axisSubX;else{i=r.context.select("."+t.axisX);if(e)i=i.transition()}r.context.attr("transform",r.getTranslate("context"));i.attr("transform",r.getTranslate("subx"))};C.getDefaultExtent=function(){var t=this,e=t.config,n=s(e.axis_x_extent)?e.axis_x_extent(t.getXDomain(t.data.targets)):e.axis_x_extent;if(t.isTimeSeries())n=[t.parseDate(n[0]),t.parseDate(n[1])];return n};C.initText=function(){var e=this;e.main.select("."+t.chart).append("g").attr("class",t.chartTexts);e.mainText=e.d3.selectAll([])};C.updateTargetsForText=function(e){var n=this,r,i,a=n.classChartText.bind(n),o=n.classTexts.bind(n),s=n.classFocus.bind(n);(i=(r=n.main.select("."+t.chartTexts).selectAll("."+t.chartText).data(e).attr("class",function(t){return a(t)+s(t)})).enter().append("g").attr("class",a).style("opacity",0).style("pointer-events","none")).append("g").attr("class",o)};C.updateText=function(e){var n=this,r=n.config,i=n.barOrLineData.bind(n),a=n.classText.bind(n);n.mainText=n.main.selectAll("."+t.texts).selectAll("."+t.text).data(i);n.mainText.enter().append("text").attr("class",a).attr("text-anchor",function(t){return r.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(t){return n.color(t)}).style("fill-opacity",0);n.mainText.text(function(t,e,r){return n.dataLabelFormat(t.id)(t.value,t.id,e,r)});n.mainText.exit().transition().duration(e).style("fill-opacity",0).remove()};C.redrawText=function(t,e,n,r){return[(r?this.mainText.transition():this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]};C.getTextRect=function(t,e,n){var r=this.d3.select("body").append("div").classed("c3",true),i=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),a=this.d3.select(n).style("font"),o;i.selectAll(".dummy").data([t]).enter().append("text").classed(e?e:"",true).style("font",a).text(t).each(function(){o=this.getBoundingClientRect()});r.remove();return o};C.generateXYForText=function(t,e,n,r){var i=this,a=i.generateGetAreaPoints(t,false),o=i.generateGetBarPoints(e,false),s=i.generateGetLinePoints(n,false),u=r?i.getXForText:i.getYForText;return function(t,e){var n=i.isAreaType(t)?a:i.isBarType(t)?o:s;return u.call(i,n(t,e),t,this)}};C.getXForText=function(t,e,n){var r=this,i=n.getBoundingClientRect(),a,o;if(r.config.axis_rotated){o=r.isBarType(e)?4:6;a=t[2][1]+o*(e.value<0?-1:1)}else a=r.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0];if(null===e.value)if(a>r.width)a=r.width-i.width;else if(a<0)a=4;return a};C.getYForText=function(t,e,n){var r=this,i=n.getBoundingClientRect(),a;if(r.config.axis_rotated)a=(t[0][0]+t[2][0]+.6*i.height)/2;else{a=t[2][1];if(e.value<0||0===e.value&&!r.hasPositiveValue){a+=i.height;if(r.isBarType(e)&&r.isSafari())a-=3;else if(!r.isBarType(e)&&r.isChrome())a+=3}else a+=r.isBarType(e)?-3:-6}if(null===e.value&&!r.config.axis_rotated)if(a<i.height)a=i.height;else if(a>this.height)a=this.height-4;return a};C.initTitle=function(){var t=this;t.title=t.svg.append("text").text(t.config.title_text).attr("class",t.CLASS.title)};C.redrawTitle=function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))};C.xForTitle=function(){var t=this,e=t.config,n=e.title_position||"left",r;if(n.indexOf("right")>=0)r=t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right;else if(n.indexOf("center")>=0)r=(t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2;else r=e.title_padding.left;return r};C.yForTitle=function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height};C.getTitlePadding=function(){var t=this;return t.yForTitle()+t.config.title_padding.bottom};C.initTooltip=function(){var e=this,n=e.config,r;e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",t.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none");if(n.tooltip_init_show){if(e.isTimeSeries()&&c(n.tooltip_init_x)){n.tooltip_init_x=e.parseDate(n.tooltip_init_x);for(r=0;r<e.data.targets[0].values.length&&e.data.targets[0].values[r].x-n.tooltip_init_x!==0;r++);n.tooltip_init_x=r}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[n.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color));e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}};C.getTooltipSortFunction=function(){var t=this,e=t.config;if(0===e.data_groups.length||void 0!==e.tooltip_order){var n=e.tooltip_order;if(void 0===n)n=e.data_order;var r=function t(e){return e?e.value:null};if(c(n)&&"asc"===n.toLowerCase())return function(t,e){return r(t)-r(e)};else if(c(n)&&"desc"===n.toLowerCase())return function(t,e){return r(e)-r(t)};else if(s(n)){var i=n;if(void 0===e.tooltip_order)i=function t(e,r){return n(e?{id:e.id,values:[e]}:null,r?{id:r.id,values:[r]}:null)};return i}else if(u(n))return function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}}else{var a=t.orderTargets(t.data.targets).map(function(t){return t.id});if(t.isOrderAsc()||t.isOrderDesc())a=a.reverse();return function(t,e){return a.indexOf(t.id)-a.indexOf(e.id)}}};C.getTooltipContent=function(t,e,n,r){var i=this,a=i.config,o=a.tooltip_format_title||e,s=a.tooltip_format_name||function(t){return t},u=a.tooltip_format_value||n,c,l,f,h,d,g;var p=this.getTooltipSortFunction();if(p)t.sort(p);for(l=0;l<t.length;l++){if(!(t[l]&&(t[l].value||0===t[l].value)))continue;if(!c){f=x(o?o(t[l].x):t[l].x);c="<table class='"+i.CLASS.tooltip+"'>"+(f||0===f?"<tr><th colspan='2'>"+f+"</th></tr>":"")}if(void 0!==(h=x(u(t[l].value,t[l].ratio,t[l].id,t[l].index,t)))){if(null===t[l].name)continue;d=x(s(t[l].name,t[l].ratio,t[l].id,t[l].index));g=i.levelColor?i.levelColor(t[l].value):r(t[l].id);c+="<tr class='"+i.CLASS.tooltipName+"-"+i.getTargetSelectorSuffix(t[l].id)+"'>";c+="<td class='name'><span style='background-color:"+g+"'></span>"+d+"</td>";c+="<td class='value'>"+h+"</td>";c+="</tr>"}}return c+"</table>"};C.tooltipPosition=function(t,e,n,r){var i=this,a=i.config,o=i.d3;var s,u,c,l,f;var h=i.hasArcType(),d=o.mouse(r);if(h){u=(i.width-(i.isLegendRight?i.getLegendWidth():0))/2+d[0];l=(i.hasType("gauge")?i.height:i.height/2)+d[1]+20}else{s=i.getSvgLeft(true);if(a.axis_rotated){c=(u=s+d[0]+100)+e;f=i.currentWidth-i.getCurrentPaddingRight();l=i.x(t[0].x)+20}else{c=(u=s+i.getCurrentPaddingLeft(true)+i.x(t[0].x)+20)+e;f=s+i.currentWidth-i.getCurrentPaddingRight();l=d[1]+15}if(c>f)u-=c-f+20;if(l+n>i.currentHeight)l-=n+30}if(l<0)l=0;return{top:l,left:u}};C.showTooltip=function(t,e){var n=this,r=n.config;var i,a,s;var u=n.hasArcType(),c=t.filter(function(t){return t&&o(t.value)}),l=r.tooltip_position||C.tooltipPosition;if(0===c.length||!r.tooltip_show)return;n.tooltip.html(r.tooltip_contents.call(n,t,n.axis.getXAxisTickFormat(),n.getYFormat(u),n.color)).style("display","block");i=n.tooltip.property("offsetWidth");a=n.tooltip.property("offsetHeight");s=l.call(this,c,i,a,e);n.tooltip.style("top",s.top+"px").style("left",s.left+"px")};C.hideTooltip=function(){this.tooltip.style("display","none")};C.setTargetType=function(t,e){var n=this,r=n.config;n.mapToTargetIds(t).forEach(function(t){n.withoutFadeIn[t]=e===r.data_types[t];r.data_types[t]=e});if(!t)r.data_type=e};C.hasType=function(t,e){var n=this,r=n.config.data_types,i=false;if((e=e||n.data.targets)&&e.length)e.forEach(function(e){var n=r[e.id];if(n&&n.indexOf(t)>=0||!n&&"line"===t)i=true});else if(Object.keys(r).length)Object.keys(r).forEach(function(e){if(r[e]===t)i=true});else i=n.config.data_type===t;return i};C.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)};C.isLineType=function(t){var e=this.config,n=c(t)?t:t.id;return!e.data_types[n]||["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[n])>=0};C.isStepType=function(t){var e=c(t)?t:t.id;return["step","area-step"].indexOf(this.config.data_types[e])>=0};C.isSplineType=function(t){var e=c(t)?t:t.id;return["spline","area-spline"].indexOf(this.config.data_types[e])>=0};C.isAreaType=function(t){var e=c(t)?t:t.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[e])>=0};C.isBarType=function(t){var e=c(t)?t:t.id;return"bar"===this.config.data_types[e]};C.isScatterType=function(t){var e=c(t)?t:t.id;return"scatter"===this.config.data_types[e]};C.isPieType=function(t){var e=c(t)?t:t.id;return"pie"===this.config.data_types[e]};C.isGaugeType=function(t){var e=c(t)?t:t.id;return"gauge"===this.config.data_types[e]};C.isDonutType=function(t){var e=c(t)?t:t.id;return"donut"===this.config.data_types[e]};C.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)};C.lineData=function(t){return this.isLineType(t)?[t]:[]};C.arcData=function(t){return this.isArcType(t.data)?[t]:[]};C.barData=function(t){return this.isBarType(t)?t.values:[]};C.lineOrScatterData=function(t){return this.isLineType(t)||this.isScatterType(t)?t.values:[]};C.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]};C.isInterpolationType=function(t){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(t)>=0};C.isSafari=function(){var t=window.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0};C.isChrome=function(){var t;return window.navigator.userAgent.indexOf("Chrome")>=0};C.initZoom=function(){var t=this,e=t.d3,n=t.config,r;t.zoom=e.behavior.zoom().on("zoomstart",function(){r=e.event.sourceEvent;t.zoom.altDomain=e.event.sourceEvent.altKey?t.x.orgDomain():null;n.zoom_onzoomstart.call(t.api,e.event.sourceEvent)}).on("zoom",function(){t.redrawForZoom.call(t)}).on("zoomend",function(){var i=e.event.sourceEvent;if(i&&r.clientX===i.clientX&&r.clientY===i.clientY)return;t.redrawEventRect();t.updateZoom();n.zoom_onzoomend.call(t.api,t.x.orgDomain())});t.zoom.scale=function(t){return n.axis_rotated?this.y(t):this.x(t)};t.zoom.orgScaleExtent=function(){var e=n.zoom_extent?n.zoom_extent:[1,10];return[e[0],Math.max(t.getMaxDataCount()/e[1],e[1])]};t.zoom.updateScaleExtent=function(){var e=g(t.x.orgDomain())/g(t.getZoomDomain()),n=this.orgScaleExtent();this.scaleExtent([n[0]*e,n[1]*e]);return this}};C.getZoomDomain=function(){var t=this,e=t.config,n=t.d3,r,i;return[n.min([t.orgXDomain[0],e.zoom_x_min]),n.max([t.orgXDomain[1],e.zoom_x_max])]};C.updateZoom=function(){var e=this,n=e.config.zoom_enabled?e.zoom:function(){};e.main.select("."+t.zoomRect).call(n).on("dblclick.zoom",null);e.main.selectAll("."+t.eventRect).call(n).on("dblclick.zoom",null)};C.redrawForZoom=function(){var t=this,e=t.d3,n=t.config,r=t.zoom,i=t.x;if(!n.zoom_enabled)return;if(0===t.filterTargetsToShow(t.data.targets).length)return;if("mousemove"===e.event.sourceEvent.type&&r.altDomain){i.domain(r.altDomain);r.scale(i).updateScaleExtent();return}if(t.isCategorized()&&i.orgDomain()[0]===t.orgXDomain[0])i.domain([t.orgXDomain[0]-1e-10,i.orgDomain()[1]]);t.redraw({withTransition:false,withY:n.zoom_rescale,withSubchart:false,withEventRect:false,withDimension:false});if("mousemove"===e.event.sourceEvent.type)t.cancelClick=true;n.zoom_onzoom.call(t.api,i.orgDomain())};return T},t.exports=i();var r,i},8:function(t,e,n){var r=n(237);function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)r(t,e)}t.exports=i},84:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},87:function(t,e,n){var r=n(68);t.exports=function(t){return Object(r(t))}},88:function(t,e,n){var r=n(29);var i=n(606);r({global:true,forced:parseFloat!=i},{parseFloat:i})},89:function(t,e,n){var r=n(135);var i=n(68);t.exports=function(t){return r(i(t))}},9:function(t,e,n){var r=n(104);var i=n(22);function a(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;return i(t)}t.exports=a},90:function(t,e,n){var r=n(49);var i=n(27);var a=n(39);var o=Object.defineProperty;var s={};var u=function(t){throw t};t.exports=function(t,e){if(a(s,t))return s[t];if(!e)e={};var n=[][t];var c=a(e,"ACCESSORS")?e.ACCESSORS:false;var l=a(e,0)?e[0]:u;var f=a(e,1)?e[1]:void 0;return s[t]=!!n&&!i(function(){if(c&&!r)return true;var t={length:-1};if(c)o(t,1,{enumerable:true,get:u});else t[1]=1;n.call(t,l,f)})}},9707:function(t,e,n){"use strict";(function(t){var r=n(99);var i=n.n(r);var a=n(13);var o=n.n(a);var s=n(28);var u=n.n(s);var c=n(3);var l=n.n(c);var f=n(12);var h=n.n(f);var d=n(0);var g=n.n(d);var p=n(698);var v=n(9708);var y=function(){function e(){var t=this;l()(this,e);g()(this,"showGraph",function(){t.chart.showGraph()});g()(this,"getYearDate",function(t,e,n){var r=new Date;var i=0;var a=0;if(0===e){i=r.getFullYear();a=r.getMonth()+Math.abs(t)}else{i=e;a=Math.abs(t)-1+Math.abs(n)}var o=String(r.setFullYear(i,a,1));return parseInt(o.substring(0,5),10)});g()(this,"findValue",function(e,n){if(e.length>0)for(var r=0;r<e.length;r++)if(e[r]===n)return r;return t.totalMonths});g()(this,"roundCurrency",function(t){return Math.round(100*t)/100});this.calculation=[["sOpening"],["sInterest"],["sPayment"],["sClosing"],["oOpening"],["oInterest"],["ooInterest"],["oPayment"],["oMPayRed"],["oClosing"],["nsOpening"],["nsOOpening"],["nsInterest"],["nsOInterest"],["nsClosing"],["osOpening"],["osInterest"],["osClosing"]];this.totalMonths=0;this.OffSetSavingMonth=0;this.monthlyPayments=0;this.lumpSumkeys=[];this.lumpSumValues=[];this.lumpSumsCalc=[];this.additions=[];this.subadditions=[];this.sMPayyArr=[];this.sMIntOnlyArr=[];this.linc=0;this.monthlySavings=0;this.offSavedInt=0;this.intEarned=0;this.repayment=0;this.ymaddition="";this.ymresults="";this.normLineLength=0;this.yAxisCeil=0;this.projSavInfo=0;this.normalMortPayments=[];this.priorityOne=true;this.chart=new v.a}h()(e,[{key:"priority",value:function(){function e(){this.priorityOne="1"===t('input:radio[name="priority"]:checked').val();this.chart.priority(this.priorityOne);return this.priorityOne}return e}()},{key:"calculate",value:function(){function n(n,r){this.totalMonths=12*Math.abs(t("#mortgagetermyrs").val())+Math.abs(t("#mortgagetermmts").val());this.monthlyPayments=Math.abs(e.calculateMonthlyPayment(t("#mortgageamount").val().replace(/,/g,""),this.totalMonths,0===this.repayment?1:this.repayment));this.monthlySavings=Math.abs(e.calculateMonthlyInterest(t("#avgcuraccbal").val().replace(/,/g,""),t("#avgsavingrate").val()));if(this.lumpSumkeys.length>0)for(var i=0;i<this.lumpSumkeys.length;i++){this.lumpSumkeys[i]=0;this.lumpSumValues[i]=0}this.loadLumpSum();if("partAndPart"===t("#repaymentType").val())this.calculateMortgagePAP(n,r);else this.calculateMortgage();this.OffSetSavingMonth=0===this.OffSetSavingMonth?this.totalMonths:this.OffSetSavingMonth;this.calculateResult();this.calculateBenefits();this.benefitsList();this.chart.setData(this.calculation,this.OffSetSavingMonth,this.normLineLength,this.additions,this.subadditions);this.chart.chartData()}return n}()},{key:"getRepayment",value:function(){function t(t){this.repayment=t}return t}()},{key:"addLumpSumValues",value:function(){function t(t,e){var n=true;if(this.lumpSumkeys.length>0)for(var r=0;r<this.lumpSumkeys.length;r++)if(this.lumpSumkeys[r]===t){this.lumpSumValues[r]=Math.abs(this.lumpSumValues[r])+Math.abs(e);n=false}if(n){this.lumpSumkeys[this.linc]=t;this.lumpSumValues[this.linc]=e;this.linc++}}return t}()},{key:"getLumpSum",value:function(){function t(t){var e=true;if(this.lumpSumkeys.length>0){for(var n=0;n<this.lumpSumkeys.length;n++)if(Math.abs(this.lumpSumkeys[n])===Math.abs(t)){e=false;return this.lumpSumValues[n]}if(e)return 0}return 0}return t}()},{key:"setLumpSums",value:function(){function t(t){this.lumpSumsCalc=t}return t}()},{key:"loadLumpSum",value:function(){function e(){var e=this.getYearDate(this.totalMonths,0,0);var n=3;var r=1;var i=12;for(var a=0;a<this.lumpSumsCalc.length;a++){var o=this.getYearDate(t("#lsmonth".concat(a)).val(),t("#lsyear".concat(a)).val(),0);if(0!==t("#lsamount".concat(a)).val().replace(/,/g,"")&&0!==t("#lsmonth".concat(a)).val()&&0!==t("#lsyear".concat(a)).val())switch(t("#lsfrequency".concat(a)).val()){case"One-off":this.addLumpSumValues(o,t("#lsamount".concat(a)).val().replace(/,/g,""));break;case"Quarterly":o=this.getYearDate(t("#lsmonth".concat(a)).val(),t("#lsyear".concat(a)).val(),0);for(;o<=e;){this.addLumpSumValues(o,t("#lsamount".concat(a)).val().replace(/,/g,""));o=this.getYearDate(t("#lsmonth".concat(a)).val(),t("#lsyear".concat(a)).val(),n);n+=3}break;case"Annually":o=this.getYearDate(t("#lsmonth".concat(a)).val(),t("#lsyear".concat(a)).val(),0);for(;o<=e;){this.addLumpSumValues(o,t("#lsamount".concat(a)).val().replace(/,/g,""));o=this.getYearDate(t("#lsmonth".concat(a)).val(),t("#lsyear".concat(a)).val(),i);i+=12}break;default:}}}return e}()},{key:"getCalculation",value:function(){function t(){return this.calculation}return t}()},{key:"calculateMortgage",value:function(){function n(){this.OffSetSavingMonth=0;var n=0;var r=Math.abs(t("#mortgageamount").val().replace(/,/g,""));var i=Math.abs(t("#mortgageamount").val().replace(/,/g,""));var a=Math.abs(t("#cursavings").val().replace(/,/g,""));n=Math.abs(t("#cursavings").val().replace(/,/g,""))+Math.abs(t("#avgcuraccbal").val().replace(/,/g,""));for(var o=0;o<=17;o++)this.calculation[o]=new Array(this.totalMonths);for(var s=1;s<=this.totalMonths;s++){var u=this.getLumpSum(this.getYearDate(s,0,0));var c=0;a+=Math.abs(t("#regsavings").val().replace(/,/g,""))+Math.abs(u);n+=Math.abs(t("#regsavings").val().replace(/,/g,""))+Math.abs(u);var l=a>i?i:a;var f=Math.abs(e.calculateMonthlyInterest(r,this.repayment));var h=Math.abs(e.calculateMonthlyInterest(i,this.repayment));var d=Math.abs(e.calculateMonthlyInterest(a,t("#avgsavingrate").val()));var g=Math.abs(e.calculateMonthlyInterest(l,t("#avgsavingrate").val()));var p=Math.abs(e.calculateMonthlyInterest(n,this.repayment));var v=p<h?p:h;var y=0;var m=void 0;var x=void 0;var _=void 0;if("repayment"===t("#repaymentType").val())m=s===this.totalMonths||r+f<c?r+f:this.monthlyPayments;else m=f;if(true===this.priority()){if("repayment"===t("#repaymentType").val())x=this.monthlyPayments<i+h-v?this.monthlyPayments:i+h-v;else x=f;_=i+h-v-x}else{c=Math.abs(e.calculateMonthlyPayment(i,this.totalMonths-s+1,this.repayment));if("repayment"===t("#repaymentType").val()){y=(y=this.monthlyPayments-c+v)>0?y:0;_=i+h-v-(x=c-v<i+h-v?c-v:i+h-v)}else{x=f-(y=(y=v)>0?y:0);_=i}}var w=r+f-m;var S=a+d;var b=n;var A=[r,f,m,w,i,h,v,x=x>0?x:0,y,_=_<0?0:_,a,l,d,g,S,n,p,b];for(var T=0;T<=17;T++)this.calculation[T][s]=A[T];r=w;a=S;if((n=b)>(i=_)&&0===this.OffSetSavingMonth)this.OffSetSavingMonth=s}}return n}()},{key:"calculateMortgagePAP",value:function(){function n(n,r){this.OffSetSavingMonth=0;var i=Math.abs(t("#mortgageamount").val().replace(/,/g,""));var a=Math.abs(t("#cursavings").val().replace(/,/g,""));var o=Math.abs(t("#cursavings").val().replace(/,/g,""))+Math.abs(t("#avgcuraccbal").val().replace(/,/g,""));for(var s=0;s<=17;s++)this.calculation[s]=new Array(this.totalMonths);for(var u=1;u<=this.totalMonths;u++){var c=this.getLumpSum(this.getYearDate(u,0,0));a+=Math.abs(t("#regsavings").val().replace(/,/g,""))+Math.abs(c);o+=Math.abs(t("#regsavings").val().replace(/,/g,""))+Math.abs(c);var l=a>i?i:a;var f=0;var h=0;var d=0;var g=0;var p=0;f=1===u?r:Math.abs(this.sMPayyArr[3]);h=Math.abs(e.calculateMonthlyInterest(f,this.repayment));g=f>(d=Math.abs(e.calculateMonthlyPayment(r,this.totalMonths,0===this.repayment?1:this.repayment)))?d:f+h;p=(p=Math.abs(f)+Math.abs(h)-Math.abs(g))>0?p:0;this.sMPayyArr[0]=Math.abs(f);this.sMPayyArr[1]=Math.abs(h);this.sMPayyArr[2]=Math.abs(g);this.sMPayyArr[3]=Math.abs(p);f=1===u?n:Math.abs(this.sMIntOnlyArr[3]);g=h=Math.abs(e.calculateMonthlyInterest(f,this.repayment));p=(p=Math.abs(f)+Math.abs(h)-Math.abs(g))>0?p:0;this.sMIntOnlyArr[0]=f;this.sMIntOnlyArr[1]=h;this.sMIntOnlyArr[2]=g;this.sMIntOnlyArr[3]=p;var v=Math.abs(this.sMPayyArr[0])+Math.abs(this.sMIntOnlyArr[0]);var y=Math.abs(this.sMPayyArr[1])+Math.abs(this.sMIntOnlyArr[1]);var m=Math.abs(e.calculateMonthlyInterest(i,this.repayment));var x=Math.abs(e.calculateMonthlyInterest(a,t("#avgsavingrate").val().replace(/,/g,"")));var _=Math.abs(e.calculateMonthlyInterest(l,t("#avgsavingrate").val().replace(/,/g,"")));var w=Math.abs(e.calculateMonthlyInterest(o,this.repayment));var S=w<m?w:m;var b=0;var A=Math.abs(this.sMPayyArr[2])+Math.abs(this.sMIntOnlyArr[2]);var T=void 0;var M=Math.abs(e.calculateMonthlyPayment(r,this.totalMonths,0===this.repayment?1:this.repayment));var C=n*(this.repayment/100/12);if(true===this.priority()){var P;T=M+C}else{b=(b=S)>0?b:0;var L;T=M+C-S}var E=i+m-S-T;var k=Math.abs(this.sMPayyArr[3])+Math.abs(this.sMIntOnlyArr[3]);var V=a+x;var O=o;var I=[v,y,A,k,i,m,S,T=T>0?T:0,b,E=E<0?0:E,a,l,x,_,V,o,w,O];for(var R=0;R<=17;R++)this.calculation[R][u]=I[R];v=k;a=V;if((o=O)>(i=E)&&0===this.OffSetSavingMonth)this.OffSetSavingMonth=u}}return n}()},{key:"calculateResult",value:function(){function n(){var n=this.totalMonths-this.findValue(this.calculation[9],0);var r=e.arraySum(this.calculation[8])/this.totalMonths;var i=t(".intOnlyNotReduceTerm").html();var a=t(".ppNotReduceTerm").html();var o=t(".notReduceTerm").html();var s=t(".repayEarly").html();var u=t(".saveMonthly").html();if(true===this.priority()){this.ymaddition=e.getYearMonthText(Math.floor(n/12),n%12);s=s.replace("[early]",this.ymaddition).replace("[strong]","<strong>").replace("[/strong]","</strong>");if(!this.ymaddition)if("intOnly"===t("#repaymentType").val())this.ymresults=i;else if("partAndPart"===t("#repaymentType").val())this.ymresults=a;else this.ymresults=o;else this.ymresults=s}else{this.ymaddition=this.roundCurrency(r);u=u.replace("[saveMonthly]",this.ymaddition).replace("[strong]","<strong>").replace("[/strong]","</strong>");this.ymresults=u}this.chart.setYmresults(this.ymresults)}return n}()},{key:"calculateBenefits",value:function(){function n(){var n=e.arraySum(this.calculation[1]);var r=e.arraySum(this.calculation[8]);var i=e.arraySum(this.calculation[5])-r;var a=e.arraySum(this.calculation[13]);this.intEarned=Math.abs(a)*(Math.abs(t("#curtaxband").val())/100);this.offSavedInt=n-i;this.chart.setOffSavedInt(this.offSavedInt)}return n}()},{key:"getOffSavedInt",value:function(){function t(){return this.offSavedInt}return t}()},{key:"benefitsList",value:function(){function n(){var n;if(true===this.priority()){if(this.ymaddition){var r=t(".pgInfoAddition").html().replace("[ymaddition]",this.ymaddition);var i=t(".pgInfoAdditionPara").html().replace("[currentSavings]",p.a.formatCurrency(t("#cursavings").val().replace(/,/g,""))).replace("[savingsMonthly]",p.a.formatCurrency(Math.abs(this.calculation[7][this.OffSetSavingMonth])+Math.abs(this.calculation[8][this.OffSetSavingMonth]))).replace("[timeReduction]",this.ymaddition);this.additions[0]=r;this.subadditions[0]=i}else if("intOnly"===t("#repaymentType").val()){var a=t(".intOnlyNotReduce").html();this.additions[0]=a;this.subadditions[0]=""}else if("partAndPart"===t("#repaymentType").val()){var o=t(".pAndpNotReduce").html();this.additions[0]=o;this.subadditions[0]=""}else{var s=t(".notReduce").html();this.additions[0]=s;this.subadditions[0]=""}var u=this.roundCurrency(this.offSavedInt);var c=this.roundCurrency(this.offSavedInt);var l=t(".youCouldSaveInterest").html().replace("[savedInt]",p.a.formatCurrency(u));var f=t(".youCouldSaveIntPara").html().replace("[savedInt]",p.a.formatCurrency(c));this.additions[1]=l;this.subadditions[1]=f;if(this.intEarned>0){var h=t(".savePayingTax").html().replace("[savePayingTax]",p.a.formatCurrency(this.roundCurrency(this.intEarned)));n=t(".saveTaxParaPay").html().replace("[savePayingTax]",p.a.formatCurrency(this.roundCurrency(this.intEarned)));this.additions[2]=h;this.subadditions[2]=n}else if(this.intEarned<=0&&3===this.additions.length){this.additions.pop();this.subadditions.pop()}}else{var d=e.arraySum(this.calculation[8])/this.totalMonths;var g=t(".saveOnPayments").html().replace("[saveMonthly]",this.roundCurrency(d));var v=t(".savePaymentsPara").html().replace("[projectSavings]",p.a.formatCurrency(this.calculation[15][this.OffSetSavingMonth])).replace("[reduceMonthlyTo]",p.a.formatCurrency(this.roundCurrency(this.calculation[7][this.OffSetSavingMonth]))).replace("[reductionMonthly]",p.a.formatCurrency(this.roundCurrency(this.calculation[8][this.OffSetSavingMonth])));var y=t(".intSaved").html().replace("[intSaved]",p.a.formatCurrency(this.offSavedInt));var m=t(".intSavedPara").html().replace("[intReducedBy]",p.a.formatCurrency(this.offSavedInt));this.additions[0]=g;this.subadditions[0]=v;this.additions[1]=y;this.subadditions[1]=m;if(this.intEarned>0){var x=this.roundCurrency(this.intEarned);var _=this.roundCurrency(this.intEarned);var w=t(".saveTax").html().replace("[saveTaxInt]",p.a.formatCurrency(x));n=t(".saveTaxPara").html().replace("[saveTaxInt]",p.a.formatCurrency(_));this.additions[2]=w;this.subadditions[2]=n}else if(this.intEarned<=0&&3===this.additions.length){this.additions.pop();this.subadditions.pop()}}}return n}()}],[{key:"calculateMonthlyPayment",value:function(){function t(t,e,n){return t*(n/1200)/(1-Math.pow(1+n/1200,-e))}return t}()},{key:"calculateMonthlyInterest",value:function(){function t(t,e,n){var r=n;return t*(e/1200*(1-(r="undefined"===typeof r?0:r)/100))}return t}()},{key:"getYearMonthText",value:function(){function t(t,e){var n="";if(t>0)n+="".concat(t," year");if(t>1)n+="s";if(""!==n&&e>0)n+=" and ";if(e>0)n+="".concat(e," month");if(e>1)n+="s";return n}return t}()},{key:"arraySum",value:function(){function t(t){var e=0;if(t.length>0)for(var n=1;n<t.length;n++)e+=Math.abs(t[n]);return e}return t}()}]);return e}();e.a=y}).call(this,n(57))},9708:function(t,e,n){"use strict";(function(t){var r=n(16);var i=n.n(r);var a=n(101);var o=n.n(a);var s=n(290);var u=n.n(s);var c=n(10072);var l=n.n(c);var f=n(48);var h=n.n(f);var d=n(33);var g=n.n(d);var p=n(42);var v=n.n(p);var y=n(1015);var m=n.n(y);var x=n(409);var _=n.n(x);var w=n(99);var S=n.n(w);var b=n(13);var A=n.n(b);var T=n(28);var M=n.n(T);var C=n(43);var P=n.n(C);var L=n(3);var E=n.n(L);var k=n(12);var V=n.n(k);var O=n(0);var I=n.n(O);var R=n(1014);var G=n.n(R);var N=n(7962);var D=n.n(N);var F=n(698);var z=function(){function e(){var t=this;E()(this,e);I()(this,"init",function(){t.addEventListeners();t.generateCharts()});I()(this,"roundCurrency",function(t){return Math.round(100*t)/100});I()(this,"constructBenefits",function(e,n){var r="";for(var i=0;i<e.length;i++)if("undefined"!==n[i]){r+="<h4>".concat(e[i],"</h4>");if("Yes"!==n[i])r+=t.constructInnerList(n[i])}else r+="<h4>".concat(e[i],"</h4>");return r});I()(this,"constructInnerList",function(t){if("undefined"===typeof t)return"";return"<p>".concat(t,"</p>")});this.dotRadius=12;this.chart1={};this.chart2={};this.endingClasses=[];this.offsetTermInfo=0;this.normMortPayments=[];this.offsetLineLength=0;this.peakMonth=0;this.yAxisCeil=0;this.initialOffPay=0;this.newWidth=0;this.getWidth=0;this.bottomGraph=256;this.year0=78;this.bttmDesktop=256;this.bttmMobile=235;this.info1Text="";this.info2Text="";this.info3Text="";this.info4Text="";this.info5Text="";this.info6Text="";this.offSavedIntChart=0;this.priorityOne=true;this.ymresultsChart="";this.init()}V()(e,[{key:"priority",value:function(){function t(t){this.priorityOne=t}return t}()},{key:"generateCharts",value:function(){function n(){var n=t(".graphLabelOutstandingM").text();var r=t(".graphLabelMonthlyP").text();var i=t(".cap-years").text();var a=e.initVals(1,300);var o=e.initVals(2,300);var s={bindto:"#chart1",data:{columns:a},tooltip:{contents:this.tooltipContents},axis:{x:{label:{text:i,position:"outer-center"}},y:{label:{text:n,position:"outer-bottom"}}},transition:{duration:100}};var u={bindto:"#chart2",data:{columns:o},tooltip:{contents:this.tooltipContents},axis:{x:{label:{text:i,position:"outer-center"}},y:{label:{text:r,position:"outer-bottom"}}},transition:{duration:100}};this.chart1=D.a.generate(s);this.chart2=D.a.generate(u)}return n}()},{key:"adjustChart1",value:function(){function t(){this.newWidth=this.adjustWidth();this.chart1.resize({width:this.newWidth,height:341});e.graphLines()}return t}()},{key:"adjustChart2",value:function(){function t(){this.newWidth=this.adjustWidth();this.chart2.resize({width:this.newWidth,height:341});e.graphLines()}return t}()},{key:"drawCharts",value:function(){function n(n,r,i,a,o,s,u,c,l,f,h){this.peakMonth=o;var d=n;this.normMortPayments=s;var g;var p=["Y Axis Pay Ceiling",0,100*Math.ceil(this.normMortPayments[1]/100)];this.normLineLength=f;this.offsetLineLength=h;this.initialOffPay=u[1];var v={columns:[d,r,i,c]};var y={columns:[this.normMortPayments,u,p]};this.showGraph();e.stopGraphTooltip();if(true===this.priorityOne){this.chart1.load(v);this.adjustChart1()}else{this.chart2.load(y);this.adjustChart2()}t(".c3-axis.c3-axis-x").attr("transform","translate(0,244.25)");t("#chart1 svg, #chart2 svg").prepend(t(".graph-background path"));e.graphLines();e.reNumberXAxis();t(".vertical").css("opacity","");t(".converted").attr("class",function(t,e){return e.replace("converted","")}).each(function(){var e=12*parseInt(t(this).html(),10);t(this).html(e)});var m=180;t(".converted").attr("class",function(t,e){return e.replace("converted","")}).html(180);this.yAxis();this.xAxis();this.infoDot(this.peakMonth,this.normLineLength,this.offsetTermInfo);this.shadeGraph();this.graphPageInfo()}return n}()},{key:"xAxis",value:function(){function e(){var e=this;setTimeout(function(){var n=25;var r=2;var i=5;var a=e.year0;var o=e.bottomGraph;var s;var u;var c;var l=[];var f;var h;t("path.horiz1, path.horiz2").attr("class",function(t,e){return e.replace("close","")});if(true===e.priorityOne){u=t("#chart1 .c3-axis.c3-axis-x tspan");s=70;t("path.horiz1").attr("class",function(t,e){return e.replace("close","")});t("path.horiz2").attr("class",function(t,e){return"".concat(e," close")})}else{u=t("#chart2 .c3-axis.c3-axis-x tspan");s=60;t("path.horiz2").attr("class",function(t,e){return e.replace("close","")});t("path.horiz1").attr("class",function(t,e){return"".concat(e," close")})}t(u).each(function(){var e=parseInt(t(this).html(),10);if(e%60===0){t(this).html(e/12);t(this).attr("class","converted").parent().css({opacity:"1",display:"block"});c=t(this).parent().parent().attr("transform");if(1===(f=t(".converted").length))l.push(a);else l.push(parseInt(c.substring(10,c.indexOf(",")),10)+s);if(void 0!==l[f-1])t(".vertical.v".concat(f)).attr("d","M".concat(l[f-1]," ").concat(o," L ").concat(l[f-1]," ").concat(25)).css("opacity","1")}});var d=l[1]-a;if(f<=4)t(l).each(function(e){if(e>0)for(var n=1;n<=4;n++){h=l[e]-d/5*n;t(".vertical.v".concat(e,"-").concat(n,"of4")).attr("d","M".concat(h," ").concat(o," L ").concat(h," ").concat(25)).css("opacity","1")}});else t(l).each(function(e){if(e>0){h=l[e]-d/2;t(".vertical.v".concat(e,"-inc")).attr("d","M".concat(h," ").concat(o," L ").concat(h," ").concat(25)).css("opacity","1")}})},200)}return e}()},{key:"yAxis",value:function(){function e(){var e=this;setTimeout(function(){if(true===e.priorityOne)e.year0=78;else e.year0=68;var n;var r;var i;var a;if(t(window).width()<606){e.bottomGraph=e.bttmMobile;t(".line1").attr("d","M".concat(e.year0,"  25 L 1160 25"));t(".line2").attr("d","M".concat(e.year0," 95 L 1160 95"));t(".line3").attr("d","M".concat(e.year0," 165 L 1160 165"));t(".line4").attr("d","M".concat(e.year0," ").concat(e.bottomGraph," L 1160 ").concat(e.bottomGraph))}else{e.bottomGraph=e.bttmDesktop;t(".line1").attr("d","M".concat(e.year0,"  25 L 1160 25"));t(".line2").attr("d","M".concat(e.year0,"  102 L 1160 102"));t(".line3").attr("d","M".concat(e.year0,"  179 L 1160 179"));t(".line4").attr("d","M".concat(e.year0," ").concat(e.bottomGraph," L 1160 ").concat(e.bottomGraph))}t(".yAxisShowVal text").css("opacity","0");t(".yAxisShowVal").attr("class",function(t,e){return e.replace("yAxisShowVal","")});t(".highestVal").attr("class",function(t,e){return e.replace("highestVal","")});if(true===e.priorityOne){n=parseInt(t("#mortgageamount").val().replace(/,/g,""),10);if((r=parseInt(Math.ceil(t(".c3-shapes-Normal-Mortgage .c3-circle-0").attr("cy")),10))<50){a=G.a.formatMoney(n,"\xa3",0,",",".","%s%v");i=-10}else{a="".concat(G.a.formatMoney(n,"\xa3",0,",",".","%s%v").slice(0,-4),"K");i=0}t("#chart1 .c3-axis.c3-axis-y g.tick").last().attr("class",function(t,e){return"".concat(e," highestVal yAxisShowVal")}).attr("transform","translate(".concat(i,",").concat(r,")")).css("opacity","1");t("#chart1 .c3-axis.c3-axis-y g.tick").first().attr("class",function(t,e){return"".concat(e," yAxisShowVal lowestVal")}).attr("transform","translate(-2,".concat(e.bottomGraph,")")).css("opacity","1")}else{n=e.normMortPayments[1];a=G.a.formatMoney(n,"\xa3",0,",",".","%s%v");r=parseInt(Math.ceil(t(".c3-shapes-Normal-Mortgage-Payments .c3-circle-0").attr("cy")),10);t("#chart2 .c3-axis.c3-axis-y g.tick").last().attr("class",function(t,e){return"".concat(e," highestVal yAxisShowVal")}).attr("transform","translate(-10,".concat(r,")")).css("opacity","1");t("#chart2 .c3-axis.c3-axis-y g.tick").first().attr("class",function(t,e){return"".concat(e," yAxisShowVal lowestVal")}).attr("transform","translate(-2,".concat(e.bottomGraph,")")).css("opacity","1")}t(".highestVal tspan").html(a);t(".lowestVal tspan").html(0);t(".yAxisShowVal text").css("opacity","1");t(".c3-axis-y-label").attr("dx","1em").attr("dy","-45.6");t(".offset-calc-result").animate({opacity:"1"},1e3);t("span#result").html(e.ymresultsChart)},200)}return e}()},{key:"setYmresults",value:function(){function t(t){this.ymresultsChart=t}return t}()},{key:"infoDot",value:function(){function n(n,r,i){var a=this;setTimeout(function(){if(true===a.priorityOne)a.adjustChart1();else a.adjustChart2();var o=".c3-circles-Offset-Savings";var s=".c3-circles-Normal-Mortgage";var u=".c3-circles-Offset-Mortgage";var c=".c3-circles-Offset-Mortgage-Payments";e.graphLines();e.reNumberXAxis();t(".peak-month1").attr("class",function(t,e){return e.replace("peak-month1","")});t(".norm-info").attr("class",function(t,e){return e.replace("norm-info","")});t(".offset-info").attr("class",function(t,e){return e.replace("offset-info","")});t(".peak-month2").attr("class",function(t,e){return e.replace("peak-month2","")});t(".norm-Payment").attr("class",function(t,e){return e.replace("norm-Payment","")});t(".off-Payment").attr("class",function(t,e){return e.replace("off-Payment","")});t("".concat(o," .c3-circle-").concat(n)).attr("class",function(t,e){return"".concat(e," peak-month1")});t("".concat(s," .c3-circle-").concat(r)).attr("class",function(t,e){return"".concat(e," norm-info")});t("".concat(u," .c3-circle-").concat(i)).attr("class",function(t,e){return"".concat(e," offset-info")});t("".concat(c," .c3-circle-").concat(n)).attr("class",function(t,e){return"".concat(e," peak-month2")});t("".concat(c," .c3-circle-").concat(r)).attr("class",function(t,e){return"".concat(e," norm-Payment")});t("".concat(c," .c3-circle-0")).attr("class",function(t,e){return"".concat(e," off-Payment")});var l=t(".peak-month1").attr("cx");var f=parseInt(l,10)+50;var h=t(".peak-month1").attr("cy");var d=parseInt(h,10)-13;var g=t(".offset-info").attr("cx");var p=parseInt(g,10)+50;var v=t(".offset-info").attr("cy");var y=parseInt(v,10)-13;var m=t(".norm-info").attr("cx");var x=parseInt(m,10)+50;var _=t(".norm-info").attr("cy");var w=parseInt(_,10)-13;var S=t(".off-Payment").attr("cx");var b=parseInt(S,10)+40;var A=t(".off-Payment").attr("cy");var T=parseInt(A,10)-13;var M=t(".peak-month2").attr("cx");var C=parseInt(M,10)+40;var P=t(".peak-month2").attr("cy");var L=parseInt(P,10)-13;var E=t(".norm-Payment").attr("cx");var k=parseInt(E,10)+40;var V=t(".norm-Payment").attr("cy");var O=parseInt(V,10)-13;t("#chart1 svg").append(t(".graph-info1 svg"));t("#chart1 circle.info-dot").css("opacity","1");if(!Number.isNaN(f)&&void 0!==f)t("#info1").attr("x",f).attr("y",d);else t("#info1").attr("x",-50);if(!Number.isNaN(p)&&void 0!==p)t("#info2").attr("x",p).attr("y",y);else t("#info2").attr("x",-50);if(!Number.isNaN(x)&&void 0!==x)t("#info3").attr("x",x).attr("y",w);else t("#info3").attr("x",-50);t("#chart2 svg").append(t(".graph-info2 svg"));t("#chart2 circle.info-dot").css("opacity","1");if(!Number.isNaN(b)&&void 0!==b)t("#info4").attr("x",b).attr("y",T);else t("#info4").attr("x",-50);if(!Number.isNaN(C)&&void 0!==C)t("#info5").attr("x",C).attr("y",L);else t("#info5").attr("x",-50);if(!Number.isNaN(k)&&void 0!==k)t("#info6").attr("x",k).attr("y",O);else t("#info6").attr("x",-50)},100)}return n}()},{key:"addEventListeners",value:function(){function n(){var n=this;t("body").on("mouseover touchstart",".info-dot",function(t){t.preventDefault();e.stopGraphTooltip()});t("#info1").on("click",function(t){t.preventDefault();n.showGraphTooltipChart("info1")});t("#info2").on("click",function(t){t.preventDefault();n.showGraphTooltipChart("info2")});t("#info3").on("click",function(t){t.preventDefault();n.showGraphTooltipChart("info3")});t("#info4").on("click",function(t){t.preventDefault();n.showGraphTooltipChart("info4")});t("#info5").on("click",function(t){t.preventDefault();n.showGraphTooltipChart("info5")});t("#info6").on("click",function(t){t.preventDefault();n.showGraphTooltipChart("info6")})}return n}()},{key:"graphPageInfo",value:function(){function e(){this.graphText();if(true===this.priorityOne){t(".graph1.dot1Info p").html(this.info1Text);t(".graph1.dot2Info p").html(this.info2Text);t(".graph1.dot3Info p").html(this.info3Text);t(".graph2").addClass("close");t(".graph1").removeClass("close")}else{t(".graph2.dot4Info p").html(this.info4Text);t(".graph2.dot5Info p").html(this.info5Text);t(".graph2.dot6Info p").html(this.info6Text);t(".graph1").addClass("close");t(".graph2").removeClass("close")}}return e}()},{key:"setOffSavedInt",value:function(){function t(t){this.offSavedIntChart=t}return t}()},{key:"graphText",value:function(){function n(){var n=this.normLineLength-this.peakMonth;var r=this.normLineLength-(this.offsetLineLength+1);var i;var a=(this.normalMortPayments[1]-this.initialOffPay).toFixed(2);var o=e.tooltipMonth(this.peakMonth);var s=e.tooltipMonth(n);var u=e.tooltipMonth(this.offsetLineLength+1);var c=e.tooltipMonth(r);var l=F.a.formatCurrency(this.roundCurrency(this.offSavedIntChart));var f=F.a.formatCurrency(this.initialOffPay);var h=F.a.formatCurrency(a);var d=e.tooltipMonth(this.peakMonth);var g=e.tooltipMonth(this.normLineLength);var p=F.a.formatCurrency(this.offSavedIntChart);this.info1Text=t(".info1Text").html().replace("[info1TextPeakMonth]",o).replace("[info1TextPeakReduction]",s);this.info2Text=t(".info2Text").html().replace("[info2TextOffsetEnd]",u).replace("[info2TextOffsetEndReduced]",c).replace("[info2TextEndSaving]",l);this.info3Text=t(".info3Text").html();this.info4Text=t(".info4Text").html().replace("[info4InitialPayment]",f).replace("[info4InitialPaySaving]",h);this.info5Text=t(".info5Text").html().replace("[info5PeakMonth]",d).replace("[info5OffsetTerm]",g);this.info6Text=t(".info6Text").html().replace("[info6TotalSavings]",p).replace("[fullTerm]",g).replace("[strong]","<strong>").replace("[/strong]","</strong>")}return n}()},{key:"showGraphTooltipChart",value:function(){function n(n){this.graphText();var r=4;var i;var a;var o;var s;var u;var c;var l;var f;var h;var d;var g;if("info1"===n||"info2"===n||"info3"===n){a=t("#chart1");o=t("#chart1 .c3-tooltip-container");var p=32;var v=22;i='<table class="c3-tooltip arrow_box bottom"><tbody>';g=5;var y=a.offset();var m=y.left;var x=y.top;o.css({top:"",left:"",width:"50%"});t(".arrow_box").removeClass("offDot").removeClass("normDot").removeClass("offPayDot");if("info1"===n){i+='<tr><th colspan="2">'.concat(e.tooltipMonth(this.peakMonth),"</th></tr>");i+='<tr><td colspan="2"><p>'.concat(this.info1Text,"</p></td></tr></tbody></table>");o.html(i);u=(s=t("#info1").offset()).left;c=s.top;l=o.width();f=o.height();if(l/2>u){h=u-m-22+4;t(".c3-tooltip-container .arrow_box").addClass("offPayDot")}else h=u-m+this.dotRadius-l/2+4}else if("info2"===n){i+='<tr><th colspan="2">'.concat(e.tooltipMonth(this.offsetLineLength+1),"</th></tr>");i+='<tr><td colspan="2"><p>'.concat(this.info2Text,"</p></td></tr></tbody></table>");o.html(i);u=(s=t("#info2").offset()).left;c=s.top;l=o.width();f=o.height();h=u-m+this.dotRadius-l+32+4;t(".c3-tooltip-container .arrow_box").addClass("offDot")}else if("info3"===n){i+='<tr><th colspan="2">'.concat(e.tooltipMonth(this.normLineLength),"</th></tr>");i+='<tr><td colspan="2"><p>'.concat(this.info3Text,"</p></td></tr></tbody></table>");o.html(i);u=(s=t("#info3").offset()).left;c=s.top;l=o.width();f=o.height();h=u-m+this.dotRadius-l+32+4;t(".c3-tooltip-container .arrow_box").addClass("normDot")}d=c-x+this.dotRadius-f+g;o.css({top:"".concat(d,"px"),left:"".concat(h,"px")})}else{a=t("#chart2");o=t("#chart2 .c3-tooltip-container");var _=32;var w=22;g=28;var S=a.offset();var b=S.left;var A=S.top;o.css({top:"",left:"",width:"50%"});t(".arrow_box").removeClass("offPayDot").removeClass("normPayDot");if("info4"===n){i='<table class="c3-tooltip arrow_box top"><tbody>';i+='<tr><th colspan="2"><span>At start</span></th></tr>';i+='<tr><td colspan="2"><p>'.concat(this.info4Text,"</p></td></tr></tbody></table>");o.html(i);u=(s=t("#info4").offset()).left;c=s.top;h=u-b-22+4;t(".c3-tooltip-container .arrow_box").addClass("offPayDot")}else if("info5"===n){i='<table class="c3-tooltip arrow_box top"><tbody>';i+='<tr><th colspan="2">'.concat(e.tooltipMonth(this.peakMonth),"</th></tr>");i+='<tr><td colspan="2"><p>'.concat(this.info5Text,"</p></td></tr></tbody></table>");o.html(i);u=(s=t("#info5").offset()).left;c=s.top;l=o.width();h=u-b+this.dotRadius-l/2+4}else if("info6"===n){i='<table class="c3-tooltip arrow_box top"><tbody>';i+='<tr><th colspan="2">'.concat(e.tooltipMonth(this.normLineLength),"</th></tr>");i+='<tr><td colspan="2"><p>'.concat(this.info6Text,"</p></td></tr></tbody></table>");o.html(i);u=(s=t("#info6").offset()).left;c=s.top;l=o.width();h=u-b+this.dotRadius-l+32+4;t(".c3-tooltip-container .arrow_box").addClass("normPayDot")}d=c-A+this.dotRadius+g;o.css({top:"".concat(d,"px"),left:"".concat(h,"px")})}}return n}()},{key:"tooltipContents",value:function(){function n(n,r,i){var a=this;var o=a.config;var s=a.CLASS;var u=o.tooltip_format_name||function(t){return t};var c=o.tooltip_format_value||i;var l;var f;var h={};var d={};var g;for(f=0;f<n.length;f++)if(n[f]&&(!n[f].value||0!==n[f].value)&&"data2"!==n[f].name){if(!l){if(0!==n[f].index)h=e.tooltipMonth(n[f].index);else h="<span>".concat(t(".atStart").html(),"</span>");l='<table class="'.concat(s.tooltip,'">').concat(h?'<tr><th colspan="2">'.concat(h,"</th></tr>"):'""')}g=u(n[f].name);if(n[f].index!==this.normLineLength)d="&pound;".concat(F.a.formatCurrency(c(n[f].value,n[f].ratio,n[f].id,n[f].index)));else d=t(".ended").html();if("Y Axis Ceiling"!==g&&"Y Axis Pay Ceiling"!==g&&null!==n[f].value){l+='<tr class="'.concat(s.tooltipName,"--").concat(n[f].id.replace(" ","-"),'">');l+='<td class="name"><span></span>'.concat(g,"</td>");l+='<td class="value">'.concat(d,"</td>");l+="</tr>"}}return"".concat(l,"</table>")}return n}()},{key:"adjustWidth",value:function(){function e(){var e;if(true===this.priorityOne)e=t("#chart1");else e=t("#chart2");this.getWidth=e.width();if(t(window).width()>=649)this.newWidth=this.getWidth-20;else if(t(window).width()<649)this.newWidth=this.getWidth-20;if(this.newWidth>200)return this.newWidth;return 200}return e}()},{key:"showGraph",value:function(){function e(){t("circle.info-dot").css("opacity","0");t("#resultsStep").removeClass("close");if(true===this.priorityOne){t("#chart1, .graph-legend .savings-legend").removeClass("close");t("#chart2, #step2, #step1").removeClass("close").addClass("close")}else{t("#chart1, .graph-legend .savings-legend, #step2, #step1").removeClass("close").addClass("close");t("#chart2").removeClass("close")}}return e}()},{key:"shadeGraph",value:function(){function e(){var e;if(true===this.priorityOne)e="";else e="-Payments";var n=t(".c3-chart-lines path.c3-line-Normal-Mortgage".concat(e)).attr("d");var r;var i=t(".c3-chart-lines path.c3-line-Offset-Mortgage".concat(e)).attr("d").split("L");i.shift();var a=i.reverse();a[0]="L".concat(a[0]);var o;var s=n+"".concat(a.join("L")," Z");t(".c3-lines-Normal-Mortgage, .c3-lines-Normal-Mortgage-Payments").prepend(t(".shaded"));t("path.shaded").attr("d",s)}return e}()},{key:"setData",value:function(){function t(t,e,n,r,i){this.calculation=t;this.OffSetSavingMonth=e;this.normLineLength=n;this.additions=r;this.subadditions=i}return t}()},{key:"chartData",value:function(){function e(){var e=this;var n=this.calculation;var r=Math.abs(n[7][this.OffSetSavingMonth])+Math.abs(n[8][this.OffSetSavingMonth]);var i=["Normal Mortgage",t("#mortgageamount").val().replace(/,/g,"")];var a=n[3];var o=window.screen.width;this.normLineLength=a.length-1;var s=this.normLineLength/(.8*o)*12;a.shift();t.each(a,function(t,r){i.push(r);if(t+1===n[3].length)if(e.normLineLength%60>0)for(var a=n[3].length%60;a<=60;a++)i.push(null);else for(var o=0;o<=s;o++)i.push(null)});for(var u=0;u<=s;u++)i.push(null);var c=["Offset Mortgage",t("#mortgageamount").val().replace(/,/g,"")];var l=n[9];var f=[];l.shift();t.each(l,function(t,n){if(0===n)c.push(null);else{c.push(n);f.push(n)}e.offsetTermInfo=f.length});var h=["Offset Savings"];var d=n[17];d.shift();t.each(d,function(t,n){if(t<=e.OffSetSavingMonth)h.push(n)});var g=1e4*Math.ceil(t("#mortgageamount").val().replace(/,/g,"")/1e4);this.yAxisCeil=["Y Axis Ceiling",g];var p=["Projected Savings"];var v=[];t.each(d,function(t,n){if(t<=e.OffSetSavingMonth||n>g)p.push(null);else{p.push(n);v.push(n)}});this.projSavInfo=Math.round(.7*v.length)+h.length;this.normalMortPayments=["Normal Mortgage Payments"];t.each(a,function(t){e.normalMortPayments.push(r);if(t+1===a.length)if(a.length%60>0)for(var n=a.length%60;n<=60;n++)e.normalMortPayments.push(null);else for(var i=0;i<=5;i++)e.normalMortPayments.push(null)});var y=["Offset Mortgage Payments"];var m=n[7];m.shift();t.each(m,function(t,e){y.push(e)});y.push(r);if(i&&c&&h&&p&&this.OffSetSavingMonth&&this.normalMortPayments&&y&&this.yAxisCeil&&this.projSavInfo&&this.normLineLength&&this.offsetTermInfo)this.drawCharts(i,c,h,p,this.OffSetSavingMonth,this.normalMortPayments,y,this.yAxisCeil,this.projSavInfo,this.normLineLength,this.offsetTermInfo);var x=this.offSavedIntChart;document.getElementById("benefits").innerHTML=this.constructBenefits(this.additions,this.subadditions);F.a.setClass("results","cstep");if(x>1)F.a.setClass("products","cstep yes");else F.a.setClass("products","cstep no")}return e}()}],[{key:"tooltipMonth",value:function(){function e(e){var n=t(".year").html();var r=t(".month").html();var i=t(".pluralYear").html();var a=t(".pluralMonth").html();var o=Math.floor(e/12);var s="".concat(o," ").concat(o>1?i:n);var u=o>0?s:"";var c="".concat(e%12," ").concat(e%12>1?a:r);var l=" ".concat(e%12)>0?c:"";var f;return"<span>".concat(u," ").concat(l,"</span>")}return e}()},{key:"reNumberXAxis",value:function(){function e(){var e;t(".converted").each(function(){e=parseInt(t(this).html(),10)/12;t(this).html(e).parent().css("display","block")})}return e}()},{key:"graphLines",value:function(){function e(){if(t(window).width()>=606)t(".c3-axis.c3-axis-x").attr("transform","translate(0,275)");else if(t(window).width()<606)t(".c3-axis.c3-axis-x").attr("transform","translate(0,255)");t("#chart1>svg, #chart2>svg").attr("width",this.newWidth)}return e}()},{key:"initVals",value:function(){function e(e,n){var r=t(".normalMortgage").html();var i=t(".offsetMortgage").html();var a=t(".offsetSavings").html();var o=t(".normalMortgagePayments").html();var s=t(".offsetMortgagePayments").html();var u=[];if(1===e){var c=[r];var l=[i];var f=["Projected Savings"];var h=[a];var d;var g;u=[c,l,h,["Y Axis Ceiling"]];for(var p=0;p<=n;p++){c.push(0);l.push(0);f.push(0);h.push(0)}}else{var v=[o];var y=[s];var m;var x;u=[v,y,["Y Axis Pay Ceiling"]];for(var _=0;_<=n;_++){v.push(0);y.push(0)}}return u}return e}()},{key:"stopGraphTooltip",value:function(){function e(){t(".c3-tooltip-container").empty()}return e}()}]);return e}();e.a=z}).call(this,n(57))},99:function(t,e,n){var r=n(29);var i=n(404);r({global:true,forced:parseInt!=i},{parseInt:i})}});